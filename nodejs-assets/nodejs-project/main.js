!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=43)}([function(e,t,n){try{var r=n(2);if("function"!=typeof r.inherits)throw"";e.exports=r.inherits}catch(t){e.exports=n(51)}},function(e,t,n){(function(t){var r=n(30)(t);e.exports=r}).call(this,"/")},function(e,t){e.exports=require("util")},function(e,t,n){"use strict";var r=n(9),i=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=c;var s=Object.create(n(6));s.inherits=n(0);var o=n(19),a=n(22);s.inherits(c,o);for(var u=i(a.prototype),l=0;l<u.length;l++){var h=u[l];c.prototype[h]||(c.prototype[h]=a.prototype[h])}function c(e){if(!(this instanceof c))return new c(e);o.call(this,e),a.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",f)}function f(){this.allowHalfOpen||this._writableState.ended||r.nextTick(d,this)}function d(e){e.end()}Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(c.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),c.prototype._destroy=function(e,t){this.push(null),this.end(),r.nextTick(t,e)}},function(e,t){e.exports=function e(t,r){if(!t){var i=new n(r);throw Error.captureStackTrace&&Error.captureStackTrace(i,e),i}};class n extends Error{}n.prototype.name="AssertionError"},function(e,t){function n(e){return e<31?1<<e:(1<<30)*(1<<e-30)}function r(e){return(e-(1&e))/2}function i(e){this.index=0,this.offset=0,this.factor=0}t.fullRoots=function(e,t){if(1&e)throw new Error("You can only look up roots for depth(0) blocks");t||(t=[]),e/=2;for(var n=0,r=1;;){if(!e)return t;for(;2*r<=e;)r*=2;t.push(n+r-1),n+=2*r,e-=r,r=1}},t.depth=function(e){var t=0;for(e+=1;!(1&e);)t++,e=r(e);return t},t.sibling=function(e,n){n||(n=t.depth(e));var r=t.offset(e,n);return t.index(n,1&r?r-1:r+1)},t.parent=function(e,n){n||(n=t.depth(e));var i=t.offset(e,n);return t.index(n+1,r(i))},t.leftChild=function(e,n){return 1&e?(n||(n=t.depth(e)),t.index(n-1,2*t.offset(e,n))):-1},t.rightChild=function(e,n){return 1&e?(n||(n=t.depth(e)),t.index(n-1,1+2*t.offset(e,n))):-1},t.children=function(e,n){if(!(1&e))return null;n||(n=t.depth(e));var r=2*t.offset(e,n);return[t.index(n-1,r),t.index(n-1,r+1)]},t.leftSpan=function(e,r){return 1&e?(r||(r=t.depth(e)),t.offset(e,r)*n(r+1)):e},t.rightSpan=function(e,r){return 1&e?(r||(r=t.depth(e)),(t.offset(e,r)+1)*n(r+1)-2):e},t.count=function(e,r){return 1&e?(r||(r=t.depth(e)),n(r+1)-1):1},t.spans=function(e,r){if(!(1&e))return[e,e];r||(r=t.depth(e));var i=t.offset(e,r),s=n(r+1);return[i*s,(i+1)*s-2]},t.index=function(e,t){return(1+2*t)*n(e)-1},t.offset=function(e,r){return 1&e?(r||(r=t.depth(e)),((e+1)/n(r)-1)/2):e/2},t.iterator=function(e){var t=new i;return t.seek(e||0),t},i.prototype.seek=function(e){this.index=e,1&this.index?(this.offset=t.offset(e),this.factor=n(t.depth(e)+1)):(this.offset=e/2,this.factor=2)},i.prototype.isLeft=function(){return!(1&this.offset)},i.prototype.isRight=function(){return!this.isLeft()},i.prototype.prev=function(){return this.offset?(this.offset--,this.index-=this.factor,this.index):this.index},i.prototype.next=function(){return this.offset++,this.index+=this.factor,this.index},i.prototype.sibling=function(){return this.isLeft()?this.next():this.prev()},i.prototype.parent=function(){return 1&this.offset?(this.index-=this.factor/2,this.offset=(this.offset-1)/2):(this.index+=this.factor/2,this.offset/=2),this.factor*=2,this.index},i.prototype.leftSpan=function(){return this.index=this.index-this.factor/2+1,this.offset=this.index/2,this.factor=2,this.index},i.prototype.rightSpan=function(){return this.index=this.index+this.factor/2-1,this.offset=this.index/2,this.factor=2,this.index},i.prototype.leftChild=function(){return 2===this.factor||(this.factor/=2,this.index-=this.factor/2,this.offset*=2),this.index},i.prototype.rightChild=function(){return 2===this.factor||(this.factor/=2,this.index+=this.factor/2,this.offset=2*this.offset+1),this.index}},function(e,t){function n(e){return Object.prototype.toString.call(e)}t.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===n(e)},t.isBoolean=function(e){return"boolean"==typeof e},t.isNull=function(e){return null===e},t.isNullOrUndefined=function(e){return null==e},t.isNumber=function(e){return"number"==typeof e},t.isString=function(e){return"string"==typeof e},t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=function(e){return void 0===e},t.isRegExp=function(e){return"[object RegExp]"===n(e)},t.isObject=function(e){return"object"==typeof e&&null!==e},t.isDate=function(e){return"[object Date]"===n(e)},t.isError=function(e){return"[object Error]"===n(e)||e instanceof Error},t.isFunction=function(e){return"function"==typeof e},t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=Buffer.isBuffer},function(e,t,n){const r=n(73),i=n(74),s=Buffer.from([0]),o=Buffer.from([1]),a=Buffer.from([2]),u=Buffer.from("hypercore"),l=Buffer.from("hypercore capability");function h(e){return i.encode(e,Buffer.allocUnsafe(8))}t.capability=function(e,t){if(!t)return null;const n=Buffer.allocUnsafe(32);return r.crypto_generichash_batch(n,[l,t.tx.slice(0,32),e],t.rx.slice(0,32)),n},t.remoteCapability=function(e,t){if(!t)return null;const n=Buffer.allocUnsafe(32);return r.crypto_generichash_batch(n,[l,t.rx.slice(0,32),e],t.tx.slice(0,32)),n},t.keyPair=function(e){const t=Buffer.allocUnsafe(r.crypto_sign_PUBLICKEYBYTES),n=Buffer.allocUnsafe(r.crypto_sign_SECRETKEYBYTES);return e?r.crypto_sign_seed_keypair(t,n,e):r.crypto_sign_keypair(t,n),{publicKey:t,secretKey:n}},t.sign=function(e,t){const n=Buffer.allocUnsafe(r.crypto_sign_BYTES);return r.crypto_sign_detached(n,e,t),n},t.verify=function(e,t,n){return r.crypto_sign_verify_detached(t,e,n)},t.data=function(e){const t=Buffer.allocUnsafe(32);return r.crypto_generichash_batch(t,[s,h(e.length),e]),t},t.leaf=function(e){return t.data(e.data)},t.parent=function(e,t){if(e.index>t.index){const n=e;e=t,t=n}const n=Buffer.allocUnsafe(32);return r.crypto_generichash_batch(n,[o,h(e.size+t.size),e.hash,t.hash]),n},t.tree=function(e,t){const n=new Array(3*e.length+1);var i=0;n[i++]=a;for(var s=0;s<e.length;s++){const t=e[s];n[i++]=t.hash,n[i++]=h(t.index),n[i++]=h(t.size)}return t||(t=Buffer.allocUnsafe(32)),r.crypto_generichash_batch(t,n),t},t.signable=function(e,n){const r=Buffer.allocUnsafe(40);return Buffer.isBuffer(e)?e.copy(r):t.tree(e,r.slice(0,32)),i.encode(n,r.slice(32)),r},t.randomBytes=function(e){const t=Buffer.allocUnsafe(e);return r.randombytes_buf(t),t},t.discoveryKey=function(e){const t=Buffer.allocUnsafe(32);return r.crypto_generichash(t,u,e),t},r.sodium_free?t.free=function(e){e.secure&&r.sodium_free(e)}:t.free=function(){}},function(e,t,n){e.exports={encode:n(87),decode:n(88),encodingLength:n(89)}},function(e,t,n){"use strict";"undefined"==typeof process||!process.version||0===process.version.indexOf("v0.")||0===process.version.indexOf("v1.")&&0!==process.version.indexOf("v1.8.")?e.exports={nextTick:function(e,t,n,r){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var i,s,o=arguments.length;switch(o){case 0:case 1:return process.nextTick(e);case 2:return process.nextTick((function(){e.call(null,t)}));case 3:return process.nextTick((function(){e.call(null,t,n)}));case 4:return process.nextTick((function(){e.call(null,t,n,r)}));default:for(i=new Array(o-1),s=0;s<i.length;)i[s++]=arguments[s];return process.nextTick((function(){e.apply(null,i)}))}}}:e.exports=process},function(e,t){e.exports=require("events")},function(e,t,n){var r=n(50),i=r.Buffer;function s(e,t){for(var n in e)t[n]=e[n]}function o(e,t,n){return i(e,t,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=r:(s(r,t),t.Buffer=o),s(i,o),o.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,n)},o.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=i(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},o.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},function(e,t){e.exports=require("fs")},function(e,t){e.exports=require("path")},function(e,t,n){var r=n(28);function i(e){if(!(this instanceof i))return new i(e);if(e||(e={}),Buffer.isBuffer(e)&&(e={buffer:e}),this.pageOffset=e.pageOffset||0,this.pageSize=e.pageSize||1024,this.pages=e.pages||r(this.pageSize),this.byteLength=this.pages.length*this.pageSize,this.length=8*this.byteLength,(t=this.pageSize)&t-1)throw new Error("The page size should be a power of two");var t;if(this._trackUpdates=!!e.trackUpdates,this._pageMask=this.pageSize-1,e.buffer){for(var n=0;n<e.buffer.length;n+=this.pageSize)this.pages.set(n/this.pageSize,e.buffer.slice(n,n+this.pageSize));this.byteLength=e.buffer.length,this.length=8*this.byteLength}}e.exports=i,i.prototype.get=function(e){var t=7&e,n=(e-t)/8;return!!(this.getByte(n)&128>>t)},i.prototype.getByte=function(e){var t=e&this._pageMask,n=(e-t)/this.pageSize,r=this.pages.get(n,!0);return r?r.buffer[t+this.pageOffset]:0},i.prototype.set=function(e,t){var n=7&e,r=(e-n)/8,i=this.getByte(r);return this.setByte(r,t?i|128>>n:i&(255^128>>n))},i.prototype.toBuffer=function(){for(var e=function(e){if(Buffer.alloc)return Buffer.alloc(e);var t=new Buffer(e);return t.fill(0),t}(this.pages.length*this.pageSize),t=0;t<this.pages.length;t++){var n=this.pages.get(t,!0),r=t*this.pageSize;n&&n.buffer.copy(e,r,this.pageOffset,this.pageOffset+this.pageSize)}return e},i.prototype.setByte=function(e,t){var n=e&this._pageMask,r=(e-n)/this.pageSize,i=this.pages.get(r,!1);return n+=this.pageOffset,i.buffer[n]!==t&&(i.buffer[n]=t,e>=this.byteLength&&(this.byteLength=e+1,this.length=8*this.byteLength),this._trackUpdates&&this.pages.updated(i),!0)}},function(e,t,n){var r=n(1),i=n(4),s=r.crypto_scalarmult_BYTES,o=r.crypto_scalarmult_BYTES,a=r.crypto_scalarmult_SCALARBYTES,u=r.crypto_kx_SEEDBYTES;e.exports={DHLEN:s,PKLEN:o,SKLEN:a,SEEDLEN:u,generateKeypair:function(e,t){i(e.byteLength===o),i(t.byteLength===a),r.crypto_kx_keypair(e,t)},generateSeedKeypair:function(e,t,n){i(e.byteLength===o),i(t.byteLength===a),i(n.byteLength===a),r.crypto_kx_seed_keypair(e,t,n)},dh:function(e,t,n){i(e.byteLength===s),i(t.byteLength===a),i(n.byteLength===o),r.crypto_scalarmult(e,t,n)}}},function(e,t){function n(e,t){return t._index<e.length&&e[t._index]===t}t.add=function(e,t){return n(e,t)||(t._index=e.length,e.push(t)),t},t.has=n,t.remove=function(e,t){if(!n(e,t))return null;var r=e.pop();r!==t&&(e[t._index]=r,r._index=t._index);return t},t.swap=function(e,t,r){if(!n(e,t)||!n(e,r))return;var i=t._index;t._index=r._index,e[t._index]=t,r._index=i,e[r._index]=r}},function(e,t,n){var r=n(18);"disable"===process.env.READABLE_STREAM&&r?(e.exports=r,(t=e.exports=r.Readable).Readable=r.Readable,t.Writable=r.Writable,t.Duplex=r.Duplex,t.Transform=r.Transform,t.PassThrough=r.PassThrough,t.Stream=r):((t=e.exports=n(19)).Stream=r||t,t.Readable=t,t.Writable=n(22),t.Duplex=n(3),t.Transform=n(24),t.PassThrough=n(54))},function(e,t){e.exports=require("stream")},function(e,t,n){"use strict";var r=n(9);e.exports=_;var i,s=n(49);_.ReadableState=v;n(10).EventEmitter;var o=function(e,t){return e.listeners(t).length},a=n(20),u=n(11).Buffer,l=global.Uint8Array||function(){};var h=Object.create(n(6));h.inherits=n(0);var c=n(2),f=void 0;f=c&&c.debuglog?c.debuglog("stream"):function(){};var d,p=n(52),g=n(21);h.inherits(_,a);var y=["error","close","destroy","pause","resume"];function v(e,t){e=e||{};var r=t instanceof(i=i||n(3));this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var s=e.highWaterMark,o=e.readableHighWaterMark,a=this.objectMode?16:16384;this.highWaterMark=s||0===s?s:r&&(o||0===o)?o:a,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new p,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(d||(d=n(23).StringDecoder),this.decoder=new d(e.encoding),this.encoding=e.encoding)}function _(e){if(i=i||n(3),!(this instanceof _))return new _(e);this._readableState=new v(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),a.call(this)}function b(e,t,n,r,i){var s,o=e._readableState;null===t?(o.reading=!1,function(e,t){if(t.ended)return;if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,x(e)}(e,o)):(i||(s=function(e,t){var n;r=t,u.isBuffer(r)||r instanceof l||"string"==typeof t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk"));var r;return n}(o,t)),s?e.emit("error",s):o.objectMode||t&&t.length>0?("string"==typeof t||o.objectMode||Object.getPrototypeOf(t)===u.prototype||(t=function(e){return u.from(e)}(t)),r?o.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):m(e,o,t,!0):o.ended?e.emit("error",new Error("stream.push() after EOF")):(o.reading=!1,o.decoder&&!n?(t=o.decoder.write(t),o.objectMode||0!==t.length?m(e,o,t,!1):S(e,o)):m(e,o,t,!1))):r||(o.reading=!1));return function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(o)}function m(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&x(e)),S(e,t)}Object.defineProperty(_.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),_.prototype.destroy=g.destroy,_.prototype._undestroy=g.undestroy,_.prototype._destroy=function(e,t){this.push(null),t(e)},_.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=u.from(e,t),t=""),n=!0),b(this,e,t,!1,n)},_.prototype.unshift=function(e){return b(this,e,null,!0,!1)},_.prototype.isPaused=function(){return!1===this._readableState.flowing},_.prototype.setEncoding=function(e){return d||(d=n(23).StringDecoder),this._readableState.decoder=new d(e),this._readableState.encoding=e,this};function w(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=8388608?e=8388608:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function x(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(f("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?r.nextTick(k,e):k(e))}function k(e){f("emit readable"),e.emit("readable"),C(e)}function S(e,t){t.readingMore||(t.readingMore=!0,r.nextTick(E,e,t))}function E(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(f("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function L(e){f("readable nexttick read 0"),e.read(0)}function B(e,t){t.reading||(f("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),C(e),t.flowing&&!t.reading&&e.read(0)}function C(e){var t=e._readableState;for(f("flow",t.flowing);t.flowing&&null!==e.read(););}function A(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=function(e,t,n){var r;e<t.head.data.length?(r=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):r=e===t.head.data.length?t.shift():n?function(e,t){var n=t.head,r=1,i=n.data;e-=i.length;for(;n=n.next;){var s=n.data,o=e>s.length?s.length:e;if(o===s.length?i+=s:i+=s.slice(0,e),0===(e-=o)){o===s.length?(++r,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=s.slice(o));break}++r}return t.length-=r,i}(e,t):function(e,t){var n=u.allocUnsafe(e),r=t.head,i=1;r.data.copy(n),e-=r.data.length;for(;r=r.next;){var s=r.data,o=e>s.length?s.length:e;if(s.copy(n,n.length-e,0,o),0===(e-=o)){o===s.length?(++i,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=s.slice(o));break}++i}return t.length-=i,n}(e,t);return r}(e,t.buffer,t.decoder),n);var n}function O(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,r.nextTick(R,t,e))}function R(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function T(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}_.prototype.read=function(e){f("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return f("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?O(this):x(this),null;if(0===(e=w(e,t))&&t.ended)return 0===t.length&&O(this),null;var r,i=t.needReadable;return f("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&f("length less than watermark",i=!0),t.ended||t.reading?f("reading or ended",i=!1):i&&(f("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=w(n,t))),null===(r=e>0?A(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&O(this)),null!==r&&this.emit("data",r),r},_.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},_.prototype.pipe=function(e,t){var n=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=e;break;case 1:i.pipes=[i.pipes,e];break;default:i.pipes.push(e)}i.pipesCount+=1,f("pipe count=%d opts=%j",i.pipesCount,t);var a=(!t||!1!==t.end)&&e!==process.stdout&&e!==process.stderr?l:_;function u(t,r){f("onunpipe"),t===n&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,f("cleanup"),e.removeListener("close",y),e.removeListener("finish",v),e.removeListener("drain",h),e.removeListener("error",g),e.removeListener("unpipe",u),n.removeListener("end",l),n.removeListener("end",_),n.removeListener("data",p),c=!0,!i.awaitDrain||e._writableState&&!e._writableState.needDrain||h())}function l(){f("onend"),e.end()}i.endEmitted?r.nextTick(a):n.once("end",a),e.on("unpipe",u);var h=function(e){return function(){var t=e._readableState;f("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&o(e,"data")&&(t.flowing=!0,C(e))}}(n);e.on("drain",h);var c=!1;var d=!1;function p(t){f("ondata"),d=!1,!1!==e.write(t)||d||((1===i.pipesCount&&i.pipes===e||i.pipesCount>1&&-1!==T(i.pipes,e))&&!c&&(f("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++,d=!0),n.pause())}function g(t){f("onerror",t),_(),e.removeListener("error",g),0===o(e,"error")&&e.emit("error",t)}function y(){e.removeListener("finish",v),_()}function v(){f("onfinish"),e.removeListener("close",y),_()}function _(){f("unpipe"),n.unpipe(e)}return n.on("data",p),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?s(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,"error",g),e.once("close",y),e.once("finish",v),e.emit("pipe",n),i.flowing||(f("pipe resume"),n.resume()),e},_.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var s=0;s<i;s++)r[s].emit("unpipe",this,n);return this}var o=T(t.pipes,e);return-1===o||(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},_.prototype.on=function(e,t){var n=a.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var i=this._readableState;i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.emittedReadable=!1,i.reading?i.length&&x(this):r.nextTick(L,this))}return n},_.prototype.addListener=_.prototype.on,_.prototype.resume=function(){var e=this._readableState;return e.flowing||(f("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,r.nextTick(B,e,t))}(this,e)),this},_.prototype.pause=function(){return f("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(f("pause"),this._readableState.flowing=!1,this.emit("pause")),this},_.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;for(var i in e.on("end",(function(){if(f("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){(f("wrapped data"),n.decoder&&(i=n.decoder.write(i)),n.objectMode&&null==i)||(n.objectMode||i&&i.length)&&(t.push(i)||(r=!0,e.pause()))})),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var s=0;s<y.length;s++)e.on(y[s],this.emit.bind(this,y[s]));return this._read=function(t){f("wrapped _read",t),r&&(r=!1,e.resume())},this},Object.defineProperty(_.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),_._fromList=A},function(e,t,n){e.exports=n(18)},function(e,t,n){"use strict";var r=n(9);function i(e,t){e.emit("error",t)}e.exports={destroy:function(e,t){var n=this,s=this._readableState&&this._readableState.destroyed,o=this._writableState&&this._writableState.destroyed;return s||o?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||r.nextTick(i,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?(r.nextTick(i,n,e),n._writableState&&(n._writableState.errorEmitted=!0)):t&&t(e)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(e,t,n){"use strict";var r=n(9);function i(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var r=e.entry;e.entry=null;for(;r;){var i=r.callback;t.pendingcb--,i(n),r=r.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}(t,e)}}e.exports=y;var s,o=!process.browser&&["v0.10","v0.9."].indexOf(process.version.slice(0,5))>-1?setImmediate:r.nextTick;y.WritableState=g;var a=Object.create(n(6));a.inherits=n(0);var u={deprecate:n(53)},l=n(20),h=n(11).Buffer,c=global.Uint8Array||function(){};var f,d=n(21);function p(){}function g(e,t){s=s||n(3),e=e||{};var a=t instanceof s;this.objectMode=!!e.objectMode,a&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var u=e.highWaterMark,l=e.writableHighWaterMark,h=this.objectMode?16:16384;this.highWaterMark=u||0===u?u:a&&(l||0===l)?l:h,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var c=!1===e.decodeStrings;this.decodeStrings=!c,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,i=n.sync,s=n.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,i,s){--t.pendingcb,n?(r.nextTick(s,i),r.nextTick(x,e,t),e._writableState.errorEmitted=!0,e.emit("error",i)):(s(i),e._writableState.errorEmitted=!0,e.emit("error",i),x(e,t))}(e,n,i,t,s);else{var a=m(n);a||n.corked||n.bufferProcessing||!n.bufferedRequest||b(e,n),i?o(_,e,n,a,s):_(e,n,a,s)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}function y(e){if(s=s||n(3),!(f.call(y,this)||this instanceof s))return new y(e);this._writableState=new g(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),l.call(this)}function v(e,t,n,r,i,s,o){t.writelen=r,t.writecb=o,t.writing=!0,t.sync=!0,n?e._writev(i,t.onwrite):e._write(i,s,t.onwrite),t.sync=!1}function _(e,t,n,r){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,r(),x(e,t)}function b(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,s=new Array(r),o=t.corkedRequestsFree;o.entry=n;for(var a=0,u=!0;n;)s[a]=n,n.isBuf||(u=!1),n=n.next,a+=1;s.allBuffers=u,v(e,t,!0,t.length,s,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new i(t),t.bufferedRequestCount=0}else{for(;n;){var l=n.chunk,h=n.encoding,c=n.callback;if(v(e,t,!1,t.objectMode?1:l.length,l,h,c),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function m(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function w(e,t){e._final((function(n){t.pendingcb--,n&&e.emit("error",n),t.prefinished=!0,e.emit("prefinish"),x(e,t)}))}function x(e,t){var n=m(t);return n&&(!function(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,r.nextTick(w,e,t)):(t.prefinished=!0,e.emit("prefinish")))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),n}a.inherits(y,l),g.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(g.prototype,"buffer",{get:u.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(f=Function.prototype[Symbol.hasInstance],Object.defineProperty(y,Symbol.hasInstance,{value:function(e){return!!f.call(this,e)||this===y&&(e&&e._writableState instanceof g)}})):f=function(e){return e instanceof this},y.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},y.prototype.write=function(e,t,n){var i,s=this._writableState,o=!1,a=!s.objectMode&&(i=e,h.isBuffer(i)||i instanceof c);return a&&!h.isBuffer(e)&&(e=function(e){return h.from(e)}(e)),"function"==typeof t&&(n=t,t=null),a?t="buffer":t||(t=s.defaultEncoding),"function"!=typeof n&&(n=p),s.ended?function(e,t){var n=new Error("write after end");e.emit("error",n),r.nextTick(t,n)}(this,n):(a||function(e,t,n,i){var s=!0,o=!1;return null===n?o=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||t.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(e.emit("error",o),r.nextTick(i,o),s=!1),s}(this,s,e,n))&&(s.pendingcb++,o=function(e,t,n,r,i,s){if(!n){var o=function(e,t,n){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=h.from(t,n));return t}(t,r,i);r!==o&&(n=!0,i="buffer",r=o)}var a=t.objectMode?1:r.length;t.length+=a;var u=t.length<t.highWaterMark;u||(t.needDrain=!0);if(t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:s,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else v(e,t,!1,a,r,i,s);return u}(this,s,a,e,t,n)),o},y.prototype.cork=function(){this._writableState.corked++},y.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||b(this,e))},y.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(y.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),y.prototype._write=function(e,t,n){n(new Error("_write() is not implemented"))},y.prototype._writev=null,y.prototype.end=function(e,t,n){var i=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||i.finished||function(e,t,n){t.ending=!0,x(e,t),n&&(t.finished?r.nextTick(n):e.once("finish",n));t.ended=!0,e.writable=!1}(this,i,n)},Object.defineProperty(y.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),y.prototype.destroy=d.destroy,y.prototype._undestroy=d.undestroy,y.prototype._destroy=function(e,t){this.end(),t(e)}},function(e,t,n){"use strict";var r=n(11).Buffer,i=r.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function s(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(r.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=u,this.end=l,t=4;break;case"utf8":this.fillLast=a,t=4;break;case"base64":this.text=h,this.end=c,t=3;break;default:return this.write=f,void(this.end=d)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(t)}function o(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function a(e){var t=this.lastTotal-this.lastNeed,n=function(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"�";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"�";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"�"}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function u(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function l(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function h(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function c(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function f(e){return e.toString(this.encoding)}function d(e){return e&&e.length?this.write(e):""}t.StringDecoder=s,s.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},s.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t},s.prototype.text=function(e,t){var n=function(e,t,n){var r=t.length-1;if(r<n)return 0;var i=o(t[r]);if(i>=0)return i>0&&(e.lastNeed=i-1),i;if(--r<n||-2===i)return 0;if((i=o(t[r]))>=0)return i>0&&(e.lastNeed=i-2),i;if(--r<n||-2===i)return 0;if((i=o(t[r]))>=0)return i>0&&(2===i?i=0:e.lastNeed=i-3),i;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},s.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},function(e,t,n){"use strict";e.exports=o;var r=n(3),i=Object.create(n(6));function s(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function o(e){if(!(this instanceof o))return new o(e);r.call(this,e),this._transformState={afterTransform:s.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",a)}function a(){var e=this;"function"==typeof this._flush?this._flush((function(t,n){u(e,t,n)})):u(this,null,null)}function u(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}i.inherits=n(0),i.inherits(o,r),o.prototype.push=function(e,t){return this._transformState.needTransform=!1,r.prototype.push.call(this,e,t)},o.prototype._transform=function(e,t,n){throw new Error("_transform() is not implemented")},o.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},o.prototype._destroy=function(e,t){var n=this;r.prototype._destroy.call(this,e,(function(e){t(e),n.emit("close")}))}},function(e,t){function n(e){if("object"==typeof e&&e&&e.encode&&e.decode)return e;switch(e){case"ndjson":return n.ndjson;case"json":return n.json;case"ascii":return n.ascii;case"utf-8":case"utf8":return n.utf8;case"hex":return n.hex;case"base64":return n.base64;case"ucs-2":case"ucs2":return n.ucs2;case"utf16-le":case"utf16le":return n.utf16le}return n.binary}function r(e){return{encode:e?function(e){return Buffer.from(JSON.stringify(e)+"\n")}:function(e){return Buffer.from(JSON.stringify(e))},decode:function(e){return JSON.parse(e.toString())}}}function i(e){return{encode:function(t){return"string"!=typeof t&&(t=t.toString()),Buffer.from(t,e)},decode:function(t){return t.toString(e)}}}e.exports=n,n.ascii=i("ascii"),n.utf8=i("utf-8"),n.hex=i("hex"),n.base64=i("base64"),n.ucs2=i("ucs2"),n.utf16le=i("utf16le"),n.ndjson=r(!0),n.json=r(!1),n.binary={encode:function(e){return"string"==typeof e?Buffer.from(e,"utf-8"):Buffer.isBuffer(e)?e:Buffer.from(e.buffer,e.byteOffset,e.byteLength)},decode:function(e){return e}}},function(e,t,n){var r=n(63),i=n(27);e.exports=function e(t){var n={};return n.align=e,n.encode=function e(t,n,r){r||(r=0);n||(n=i(o(t)));var a=new s(t,n,r);return u(a),e.bytes=a.outputOffset-r,n},n.encode.bytes=0,n.encodingLength=o,n.decode=function e(t,n){n||(n=0);var s=i(a(t,n)),o=0;for(;n<t.length;){var u=r.decode(t,n),l=1&u,h=l?(u-(3&u))/4:u/2;n+=r.decode.bytes,l?s.fill(2&u?255:0,o,o+h):(t.copy(s,o,n,n+h),n+=h),o+=h}return s.fill(0,o),e.bytes=t.length-n,s},n.decode.bytes=0,n.decodingLength=a,n;function s(e,t,n){this.inputOffset=0,this.inputLength=e.length,this.input=e,this.outputOffset=n,this.output=t}function o(e){var t=new s(e,null,0);return u(t),t.outputOffset}function a(e,n){n||(n=0);for(var i=0;n<e.length;){var s=r.decode(e,n);n+=r.decode.bytes;var o=1&s,a=o?(s-(3&s))/4:s/2;i+=a,o||(n+=a)}if(n>e.length)throw new Error("Invalid RLE bitfield");return i&t-1?i+(t-(i&t-1)):i}function u(e){for(var t=0,n=0,i=e.input;e.inputLength>0&&!i[e.inputLength-1];)e.inputLength--;for(var s=0;s<e.inputLength;s++)i[s]!==n?(t&&h(e,s,t,n),0===i[s]||255===i[s]?(n=i[s],t=1):t=0):t++;t&&h(e,e.inputLength,t,n),function(e){var t=e.inputLength-e.inputOffset;if(!t)return;e.output?l(e,e.inputLength):e.outputOffset+=t+r.encodingLength(2*t);e.inputOffset=e.inputLength}(e)}function l(e,t){var n=t-e.inputOffset;r.encode(2*n,e.output,e.outputOffset),e.outputOffset+=r.encode.bytes,e.input.copy(e.output,e.outputOffset,e.inputOffset,t),e.outputOffset+=n}function h(e,t,n,i){var s=t-n-e.inputOffset,o=4*n+(i?2:0)+1,a=(s?r.encodingLength(2*s)+s:0)+r.encodingLength(o);if(!(a>=r.encodingLength(2*(t-e.inputOffset))+t-e.inputOffset)){if(!e.output)return e.outputOffset+=a,void(e.inputOffset=t);s&&l(e,t-n),r.encode(o,e.output,e.outputOffset),e.outputOffset+=r.encode.bytes,e.inputOffset=t}}}(1)},function(e,t){e.exports=function(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative');return Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e)}},function(e,t){function n(e,t){if(!(this instanceof n))return new n(e,t);this.length=0,this.updates=[],this.path=new Uint16Array(4),this.pages=new Array(32768),this.maxPages=this.pages.length,this.level=0,this.pageSize=e||1024,this.deduplicate=t?t.deduplicate:null,this.zeros=this.deduplicate?r(this.deduplicate.length):null}function r(e){if(Buffer.alloc)return Buffer.alloc(e);var t=new Buffer(e);return t.fill(0),t}function i(e,t){this.offset=e*t.length,this.buffer=t,this.updated=!1,this.deduplicate=0}e.exports=n,n.prototype.updated=function(e){for(;this.deduplicate&&e.buffer[e.deduplicate]===this.deduplicate[e.deduplicate];)if(e.deduplicate++,e.deduplicate===this.deduplicate.length){e.deduplicate=0,e.buffer.equals&&e.buffer.equals(this.deduplicate)&&(e.buffer=this.deduplicate);break}!e.updated&&this.updates&&(e.updated=!0,this.updates.push(e))},n.prototype.lastUpdate=function(){if(!this.updates||!this.updates.length)return null;var e=this.updates.pop();return e.updated=!1,e},n.prototype._array=function(e,t){if(e>=this.maxPages){if(t)return;!function(e,t){for(;e.maxPages<t;){var n=e.pages;e.pages=new Array(32768),e.pages[0]=n,e.level++,e.maxPages*=32768}}(this,e)}var n,r;n=e,r=this.path,n=((n=(n-(r[0]=32767&n))/32768)-(r[1]=32767&n))/32768,r[3]=(n-(r[2]=32767&n))/32768&32767;for(var i=this.pages,s=this.level;s>0;s--){var o=this.path[s],a=i[o];if(!a){if(t)return;a=i[o]=new Array(32768)}i=a}return i},n.prototype.get=function(e,t){var n,s,o=this._array(e,t),a=this.path[0],u=o&&o[a];return u||t||(u=o[a]=new i(e,r(this.pageSize)),e>=this.length&&(this.length=e+1)),u&&u.buffer===this.deduplicate&&this.deduplicate&&!t&&(u.buffer=(n=u.buffer,s=Buffer.allocUnsafe?Buffer.allocUnsafe(n.length):new Buffer(n.length),n.copy(s),s),u.deduplicate=0),u},n.prototype.set=function(e,t){var n=this._array(e,!1),s=this.path[0];if(e>=this.length&&(this.length=e+1),!t||this.zeros&&t.equals&&t.equals(this.zeros))n[s]=void 0;else{this.deduplicate&&t.equals&&t.equals(this.deduplicate)&&(t=this.deduplicate);var o=n[s],a=function(e,t){if(e.length===t)return e;if(e.length>t)return e.slice(0,t);var n=r(t);return e.copy(n),n}(t,this.pageSize);o?o.buffer=a:n[s]=new i(e,a)}},n.prototype.toBuffer=function(){for(var e=new Array(this.length),t=r(this.pageSize),n=0;n<e.length;)for(var i=this._array(n,!0),s=0;s<32768&&n<e.length;s++)e[n++]=i&&i[s]?i[s].buffer:t;return Buffer.concat(e)}},function(e,t,n){var r=n(5),i=n(14);function s(e){if(!(this instanceof s))return new s(e);this.bitfield=e||i()}function o(e){return(e-(1&e))/2}function a(e,t,n,i){for(var s=r.fullRoots(e),o=0;o<s.length;o++)s[o]===n||i.get(s[o])||t.push(s[o])}e.exports=s,s.prototype.proof=function(e,t){t||(t={});var n=[],i=t.tree||new s,u=t.digest||0;if(!this.get(e))return null;if(t.hash&&n.push(e),1===u)return{nodes:n,verifiedBy:0};var l=null,h=e,c=e,f=1&u;for(u=o(u);u;){if(1===u&&f){this.get(c)&&i.set(c),r.sibling(c)<c&&(c=r.sibling(c)),l=r.fullRoots(r.rightSpan(c)+2);for(var d=0;d<l.length;d++)this.get(l[d])&&i.set(l[d]);break}h=r.sibling(c),1&u&&this.get(h)&&i.set(h),c=r.parent(c),u=o(u)}for(c=e;!i.get(c);){if(h=r.sibling(c),!this.get(h)){var p=this.verifiedBy(c);return a(p,n,c,i),{nodes:n,verifiedBy:p}}i.get(h)||n.push(h),c=r.parent(c)}return{nodes:n,verifiedBy:0}},s.prototype.digest=function(e){if(this.get(e))return 1;for(var t=0,n=r.sibling(e),i=Math.max(n+2,this.bitfield.length),s=2,o=r.depth(e),a=r.parent(n,o++);r.rightSpan(n)<i||r.leftSpan(a)>0;){if(this.get(n)&&(t+=s),this.get(a))return 1&(t+=2*s)||(t+=1),t+1===4*s?1:t;n=r.sibling(a),a=r.parent(n,o++),s*=2}return t},s.prototype.blocks=function(){for(var e=0,t=0,n=this.bitfield.length;r.rightSpan(t)<n;)t=r.parent(t),this.get(t)&&(e=t);return(this.get(e)?this.verifiedBy(e):0)/2},s.prototype.roots=function(){return r.fullRoots(2*this.blocks())},s.prototype.verifiedBy=function(e,t){if(!this.get(e))return 0;for(var n=r.depth(e),i=e,s=r.parent(i,n++);this.get(s)&&this.get(r.sibling(i));)i=s,s=r.parent(i,n++);for(n--;n;){for(i=r.leftChild(r.index(n,r.offset(i,n)+1),n),n--;!this.get(i)&&n;)i=r.leftChild(i,n--);t&&this.get(i)&&t.push(i)}return this.get(i)?i+2:i},s.prototype.get=function(e){return this.bitfield.get(e)},s.prototype.set=function(e){if(!this.bitfield.set(e,!0))return!1;for(;this.bitfield.get(r.sibling(e))&&(e=r.parent(e),this.bitfield.set(e,!0)););return!0}},function(e,t,n){var r=n(12),i=n(13),s=n(31),o=require,a=process.config&&process.config.variables||{},u=!!process.env.PREBUILDS_ONLY,l=process.versions.modules,h=!(!process.versions||!process.versions.electron)||!!process.env.ELECTRON_RUN_AS_NODE||"undefined"!=typeof window&&window.process&&"renderer"===window.process.type?"electron":"node",c=s.arch(),f=s.platform(),d=process.env.LIBC||(function(e){return"linux"===e&&r.existsSync("/etc/alpine-release")}(f)?"musl":"glibc"),p=process.env.ARM_VERSION||("arm64"===c?"8":a.arm_version)||"",g=(process.versions.uv||"").split(".")[0];function y(e){return o(y.path(e))}function v(e){try{return r.readdirSync(e)}catch(e){return[]}}function _(e,t){var n=v(e).filter(t);return n[0]&&i.join(e,n[0])}function b(e){return/\.node$/.test(e)}function m(e){var t=e.split("."),n={file:e,specificity:0};if("node"===t.pop()){for(var r=0;r<t.length;r++){var i=t[r];if("node"===i||"electron"===i||"node-webkit"===i)n.runtime=i;else if("napi"===i)n.napi=!0;else if("abi"===i.slice(0,3))n.abi=i.slice(3);else if("uv"===i.slice(0,2))n.uv=i.slice(2);else if("armv"===i.slice(0,4))n.armv=i.slice(4);else{if("glibc"!==i&&"musl"!==i)continue;n.libc=i}n.specificity++}return n}}function w(e,t){return function(n){return null!=n&&(!(n.runtime!==e&&!function(e){return"node"===e.runtime&&e.napi}(n))&&(!(n.abi!==t&&!n.napi)&&((!n.uv||n.uv===g)&&((!n.armv||n.armv===p)&&(!n.libc||n.libc===d)))))}}function x(e){return function(t,n){return t.runtime!==n.runtime?t.runtime===e?-1:1:t.abi!==n.abi?t.abi?-1:1:t.specificity!==n.specificity?t.specificity>n.specificity?-1:1:0}}e.exports=y,y.path=function(e){e=i.resolve(e||".");try{var t=o(i.join(e,"package.json")).name.toUpperCase().replace(/-/g,"_");process.env[t+"_PREBUILD"]&&(e=process.env[t+"_PREBUILD"])}catch(e){}if(!u){var n=_(i.join(e,"build/Release"),b);if(n)return n;var r=_(i.join(e,"build/Debug"),b);if(r)return r}var s=k(e);if(s)return s;var a=k(i.dirname(process.execPath));if(a)return a;var y=["platform="+f,"arch="+c,"runtime="+h,"abi="+l,"uv="+g,p?"armv="+p:"","libc="+d,"node="+process.versions.node,process.versions&&process.versions.electron?"electron="+process.versions.electron:"","webpack=true"].filter(Boolean).join(" ");throw new Error("No native build was found for "+y+"\n    loaded from: "+e+"\n");function k(e){var t=i.join(e,"prebuilds",f+"-"+c),n=v(t).map(m).filter(w(h,l)).sort(x(h))[0];if(n)return i.join(t,n.file)}},y.parseTags=m,y.matchTags=w,y.compareTags=x},function(e,t){e.exports=require("os")},function(e,t,n){var r=n(2).inspect.custom;e.exports=r||Symbol.for("nodejs.util.inspect.custom")},function(e,t){e.exports=function(e){return Buffer.isBuffer(e)&&(e=e.toString("hex")),"string"==typeof e&&e.length>8?e.slice(0,6)+".."+e.slice(-2):e}},function(e,t){function n(e){e.continueSync()}e.exports=class{constructor(){this._tick=0,this._fns=[],this._dep=null}get waiting(){return this._tick>0}depend(e){if(null!==this._dep)throw new Error("Can only depend on one other guard currently");this._dep=e}wait(){this._tick++}continue(e,t,r){1===this._tick?process.nextTick(n,this):this._tick--,e&&e(t,r)}waitAndContinue(){let e=!1;return this.wait(),()=>!e&&(e=!0,this.continue(),!0)}continueSync(e,t,n){if(!--this._tick){for(;null!==this._fns&&this._fns.length;)this._ready(this._fns.pop());e&&e(t,n)}}destroy(){const e=this._fns;if(!e)for(this._fns=null;e.length;)e.pop()()}ready(e){null===this._fns||0===this._tick?this._ready(e):this._fns.push(e)}_ready(e){null===this._dep?e():this._dep.ready(e)}}},function(e,t,n){const r=n(77),i=n(7),s=n(39),o=n(32),a=n(34),u=n(33),l=n(40),{Duplex:h}=n(100),c=n(103)("hypercore-protocol");class f extends l{send(e){const t=this.local.handlers;return t._changes!==this.local.changes&&(t._changes=this.local.changes,t.state.options(0,{extensions:this.local.names()})),t.state.extension(0,this.id,this.encode(e))}}class d{constructor(e,{encrypted:t,noise:n,keyPair:r}){this.stream=e,this.created=new Map,this.local=[null],this.remote=[null],this.noise=!(!1===n&&!1===t),this.encrypted=!1!==t,this.keyPair=r}allocLocal(){const e=this.local.indexOf(null);return e>0?e:(this.local.push(null),this.local.length-1)}attachLocal(e){const t=this.allocLocal();this.local[t]=e,e.localId=t}attachRemote(e,t){this.remote.length===t&&this.remote.push(null),this.remote[t]=e,e.remoteId=t}detachChannel(e){e.localId>-1&&this.local[e.localId]===e&&(this.local[e.localId]=null),e.remoteId>-1&&this.remote[e.remoteId]===e&&(this.remote[e.remoteId]=null);const t=e.discoveryKey.toString("hex");this.created.get(t)===e&&this.created.delete(t)}getChannel(e){return this.created.get(e.toString("hex"))}createChannel(e){const t=e.toString("hex"),n=this.created.get(t);if(n)return n;const r=new p(this.stream.state,this.stream,e);return this.created.set(t,r),r}onauthenticate(e,t){this.stream.handlers&&this.stream.handlers.onauthenticate?this.stream.handlers.onauthenticate(e,t):t(null)}onhandshake(){c("recv handshake"),this.stream.handlers&&this.stream.handlers.onhandshake&&this.stream.handlers.onhandshake(),this.stream.emit("handshake")}onopen(e,t){c("recv open",e,t);const n=this.createChannel(t.discoveryKey);if(n.remoteCapability=t.capability,this.attachRemote(n,e),-1===n.localId)this.stream.handlers.ondiscoverykey&&this.stream.handlers.ondiscoverykey(n.discoveryKey),this.stream.emit("discovery-key",n.discoveryKey);else{if(this.noise&&!n.remoteVerified)return void this.stream.destroy(new Error("Invalid remote channel capability"));this.stream.emit("duplex-channel",n)}n.handlers&&n.handlers.onopen&&n.handlers.onopen(),this.stream.handlers.onremoteopen&&this.stream.handlers.onremoteopen(n.discoveryKey),this.stream.emit("remote-open",n.discoveryKey)}onoptions(e,t){c("recv options",e,t);const n=this.remote[e];n&&n.handlers&&n.handlers.onoptions?n.handlers.onoptions(t):0!==e||n||this.stream._updateExtensions(t.extensions)}onstatus(e,t){c("recv status",e,t);const n=this.remote[e];n&&n.handlers&&n.handlers.onstatus&&n.handlers.onstatus(t)}onhave(e,t){c("recv have",e,t);const n=this.remote[e];n&&n.handlers&&n.handlers.onhave&&n.handlers.onhave(t)}onunhave(e,t){c("recv unhave",e,t);const n=this.remote[e];n&&n.handlers&&n.handlers.onunhave&&n.handlers.onunhave(t)}onwant(e,t){c("recv want",e,t);const n=this.remote[e];n&&n.handlers&&n.handlers.onwant&&n.handlers.onwant(t)}onunwant(e,t){c("recv unwant",e,t);const n=this.remote[e];n&&n.handlers&&n.handlers.onunwant&&n.handlers.onunwant(t)}onrequest(e,t){c("recv request",e,t);const n=this.remote[e];n&&n.handlers&&n.handlers.onrequest&&n.handlers.onrequest(t)}oncancel(e,t){c("recv cancel",e,t);const n=this.remote[e];n&&n.handlers&&n.handlers.oncancel&&n.handlers.oncancel(t)}ondata(e,t){c("recv data",e,t);const n=this.remote[e];n&&n.handlers&&n.handlers.ondata&&n.handlers.ondata(t)}onextension(e,t,n){c("recv extension",e,t);const r=this.remote[e];r&&r.handlers&&r.handlers.onextension?r.handlers.onextension(t,n):0!==e||r||this.stream.remoteExtensions.onmessage(t,n)}onclose(e,t){c("recv close",e,t);let n=e<this.remote.length?this.remote[e]:null;n?this.remote[e]=null:t.discoveryKey&&(n=this.getChannel(t.discoveryKey)),n&&(n.handlers&&n.handlers.onclose&&n.handlers.onclose(),this.stream.handlers&&this.stream.handlers.onchannelclose&&this.stream.handlers.onchannelclose(n.discoveryKey,n.key),n.localId>-1&&this.local[n.localId]===n&&(this.local[n.localId]=null),this.created.delete(n.discoveryKey.toString("hex")),this.stream._prefinalize())}onmissing(e){null!==this.stream._utp&&this.stream._utp.setContentSize(e)}send(e){return null!==this.stream.keepAlive&&this.stream.keepAlive.refresh(),this.stream.bytesSent+=e.length,this.stream.push(e)}destroy(e){this.stream.destroy(e),this.local=[],this.remote=[];for(const e of this.created.values())e.localId=e.remoteId=-1,e.handlers&&e.handlers.onclose&&e.handlers.onclose(),this.stream.handlers&&this.stream.handlers.onchannelclose&&this.stream.handlers.onchannelclose(e.discoveryKey,e.key);this.created.clear()}}class p{constructor(e,t,n){this.key=null,this.discoveryKey=n,this.localId=-1,this.remoteId=-1,this.remoteCapability=null,this.handlers=null,this.state=e,this.stream=t}get opened(){return this.localId>-1}get closed(){return-1===this.localId}get remoteOpened(){return this.remoteId>-1}get remoteVerified(){return this.localId>-1&&this.remoteId>-1&&!!this.remoteCapability&&this.remoteCapability.equals(this.state.remoteCapability(this.key))}options(e){return c("send options",e),this.state.options(this.localId,e)}status(e){return c("send status",e),this.state.status(this.localId,e)}have(e){return c("send have",e),this.state.have(this.localId,e)}unhave(e){return c("send unhave",e),this.state.unhave(this.localId,e)}want(e){return c("send want",e),this.state.want(this.localId,e)}unwant(e){return c("send unwant",e),this.state.unwant(this.localId,e)}request(e){return c("send request",e),this.state.request(this.localId,e)}cancel(e){return c("send cancel",e),this.state.cancel(this.localId,e)}data(e){return c("send data",e),this.state.data(this.localId,e)}extension(e,t){return c("send extension",e),this.state.extension(this.localId,e,t)}close(){c("send close"),this.closed||(this.stream.channelizer.detachChannel(this),this.state.close(this.localId,{}),this.stream._prefinalize())}destroy(e){this.stream.destroy(e)}}e.exports=class e extends h{constructor(e,t={}){if(super(),"boolean"!=typeof e)throw new Error("Must specify initiator boolean in replication stream");if(this.initiator=e,this.handlers=t,this.channelizer=new d(this,{encrypted:t.encrypted,noise:t.noise,keyPair:t.keyPair}),this.state=new r(e,this.channelizer),this.live=!!t.live,this.timeout=null,this.keepAlive=null,this.prefinalize=new a,this.bytesSent=0,this.bytesReceived=0,this.extensions=f.createLocal(this),this.remoteExtensions=this.extensions.remote(),this._utp=null,this._changes=0,this.once("finish",this.push.bind(this,null)),this.on("pipe",this._onpipe),!1!==t.timeout&&0!==t.timeout){const e=t.timeout||2e4;this.setTimeout(e,()=>this.destroy(new Error("ETIMEDOUT"))),this.setKeepAlive(Math.ceil(e/2))}}registerExtension(e,t){return this.extensions.add(e,t)}[o](e,t){let n="";if("number"==typeof t.indentationLvl)for(;n.length<t.indentationLvl;)n+=" ";return"HypercoreProtocolStream(\n"+n+"  publicKey: "+t.stylize(this.publicKey&&u(this.publicKey),"string")+"\n"+n+"  remotePublicKey: "+t.stylize(this.remotePublicKey&&u(this.remotePublicKey),"string")+"\n"+n+"  remoteAddress: "+t.stylize(this.remoteAddress,"string")+"\n"+n+"  remoteType: "+t.stylize(this.remoteType,"string")+"\n"+n+"  live: "+t.stylize(this.live,"boolean")+"\n"+n+"  initiator: "+t.stylize(this.initiator,"boolean")+"\n"+n+"  channelCount: "+t.stylize(this.channelCount,"number")+"\n"+n+"  destroyed: "+t.stylize(this.destroyed,"boolean")+"\n"+n+"  prefinalized: "+t.stylize(!this.prefinalize.waiting,"boolean")+"\n"+n+"  bytesSent: "+t.stylize(this.bytesSent,"number")+"\n"+n+"  bytesReceived: "+t.stylize(this.bytesReceived,"number")+"\n"+n+")"}static isProtocolStream(e){return!(!e||"boolean"!=typeof e.initiator||"function"!=typeof e.pipe||!e.state)}static keyPair(e){return r.keyPair(e)}get remoteAddress(){const t=this._readableState.pipeTo;return t?e.isProtocolStream(t)?null:t.remoteAddress:null}get remoteType(){const e=this._readableState.pipeTo;return e?e._utp?"utp":e.remoteAddress?"tcp":"unknown":null}get publicKey(){return this.state.publicKey}get remotePublicKey(){return this.state.remotePublicKey}_onpipe(e){"function"==typeof e.setContentSize&&(this._utp=e)}_write(e,t){null!==this.timeout&&this.timeout.refresh(),this.bytesReceived+=e.length,this.state.recv(e),t(null)}_destroy(e){this.channelizer.destroy(),this.state.destroy(),e(null)}_predestroy(){null!==this.timeout&&(this.timeout.destroy(),this.timeout=null),null!==this.keepAlive&&(this.keepAlive.destroy(),this.keepAlive=null),this.prefinalize.destroy()}_prefinalize(){this.emit("prefinalize"),this.prefinalize.ready(()=>{this.destroyed||this.channelCount||this.live||this.finalize()})}_updateExtensions(e){this.remoteExtensions.update(e),this.handlers.onextensions&&this.handlers.onextensions(e),this.emit("extensions",e)}remoteOpened(e){const t=this.channelizer.getChannel(i.discoveryKey(e));return!!(t&&t.remoteId>-1)}remoteVerified(e){const t=this.channelizer.getChannel(i.discoveryKey(e));return!!t&&!!t.remoteCapability&&t.remoteCapability.equals(this.state.remoteCapability(e))}opened(e){const t=this.channelizer.getChannel(i.discoveryKey(e));return!!(t&&t.localId>-1)}ping(){return this.state.ping()}setKeepAlive(e){this.keepAlive&&this.keepAlive.destroy(),this.keepAlive=e?s(e,(function t(){this.ping(),this.keepAlive=s(e,t,this)}),this):null}setTimeout(e,t){this.timeout&&this.timeout.destroy(),e?(this.timeout=s(e,this.emit.bind(this,"timeout")),t&&this.once("timeout",t)):this.timeout=null}get channelCount(){return this.channelizer.created.size}get channels(){return this.channelizer.created.values()}open(e,t){const n=i.discoveryKey(e),r=this.channelizer.createChannel(n);return null===r.key&&(r.key=e,this.channelizer.attachLocal(r),this.state.open(r.localId,{key:e,discoveryKey:n})),t&&(r.handlers=t),r.remoteId>-1&&this.emit("duplex-channel",r),r}close(e){const t=this.channelizer.getChannel(e);t&&t.localId>-1?t.close():this.state.close(this.channelizer.allocLocal(),{discoveryKey:e})}finalize(){this.push(null)}}},function(e,t,n){var r=n(1),i=n(4),s=n(37),o=n(38),a=o.HASHLEN+o.HASHLEN+s.STATELEN,u=o.HASHLEN;e.exports={STATELEN:a,initializeSymmetric:function(e,t){i(e.byteLength===a),i(null!=t.byteLength),r.sodium_memzero(e),t.byteLength<=u?e.set(t,h):o.hash(e.subarray(h,c),[t]);e.subarray(0,l).set(e.subarray(h,c)),s.initializeKey(e.subarray(f,d),null)},mixKey:function(e,t){i(e.byteLength===a),i(null!=t.byteLength),o.hkdf(e.subarray(0,l),p,null,e.subarray(0,l),t),s.initializeKey(e.subarray(f,d),p.subarray(0,32)),r.sodium_memzero(p)},mixHash:g,mixKeyAndHash:function(e,t){i(e.byteLength===a),i(null!=t.byteLength),o.hkdf(e.subarray(0,l),y,p,e.subarray(0,l),t),g(e,y),r.sodium_memzero(y),s.initializeKey(e.subarray(f,d),p.subarray(0,32)),r.sodium_memzero(p)},getHandshakeHash:function(e,t){i(e.byteLength===a),i(t.byteLength===u),t.set(e.subarray(h,c))},encryptAndHash:v,decryptAndHash:_,split:function(e,t,n){i(e.byteLength===a),i(t.byteLength===s.STATELEN),i(n.byteLength===s.STATELEN),o.hkdf(b,m,null,e.subarray(0,l),w),s.initializeKey(t,b.subarray(0,32)),s.initializeKey(n,m.subarray(0,32)),r.sodium_memzero(b),r.sodium_memzero(m)},_hasKey:function(e){return s.hasKey(e.subarray(f,d))}};var l=o.HASHLEN,h=l,c=h+o.HASHLEN,f=c,d=f+s.STATELEN;var p=r.sodium_malloc(u);function g(e,t){i(e.byteLength===a);var n=e.subarray(h,c);o.hash(n,[n,t])}var y=r.sodium_malloc(u);function v(e,t,n){i(e.byteLength===a),i(null!=t.byteLength),i(null!=n.byteLength);var r=e.subarray(f,d),o=e.subarray(h,c);s.encryptWithAd(r,t,o,n),v.bytesRead=s.encryptWithAd.bytesRead,v.bytesWritten=s.encryptWithAd.bytesWritten,g(e,t.subarray(0,v.bytesWritten))}function _(e,t,n){i(e.byteLength===a),i(null!=t.byteLength),i(null!=n.byteLength);var r=e.subarray(f,d),o=e.subarray(h,c);s.decryptWithAd(r,t,o,n),_.bytesRead=s.decryptWithAd.bytesRead,_.bytesWritten=s.decryptWithAd.bytesWritten,g(e,n.subarray(0,_.bytesRead))}v.bytesRead=0,v.bytesWritten=0,_.bytesRead=0,_.bytesWritten=0;var b=r.sodium_malloc(u),m=r.sodium_malloc(u),w=Buffer.alloc(0)},function(e,t,n){var r=n(1),i=n(4),s=n(83),o=s.KEYLEN+s.NONCELEN,a=s.NONCELEN,u=s.MACLEN;e.exports={STATELEN:o,NONCELEN:a,MACLEN:u,initializeKey:function(e,t){if(i(e.byteLength===o),i(null==t||t.byteLength===s.KEYLEN),null==t)return void r.sodium_memzero(e.subarray(0,l));e.set(t),r.sodium_memzero(e.subarray(h,c))},hasKey:f,setNonce:function(e,t){i(e.byteLength===o),i(t.byteLength===a),e.set(t,h)},encryptWithAd:p,decryptWithAd:g,rekey:y};var l=s.KEYLEN,h=l,c=h+s.NONCELEN;function f(e){i(e.byteLength===o);var t=e.subarray(0,l);return!1===r.sodium_is_zero(t)}var d=Buffer.alloc(8,255);function p(e,t,n,a){i(e.byteLength===o),i(null!=t.byteLength),i(null!=a.byteLength);var u=e.subarray(h,c);if(r.sodium_memcmp(u,d))throw new Error("Nonce overflow");if(!1===f(e))return t.set(a),p.bytesRead=a.byteLength,void(p.bytesWritten=p.bytesRead);var g=e.subarray(0,l);s.encrypt(t,g,u,n,a),p.bytesRead=s.encrypt.bytesRead,p.bytesWritten=s.encrypt.bytesWritten,r.sodium_increment(u)}function g(e,t,n,a){i(e.byteLength===o),i(null!=t.byteLength),i(null!=a.byteLength);var u=e.subarray(h,c);if(r.sodium_memcmp(u,d))throw new Error("Nonce overflow");if(!1===f(e))return t.set(a),g.bytesRead=a.byteLength,void(g.bytesWritten=g.bytesRead);var p=e.subarray(0,l);s.decrypt(t,p,u,n,a),g.bytesRead=s.decrypt.bytesRead,g.bytesWritten=s.decrypt.bytesWritten,r.sodium_increment(u)}function y(e){i(e.byteLength===o);var t=e.subarray(0,l);s.rekey(t,t),y.bytesRead=s.rekey.bytesRead,y.bytesWritten=s.rekey.bytesWritten}p.bytesRead=0,p.bytesWritten=0,g.bytesRead=0,g.bytesWritten=0,y.bytesRead=0,y.bytesWritten=0},function(e,t,n){var r=n(1),i=n(4),s=n(84),o=n(15);function a(e,t,n){return s(e,n,t)}i(128===s.KEYBYTES,"mismatching hmac BLOCKLEN"),i(64===s.BYTES,"mismatching hmac HASHLEN"),e.exports={HASHLEN:64,BLOCKLEN:128,hash:function(e,t){i(64===e.byteLength),i(Array.isArray(t)),r.crypto_generichash_batch(e,t)},hkdf:function(e,t,n,s,f){i(64===e.byteLength),i(64===t.byteLength),i(null==n||64===n.byteLength),i(64===s.byteLength),i([0,32,o.DHLEN,o.PKLEN].includes(f.byteLength)),r.sodium_memzero(u),a(u,s,[f]),a(e,u,[l]),a(t,u,[e,h]),null!=n&&a(n,u,[t,c]);r.sodium_memzero(u)}};var u=r.sodium_malloc(64),l=Buffer.from([1]),h=Buffer.from([2]),c=Buffer.from([3])},function(e,t,n){const r=setTimeout((function(){}),1e3);clearTimeout(r),e.exports=r.refresh?n(96):process.versions.electron?n(97):n(98)},function(e,t,n){const r=n(25);class i{constructor(e){this.local=e,this.names=null,this.map=null,this.changes=0}update(e){this.names=e,this.changes=0}onmessage(e,t,n=null){this.changes!==this.local.changes&&(this.map=this.names?function(e,t){let n=0,r=0;const i=new Array(t.length);for(;n<e.length&&r<t.length;){const s=e[n].name,o=t[r];s<o?n++:s>o?r++:i[r++]=e[n]}return i}(this.local.messages,this.names):null,this.changes=this.local.changes);const r=this.map&&this.map[e];r&&r.onmessage(t,n)}}class s{constructor(e=null,t){this.messages=[],this.handlers=e,this.Extension=t,this.changes=1,this.exclusive=!0}get length(){return this.messages.length}[Symbol.iterator](){return this.messages[Symbol.iterator]()}get(e){for(const t of this.messages)if(t.name===e)return t;return null}add(e,t){let n;"function"!=typeof t?n=new this.Extension(this,e,t):(n=new this.Extension(this,e,{}),n.handlers=t(n)||{},n.encoding=r(n.handlers.encoding||"binary")),this.changes++,this.messages.push(n),this.messages.sort(o);for(let e=0;e<this.messages.length;e++)this.messages[e].id=e;if(this.exclusive&&(n.id>0&&this.messages[n.id-1].name===n.name||n.id<this.messages.length-1&&this.messages[n.id+1].name===n.name))throw this._remove(n),new Error("Cannot add multiple messages with the same name");return this.handlers&&this.handlers.onextensionupdate&&this.handlers.onextensionupdate(),n}remote(){return new i(this)}_remove(e){this.changes++,this.messages.splice(e.id,1),e.id=-1,this.handlers&&this.handlers.onextensionupdate&&this.handlers.onextensionupdate()}names(){const e=new Array(this.messages.length);for(let t=0;t<e.length;t++)e[t]=this.messages[t].name;return e}}function o(e,t){return e.name<t.name?-1:e.name>t.name?1:0}e.exports=class{constructor(e,t,n={}){this.id=0,this.name=t,this.encoding=r(n.encoding||"binary"),this.handlers=n,this.local=e}encode(e){return this.encoding.encode(e)}remoteSupports(){return!(!this.local||!this.local.map||this.local.map[this.id]!==this)}onmessage(e,t){if(!this.handlers.onmessage)return;let n;try{n=this.encoding.decode(e)}catch(e){return void(this.handlers.onerror&&this.handlers.onerror(e,t))}this.handlers.onmessage(n,t)}get destroyed(){return null===this.local}destroy(){null!==this.local&&(this.local._remove(this),this.local=null)}static createLocal(e=null){return new s(e,this)}}},function(e,t,n){e.exports=function(e){function t(e){let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return r.colors[Math.abs(t)%r.colors.length]}function r(e){let n;function o(...e){if(!o.enabled)return;const t=o,i=Number(new Date),s=i-(n||i);t.diff=s,t.prev=n,t.curr=i,n=i,e[0]=r.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let a=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(n,i)=>{if("%%"===n)return n;a++;const s=r.formatters[i];if("function"==typeof s){const r=e[a];n=s.call(t,r),e.splice(a,1),a--}return n}),r.formatArgs.call(t,e);(t.log||r.log).apply(t,e)}return o.namespace=e,o.enabled=r.enabled(e),o.useColors=r.useColors(),o.color=t(e),o.destroy=i,o.extend=s,"function"==typeof r.init&&r.init(o),r.instances.push(o),o}function i(){const e=r.instances.indexOf(this);return-1!==e&&(r.instances.splice(e,1),!0)}function s(e,t){const n=r(this.namespace+(void 0===t?":":t)+e);return n.log=this.log,n}function o(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return r.debug=r,r.default=r,r.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},r.disable=function(){const e=[...r.names.map(o),...r.skips.map(o).map(e=>"-"+e)].join(",");return r.enable(""),e},r.enable=function(e){let t;r.save(e),r.names=[],r.skips=[];const n=("string"==typeof e?e:"").split(/[\s,]+/),i=n.length;for(t=0;t<i;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?r.skips.push(new RegExp("^"+e.substr(1)+"$")):r.names.push(new RegExp("^"+e+"$")));for(t=0;t<r.instances.length;t++){const e=r.instances[t];e.enabled=r.enabled(e.namespace)}},r.enabled=function(e){if("*"===e[e.length-1])return!0;let t,n;for(t=0,n=r.skips.length;t<n;t++)if(r.skips[t].test(e))return!1;for(t=0,n=r.names.length;t<n;t++)if(r.names[t].test(e))return!0;return!1},r.humanize=n(105),Object.keys(e).forEach(t=>{r[t]=e[t]}),r.instances=[],r.names=[],r.skips=[],r.formatters={},r.selectColor=t,r.enable(r.load()),r}},function(e,t,n){(function(e){var r;
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(){var i="Expected a function",s="__lodash_placeholder__",o=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],a="[object Arguments]",u="[object Array]",l="[object Boolean]",h="[object Date]",c="[object Error]",f="[object Function]",d="[object GeneratorFunction]",p="[object Map]",g="[object Number]",y="[object Object]",v="[object RegExp]",_="[object Set]",b="[object String]",m="[object Symbol]",w="[object WeakMap]",x="[object ArrayBuffer]",k="[object DataView]",S="[object Float32Array]",E="[object Float64Array]",L="[object Int8Array]",B="[object Int16Array]",C="[object Int32Array]",A="[object Uint8Array]",O="[object Uint16Array]",R="[object Uint32Array]",T=/\b__p \+= '';/g,z=/\b(__p \+=) '' \+/g,N=/(__e\(.*?\)|\b__t\)) \+\n'';/g,K=/&(?:amp|lt|gt|quot|#39);/g,P=/[&<>"']/g,j=RegExp(K.source),M=RegExp(P.source),q=/<%-([\s\S]+?)%>/g,U=/<%([\s\S]+?)%>/g,W=/<%=([\s\S]+?)%>/g,I=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,D=/^\w*$/,F=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,H=/[\\^$.*+?()[\]{}|]/g,$=RegExp(H.source),Y=/^\s+|\s+$/g,V=/^\s+/,G=/\s+$/,Z=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,X=/\{\n\/\* \[wrapped with (.+)\] \*/,J=/,? & /,Q=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ee=/\\(\\)?/g,te=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ne=/\w*$/,re=/^[-+]0x[0-9a-f]+$/i,ie=/^0b[01]+$/i,se=/^\[object .+?Constructor\]$/,oe=/^0o[0-7]+$/i,ae=/^(?:0|[1-9]\d*)$/,ue=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,le=/($^)/,he=/['\n\r\u2028\u2029\\]/g,ce="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",fe="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",de="[\\ud800-\\udfff]",pe="["+fe+"]",ge="["+ce+"]",ye="\\d+",ve="[\\u2700-\\u27bf]",_e="[a-z\\xdf-\\xf6\\xf8-\\xff]",be="[^\\ud800-\\udfff"+fe+ye+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",me="\\ud83c[\\udffb-\\udfff]",we="[^\\ud800-\\udfff]",xe="(?:\\ud83c[\\udde6-\\uddff]){2}",ke="[\\ud800-\\udbff][\\udc00-\\udfff]",Se="[A-Z\\xc0-\\xd6\\xd8-\\xde]",Ee="(?:"+_e+"|"+be+")",Le="(?:"+Se+"|"+be+")",Be="(?:"+ge+"|"+me+")"+"?",Ce="[\\ufe0e\\ufe0f]?"+Be+("(?:\\u200d(?:"+[we,xe,ke].join("|")+")[\\ufe0e\\ufe0f]?"+Be+")*"),Ae="(?:"+[ve,xe,ke].join("|")+")"+Ce,Oe="(?:"+[we+ge+"?",ge,xe,ke,de].join("|")+")",Re=RegExp("['’]","g"),Te=RegExp(ge,"g"),ze=RegExp(me+"(?="+me+")|"+Oe+Ce,"g"),Ne=RegExp([Se+"?"+_e+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[pe,Se,"$"].join("|")+")",Le+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[pe,Se+Ee,"$"].join("|")+")",Se+"?"+Ee+"+(?:['’](?:d|ll|m|re|s|t|ve))?",Se+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ye,Ae].join("|"),"g"),Ke=RegExp("[\\u200d\\ud800-\\udfff"+ce+"\\ufe0e\\ufe0f]"),Pe=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,je=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Me=-1,qe={};qe[S]=qe[E]=qe[L]=qe[B]=qe[C]=qe[A]=qe["[object Uint8ClampedArray]"]=qe[O]=qe[R]=!0,qe[a]=qe[u]=qe[x]=qe[l]=qe[k]=qe[h]=qe[c]=qe[f]=qe[p]=qe[g]=qe[y]=qe[v]=qe[_]=qe[b]=qe[w]=!1;var Ue={};Ue[a]=Ue[u]=Ue[x]=Ue[k]=Ue[l]=Ue[h]=Ue[S]=Ue[E]=Ue[L]=Ue[B]=Ue[C]=Ue[p]=Ue[g]=Ue[y]=Ue[v]=Ue[_]=Ue[b]=Ue[m]=Ue[A]=Ue["[object Uint8ClampedArray]"]=Ue[O]=Ue[R]=!0,Ue[c]=Ue[f]=Ue[w]=!1;var We={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ie=parseFloat,De=parseInt,Fe="object"==typeof global&&global&&global.Object===Object&&global,He="object"==typeof self&&self&&self.Object===Object&&self,$e=Fe||He||Function("return this")(),Ye=t&&!t.nodeType&&t,Ve=Ye&&"object"==typeof e&&e&&!e.nodeType&&e,Ge=Ve&&Ve.exports===Ye,Ze=Ge&&Fe.process,Xe=function(){try{var e=Ve&&Ve.require&&Ve.require("util").types;return e||Ze&&Ze.binding&&Ze.binding("util")}catch(e){}}(),Je=Xe&&Xe.isArrayBuffer,Qe=Xe&&Xe.isDate,et=Xe&&Xe.isMap,tt=Xe&&Xe.isRegExp,nt=Xe&&Xe.isSet,rt=Xe&&Xe.isTypedArray;function it(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function st(e,t,n,r){for(var i=-1,s=null==e?0:e.length;++i<s;){var o=e[i];t(r,o,n(o),e)}return r}function ot(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function at(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function ut(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function lt(e,t){for(var n=-1,r=null==e?0:e.length,i=0,s=[];++n<r;){var o=e[n];t(o,n,e)&&(s[i++]=o)}return s}function ht(e,t){return!!(null==e?0:e.length)&&mt(e,t,0)>-1}function ct(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function ft(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function dt(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function pt(e,t,n,r){var i=-1,s=null==e?0:e.length;for(r&&s&&(n=e[++i]);++i<s;)n=t(n,e[i],i,e);return n}function gt(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function yt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var vt=St("length");function _t(e,t,n){var r;return n(e,(function(e,n,i){if(t(e,n,i))return r=n,!1})),r}function bt(e,t,n,r){for(var i=e.length,s=n+(r?1:-1);r?s--:++s<i;)if(t(e[s],s,e))return s;return-1}function mt(e,t,n){return t==t?function(e,t,n){var r=n-1,i=e.length;for(;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):bt(e,xt,n)}function wt(e,t,n,r){for(var i=n-1,s=e.length;++i<s;)if(r(e[i],t))return i;return-1}function xt(e){return e!=e}function kt(e,t){var n=null==e?0:e.length;return n?Bt(e,t)/n:NaN}function St(e){return function(t){return null==t?void 0:t[e]}}function Et(e){return function(t){return null==e?void 0:e[t]}}function Lt(e,t,n,r,i){return i(e,(function(e,i,s){n=r?(r=!1,e):t(n,e,i,s)})),n}function Bt(e,t){for(var n,r=-1,i=e.length;++r<i;){var s=t(e[r]);void 0!==s&&(n=void 0===n?s:n+s)}return n}function Ct(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function At(e){return function(t){return e(t)}}function Ot(e,t){return ft(t,(function(t){return e[t]}))}function Rt(e,t){return e.has(t)}function Tt(e,t){for(var n=-1,r=e.length;++n<r&&mt(t,e[n],0)>-1;);return n}function zt(e,t){for(var n=e.length;n--&&mt(t,e[n],0)>-1;);return n}function Nt(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}var Kt=Et({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),Pt=Et({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function jt(e){return"\\"+We[e]}function Mt(e){return Ke.test(e)}function qt(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function Ut(e,t){return function(n){return e(t(n))}}function Wt(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n];a!==t&&a!==s||(e[n]=s,o[i++]=n)}return o}function It(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function Dt(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}function Ft(e){return Mt(e)?function(e){var t=ze.lastIndex=0;for(;ze.test(e);)++t;return t}(e):vt(e)}function Ht(e){return Mt(e)?function(e){return e.match(ze)||[]}(e):function(e){return e.split("")}(e)}var $t=Et({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var Yt=function e(t){var n,r=(t=null==t?$e:Yt.defaults($e.Object(),t,Yt.pick($e,je))).Array,ce=t.Date,fe=t.Error,de=t.Function,pe=t.Math,ge=t.Object,ye=t.RegExp,ve=t.String,_e=t.TypeError,be=r.prototype,me=de.prototype,we=ge.prototype,xe=t["__core-js_shared__"],ke=me.toString,Se=we.hasOwnProperty,Ee=0,Le=(n=/[^.]+$/.exec(xe&&xe.keys&&xe.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",Be=we.toString,Ce=ke.call(ge),Ae=$e._,Oe=ye("^"+ke.call(Se).replace(H,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ze=Ge?t.Buffer:void 0,Ke=t.Symbol,We=t.Uint8Array,Fe=ze?ze.allocUnsafe:void 0,He=Ut(ge.getPrototypeOf,ge),Ye=ge.create,Ve=we.propertyIsEnumerable,Ze=be.splice,Xe=Ke?Ke.isConcatSpreadable:void 0,vt=Ke?Ke.iterator:void 0,Et=Ke?Ke.toStringTag:void 0,Vt=function(){try{var e=Qi(ge,"defineProperty");return e({},"",{}),e}catch(e){}}(),Gt=t.clearTimeout!==$e.clearTimeout&&t.clearTimeout,Zt=ce&&ce.now!==$e.Date.now&&ce.now,Xt=t.setTimeout!==$e.setTimeout&&t.setTimeout,Jt=pe.ceil,Qt=pe.floor,en=ge.getOwnPropertySymbols,tn=ze?ze.isBuffer:void 0,nn=t.isFinite,rn=be.join,sn=Ut(ge.keys,ge),on=pe.max,an=pe.min,un=ce.now,ln=t.parseInt,hn=pe.random,cn=be.reverse,fn=Qi(t,"DataView"),dn=Qi(t,"Map"),pn=Qi(t,"Promise"),gn=Qi(t,"Set"),yn=Qi(t,"WeakMap"),vn=Qi(ge,"create"),_n=yn&&new yn,bn={},mn=Ls(fn),wn=Ls(dn),xn=Ls(pn),kn=Ls(gn),Sn=Ls(yn),En=Ke?Ke.prototype:void 0,Ln=En?En.valueOf:void 0,Bn=En?En.toString:void 0;function Cn(e){if(Fo(e)&&!zo(e)&&!(e instanceof Tn)){if(e instanceof Rn)return e;if(Se.call(e,"__wrapped__"))return Bs(e)}return new Rn(e)}var An=function(){function e(){}return function(t){if(!Do(t))return{};if(Ye)return Ye(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function On(){}function Rn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}function Tn(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function zn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Nn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Kn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Pn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Kn;++t<n;)this.add(e[t])}function jn(e){var t=this.__data__=new Nn(e);this.size=t.size}function Mn(e,t){var n=zo(e),r=!n&&To(e),i=!n&&!r&&jo(e),s=!n&&!r&&!i&&Jo(e),o=n||r||i||s,a=o?Ct(e.length,ve):[],u=a.length;for(var l in e)!t&&!Se.call(e,l)||o&&("length"==l||i&&("offset"==l||"parent"==l)||s&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||os(l,u))||a.push(l);return a}function qn(e){var t=e.length;return t?e[Pr(0,t-1)]:void 0}function Un(e,t){return ks(vi(e),Gn(t,0,e.length))}function Wn(e){return ks(vi(e))}function In(e,t,n){(void 0!==n&&!Ao(e[t],n)||void 0===n&&!(t in e))&&Yn(e,t,n)}function Dn(e,t,n){var r=e[t];Se.call(e,t)&&Ao(r,n)&&(void 0!==n||t in e)||Yn(e,t,n)}function Fn(e,t){for(var n=e.length;n--;)if(Ao(e[n][0],t))return n;return-1}function Hn(e,t,n,r){return er(e,(function(e,i,s){t(r,e,n(e),s)})),r}function $n(e,t){return e&&_i(t,ma(t),e)}function Yn(e,t,n){"__proto__"==t&&Vt?Vt(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function Vn(e,t){for(var n=-1,i=t.length,s=r(i),o=null==e;++n<i;)s[n]=o?void 0:ga(e,t[n]);return s}function Gn(e,t,n){return e==e&&(void 0!==n&&(e=e<=n?e:n),void 0!==t&&(e=e>=t?e:t)),e}function Zn(e,t,n,r,i,s){var o,u=1&t,c=2&t,w=4&t;if(n&&(o=i?n(e,r,i,s):n(e)),void 0!==o)return o;if(!Do(e))return e;var T=zo(e);if(T){if(o=function(e){var t=e.length,n=new e.constructor(t);t&&"string"==typeof e[0]&&Se.call(e,"index")&&(n.index=e.index,n.input=e.input);return n}(e),!u)return vi(e,o)}else{var z=ns(e),N=z==f||z==d;if(jo(e))return ci(e,u);if(z==y||z==a||N&&!i){if(o=c||N?{}:is(e),!u)return c?function(e,t){return _i(e,ts(e),t)}(e,function(e,t){return e&&_i(t,wa(t),e)}(o,e)):function(e,t){return _i(e,es(e),t)}(e,$n(o,e))}else{if(!Ue[z])return i?e:{};o=function(e,t,n){var r=e.constructor;switch(t){case x:return fi(e);case l:case h:return new r(+e);case k:return function(e,t){var n=t?fi(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case S:case E:case L:case B:case C:case A:case"[object Uint8ClampedArray]":case O:case R:return di(e,n);case p:return new r;case g:case b:return new r(e);case v:return function(e){var t=new e.constructor(e.source,ne.exec(e));return t.lastIndex=e.lastIndex,t}(e);case _:return new r;case m:return i=e,Ln?ge(Ln.call(i)):{}}var i}(e,z,u)}}s||(s=new jn);var K=s.get(e);if(K)return K;s.set(e,o),Go(e)?e.forEach((function(r){o.add(Zn(r,t,n,r,e,s))})):Ho(e)&&e.forEach((function(r,i){o.set(i,Zn(r,t,n,i,e,s))}));var P=T?void 0:(w?c?$i:Hi:c?wa:ma)(e);return ot(P||e,(function(r,i){P&&(r=e[i=r]),Dn(o,i,Zn(r,t,n,i,e,s))})),o}function Xn(e,t,n){var r=n.length;if(null==e)return!r;for(e=ge(e);r--;){var i=n[r],s=t[i],o=e[i];if(void 0===o&&!(i in e)||!s(o))return!1}return!0}function Jn(e,t,n){if("function"!=typeof e)throw new _e(i);return bs((function(){e.apply(void 0,n)}),t)}function Qn(e,t,n,r){var i=-1,s=ht,o=!0,a=e.length,u=[],l=t.length;if(!a)return u;n&&(t=ft(t,At(n))),r?(s=ct,o=!1):t.length>=200&&(s=Rt,o=!1,t=new Pn(t));e:for(;++i<a;){var h=e[i],c=null==n?h:n(h);if(h=r||0!==h?h:0,o&&c==c){for(var f=l;f--;)if(t[f]===c)continue e;u.push(h)}else s(t,c,r)||u.push(h)}return u}Cn.templateSettings={escape:q,evaluate:U,interpolate:W,variable:"",imports:{_:Cn}},Cn.prototype=On.prototype,Cn.prototype.constructor=Cn,Rn.prototype=An(On.prototype),Rn.prototype.constructor=Rn,Tn.prototype=An(On.prototype),Tn.prototype.constructor=Tn,zn.prototype.clear=function(){this.__data__=vn?vn(null):{},this.size=0},zn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},zn.prototype.get=function(e){var t=this.__data__;if(vn){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return Se.call(t,e)?t[e]:void 0},zn.prototype.has=function(e){var t=this.__data__;return vn?void 0!==t[e]:Se.call(t,e)},zn.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=vn&&void 0===t?"__lodash_hash_undefined__":t,this},Nn.prototype.clear=function(){this.__data__=[],this.size=0},Nn.prototype.delete=function(e){var t=this.__data__,n=Fn(t,e);return!(n<0)&&(n==t.length-1?t.pop():Ze.call(t,n,1),--this.size,!0)},Nn.prototype.get=function(e){var t=this.__data__,n=Fn(t,e);return n<0?void 0:t[n][1]},Nn.prototype.has=function(e){return Fn(this.__data__,e)>-1},Nn.prototype.set=function(e,t){var n=this.__data__,r=Fn(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},Kn.prototype.clear=function(){this.size=0,this.__data__={hash:new zn,map:new(dn||Nn),string:new zn}},Kn.prototype.delete=function(e){var t=Xi(this,e).delete(e);return this.size-=t?1:0,t},Kn.prototype.get=function(e){return Xi(this,e).get(e)},Kn.prototype.has=function(e){return Xi(this,e).has(e)},Kn.prototype.set=function(e,t){var n=Xi(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Pn.prototype.add=Pn.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Pn.prototype.has=function(e){return this.__data__.has(e)},jn.prototype.clear=function(){this.__data__=new Nn,this.size=0},jn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},jn.prototype.get=function(e){return this.__data__.get(e)},jn.prototype.has=function(e){return this.__data__.has(e)},jn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Nn){var r=n.__data__;if(!dn||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Kn(r)}return n.set(e,t),this.size=n.size,this};var er=wi(ur),tr=wi(lr,!0);function nr(e,t){var n=!0;return er(e,(function(e,r,i){return n=!!t(e,r,i)})),n}function rr(e,t,n){for(var r=-1,i=e.length;++r<i;){var s=e[r],o=t(s);if(null!=o&&(void 0===a?o==o&&!Xo(o):n(o,a)))var a=o,u=s}return u}function ir(e,t){var n=[];return er(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n}function sr(e,t,n,r,i){var s=-1,o=e.length;for(n||(n=ss),i||(i=[]);++s<o;){var a=e[s];t>0&&n(a)?t>1?sr(a,t-1,n,r,i):dt(i,a):r||(i[i.length]=a)}return i}var or=xi(),ar=xi(!0);function ur(e,t){return e&&or(e,t,ma)}function lr(e,t){return e&&ar(e,t,ma)}function hr(e,t){return lt(t,(function(t){return Uo(e[t])}))}function cr(e,t){for(var n=0,r=(t=ai(t,e)).length;null!=e&&n<r;)e=e[Es(t[n++])];return n&&n==r?e:void 0}function fr(e,t,n){var r=t(e);return zo(e)?r:dt(r,n(e))}function dr(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Et&&Et in ge(e)?function(e){var t=Se.call(e,Et),n=e[Et];try{e[Et]=void 0;var r=!0}catch(e){}var i=Be.call(e);r&&(t?e[Et]=n:delete e[Et]);return i}(e):function(e){return Be.call(e)}(e)}function pr(e,t){return e>t}function gr(e,t){return null!=e&&Se.call(e,t)}function yr(e,t){return null!=e&&t in ge(e)}function vr(e,t,n){for(var i=n?ct:ht,s=e[0].length,o=e.length,a=o,u=r(o),l=1/0,h=[];a--;){var c=e[a];a&&t&&(c=ft(c,At(t))),l=an(c.length,l),u[a]=!n&&(t||s>=120&&c.length>=120)?new Pn(a&&c):void 0}c=e[0];var f=-1,d=u[0];e:for(;++f<s&&h.length<l;){var p=c[f],g=t?t(p):p;if(p=n||0!==p?p:0,!(d?Rt(d,g):i(h,g,n))){for(a=o;--a;){var y=u[a];if(!(y?Rt(y,g):i(e[a],g,n)))continue e}d&&d.push(g),h.push(p)}}return h}function _r(e,t,n){var r=null==(e=gs(e,t=ai(t,e)))?e:e[Es(Ms(t))];return null==r?void 0:it(r,e,n)}function br(e){return Fo(e)&&dr(e)==a}function mr(e,t,n,r,i){return e===t||(null==e||null==t||!Fo(e)&&!Fo(t)?e!=e&&t!=t:function(e,t,n,r,i,s){var o=zo(e),f=zo(t),d=o?u:ns(e),w=f?u:ns(t),S=(d=d==a?y:d)==y,E=(w=w==a?y:w)==y,L=d==w;if(L&&jo(e)){if(!jo(t))return!1;o=!0,S=!1}if(L&&!S)return s||(s=new jn),o||Jo(e)?Di(e,t,n,r,i,s):function(e,t,n,r,i,s,o){switch(n){case k:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case x:return!(e.byteLength!=t.byteLength||!s(new We(e),new We(t)));case l:case h:case g:return Ao(+e,+t);case c:return e.name==t.name&&e.message==t.message;case v:case b:return e==t+"";case p:var a=qt;case _:var u=1&r;if(a||(a=It),e.size!=t.size&&!u)return!1;var f=o.get(e);if(f)return f==t;r|=2,o.set(e,t);var d=Di(a(e),a(t),r,i,s,o);return o.delete(e),d;case m:if(Ln)return Ln.call(e)==Ln.call(t)}return!1}(e,t,d,n,r,i,s);if(!(1&n)){var B=S&&Se.call(e,"__wrapped__"),C=E&&Se.call(t,"__wrapped__");if(B||C){var A=B?e.value():e,O=C?t.value():t;return s||(s=new jn),i(A,O,n,r,s)}}if(!L)return!1;return s||(s=new jn),function(e,t,n,r,i,s){var o=1&n,a=Hi(e),u=a.length,l=Hi(t).length;if(u!=l&&!o)return!1;var h=u;for(;h--;){var c=a[h];if(!(o?c in t:Se.call(t,c)))return!1}var f=s.get(e),d=s.get(t);if(f&&d)return f==t&&d==e;var p=!0;s.set(e,t),s.set(t,e);var g=o;for(;++h<u;){c=a[h];var y=e[c],v=t[c];if(r)var _=o?r(v,y,c,t,e,s):r(y,v,c,e,t,s);if(!(void 0===_?y===v||i(y,v,n,r,s):_)){p=!1;break}g||(g="constructor"==c)}if(p&&!g){var b=e.constructor,m=t.constructor;b==m||!("constructor"in e)||!("constructor"in t)||"function"==typeof b&&b instanceof b&&"function"==typeof m&&m instanceof m||(p=!1)}return s.delete(e),s.delete(t),p}(e,t,n,r,i,s)}(e,t,n,r,mr,i))}function wr(e,t,n,r){var i=n.length,s=i,o=!r;if(null==e)return!s;for(e=ge(e);i--;){var a=n[i];if(o&&a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++i<s;){var u=(a=n[i])[0],l=e[u],h=a[1];if(o&&a[2]){if(void 0===l&&!(u in e))return!1}else{var c=new jn;if(r)var f=r(l,h,u,e,t,c);if(!(void 0===f?mr(h,l,3,r,c):f))return!1}}return!0}function xr(e){return!(!Do(e)||(t=e,Le&&Le in t))&&(Uo(e)?Oe:se).test(Ls(e));var t}function kr(e){return"function"==typeof e?e:null==e?$a:"object"==typeof e?zo(e)?Ar(e[0],e[1]):Cr(e):tu(e)}function Sr(e){if(!cs(e))return sn(e);var t=[];for(var n in ge(e))Se.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Er(e){if(!Do(e))return function(e){var t=[];if(null!=e)for(var n in ge(e))t.push(n);return t}(e);var t=cs(e),n=[];for(var r in e)("constructor"!=r||!t&&Se.call(e,r))&&n.push(r);return n}function Lr(e,t){return e<t}function Br(e,t){var n=-1,i=Ko(e)?r(e.length):[];return er(e,(function(e,r,s){i[++n]=t(e,r,s)})),i}function Cr(e){var t=Ji(e);return 1==t.length&&t[0][2]?ds(t[0][0],t[0][1]):function(n){return n===e||wr(n,e,t)}}function Ar(e,t){return us(e)&&fs(t)?ds(Es(e),t):function(n){var r=ga(n,e);return void 0===r&&r===t?ya(n,e):mr(t,r,3)}}function Or(e,t,n,r,i){e!==t&&or(t,(function(s,o){if(i||(i=new jn),Do(s))!function(e,t,n,r,i,s,o){var a=vs(e,n),u=vs(t,n),l=o.get(u);if(l)return void In(e,n,l);var h=s?s(a,u,n+"",e,t,o):void 0,c=void 0===h;if(c){var f=zo(u),d=!f&&jo(u),p=!f&&!d&&Jo(u);h=u,f||d||p?zo(a)?h=a:Po(a)?h=vi(a):d?(c=!1,h=ci(u,!0)):p?(c=!1,h=di(u,!0)):h=[]:Yo(u)||To(u)?(h=a,To(a)?h=oa(a):Do(a)&&!Uo(a)||(h=is(u))):c=!1}c&&(o.set(u,h),i(h,u,r,s,o),o.delete(u));In(e,n,h)}(e,t,o,n,Or,r,i);else{var a=r?r(vs(e,o),s,o+"",e,t,i):void 0;void 0===a&&(a=s),In(e,o,a)}}),wa)}function Rr(e,t){var n=e.length;if(n)return os(t+=t<0?n:0,n)?e[t]:void 0}function Tr(e,t,n){t=t.length?ft(t,(function(e){return zo(e)?function(t){return cr(t,1===e.length?e[0]:e)}:e})):[$a];var r=-1;return t=ft(t,At(Zi())),function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(Br(e,(function(e,n,i){return{criteria:ft(t,(function(t){return t(e)})),index:++r,value:e}})),(function(e,t){return function(e,t,n){var r=-1,i=e.criteria,s=t.criteria,o=i.length,a=n.length;for(;++r<o;){var u=pi(i[r],s[r]);if(u){if(r>=a)return u;var l=n[r];return u*("desc"==l?-1:1)}}return e.index-t.index}(e,t,n)}))}function zr(e,t,n){for(var r=-1,i=t.length,s={};++r<i;){var o=t[r],a=cr(e,o);n(a,o)&&Wr(s,ai(o,e),a)}return s}function Nr(e,t,n,r){var i=r?wt:mt,s=-1,o=t.length,a=e;for(e===t&&(t=vi(t)),n&&(a=ft(e,At(n)));++s<o;)for(var u=0,l=t[s],h=n?n(l):l;(u=i(a,h,u,r))>-1;)a!==e&&Ze.call(a,u,1),Ze.call(e,u,1);return e}function Kr(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==s){var s=i;os(i)?Ze.call(e,i,1):Qr(e,i)}}return e}function Pr(e,t){return e+Qt(hn()*(t-e+1))}function jr(e,t){var n="";if(!e||t<1||t>9007199254740991)return n;do{t%2&&(n+=e),(t=Qt(t/2))&&(e+=e)}while(t);return n}function Mr(e,t){return ms(ps(e,t,$a),e+"")}function qr(e){return qn(Aa(e))}function Ur(e,t){var n=Aa(e);return ks(n,Gn(t,0,n.length))}function Wr(e,t,n,r){if(!Do(e))return e;for(var i=-1,s=(t=ai(t,e)).length,o=s-1,a=e;null!=a&&++i<s;){var u=Es(t[i]),l=n;if("__proto__"===u||"constructor"===u||"prototype"===u)return e;if(i!=o){var h=a[u];void 0===(l=r?r(h,u,a):void 0)&&(l=Do(h)?h:os(t[i+1])?[]:{})}Dn(a,u,l),a=a[u]}return e}var Ir=_n?function(e,t){return _n.set(e,t),e}:$a,Dr=Vt?function(e,t){return Vt(e,"toString",{configurable:!0,enumerable:!1,value:Da(t),writable:!0})}:$a;function Fr(e){return ks(Aa(e))}function Hr(e,t,n){var i=-1,s=e.length;t<0&&(t=-t>s?0:s+t),(n=n>s?s:n)<0&&(n+=s),s=t>n?0:n-t>>>0,t>>>=0;for(var o=r(s);++i<s;)o[i]=e[i+t];return o}function $r(e,t){var n;return er(e,(function(e,r,i){return!(n=t(e,r,i))})),!!n}function Yr(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t==t&&i<=2147483647){for(;r<i;){var s=r+i>>>1,o=e[s];null!==o&&!Xo(o)&&(n?o<=t:o<t)?r=s+1:i=s}return i}return Vr(e,t,$a,n)}function Vr(e,t,n,r){var i=0,s=null==e?0:e.length;if(0===s)return 0;for(var o=(t=n(t))!=t,a=null===t,u=Xo(t),l=void 0===t;i<s;){var h=Qt((i+s)/2),c=n(e[h]),f=void 0!==c,d=null===c,p=c==c,g=Xo(c);if(o)var y=r||p;else y=l?p&&(r||f):a?p&&f&&(r||!d):u?p&&f&&!d&&(r||!g):!d&&!g&&(r?c<=t:c<t);y?i=h+1:s=h}return an(s,4294967294)}function Gr(e,t){for(var n=-1,r=e.length,i=0,s=[];++n<r;){var o=e[n],a=t?t(o):o;if(!n||!Ao(a,u)){var u=a;s[i++]=0===o?0:o}}return s}function Zr(e){return"number"==typeof e?e:Xo(e)?NaN:+e}function Xr(e){if("string"==typeof e)return e;if(zo(e))return ft(e,Xr)+"";if(Xo(e))return Bn?Bn.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Jr(e,t,n){var r=-1,i=ht,s=e.length,o=!0,a=[],u=a;if(n)o=!1,i=ct;else if(s>=200){var l=t?null:ji(e);if(l)return It(l);o=!1,i=Rt,u=new Pn}else u=t?[]:a;e:for(;++r<s;){var h=e[r],c=t?t(h):h;if(h=n||0!==h?h:0,o&&c==c){for(var f=u.length;f--;)if(u[f]===c)continue e;t&&u.push(c),a.push(h)}else i(u,c,n)||(u!==a&&u.push(c),a.push(h))}return a}function Qr(e,t){return null==(e=gs(e,t=ai(t,e)))||delete e[Es(Ms(t))]}function ei(e,t,n,r){return Wr(e,t,n(cr(e,t)),r)}function ti(e,t,n,r){for(var i=e.length,s=r?i:-1;(r?s--:++s<i)&&t(e[s],s,e););return n?Hr(e,r?0:s,r?s+1:i):Hr(e,r?s+1:0,r?i:s)}function ni(e,t){var n=e;return n instanceof Tn&&(n=n.value()),pt(t,(function(e,t){return t.func.apply(t.thisArg,dt([e],t.args))}),n)}function ri(e,t,n){var i=e.length;if(i<2)return i?Jr(e[0]):[];for(var s=-1,o=r(i);++s<i;)for(var a=e[s],u=-1;++u<i;)u!=s&&(o[s]=Qn(o[s]||a,e[u],t,n));return Jr(sr(o,1),t,n)}function ii(e,t,n){for(var r=-1,i=e.length,s=t.length,o={};++r<i;){var a=r<s?t[r]:void 0;n(o,e[r],a)}return o}function si(e){return Po(e)?e:[]}function oi(e){return"function"==typeof e?e:$a}function ai(e,t){return zo(e)?e:us(e,t)?[e]:Ss(aa(e))}var ui=Mr;function li(e,t,n){var r=e.length;return n=void 0===n?r:n,!t&&n>=r?e:Hr(e,t,n)}var hi=Gt||function(e){return $e.clearTimeout(e)};function ci(e,t){if(t)return e.slice();var n=e.length,r=Fe?Fe(n):new e.constructor(n);return e.copy(r),r}function fi(e){var t=new e.constructor(e.byteLength);return new We(t).set(new We(e)),t}function di(e,t){var n=t?fi(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function pi(e,t){if(e!==t){var n=void 0!==e,r=null===e,i=e==e,s=Xo(e),o=void 0!==t,a=null===t,u=t==t,l=Xo(t);if(!a&&!l&&!s&&e>t||s&&o&&u&&!a&&!l||r&&o&&u||!n&&u||!i)return 1;if(!r&&!s&&!l&&e<t||l&&n&&i&&!r&&!s||a&&n&&i||!o&&i||!u)return-1}return 0}function gi(e,t,n,i){for(var s=-1,o=e.length,a=n.length,u=-1,l=t.length,h=on(o-a,0),c=r(l+h),f=!i;++u<l;)c[u]=t[u];for(;++s<a;)(f||s<o)&&(c[n[s]]=e[s]);for(;h--;)c[u++]=e[s++];return c}function yi(e,t,n,i){for(var s=-1,o=e.length,a=-1,u=n.length,l=-1,h=t.length,c=on(o-u,0),f=r(c+h),d=!i;++s<c;)f[s]=e[s];for(var p=s;++l<h;)f[p+l]=t[l];for(;++a<u;)(d||s<o)&&(f[p+n[a]]=e[s++]);return f}function vi(e,t){var n=-1,i=e.length;for(t||(t=r(i));++n<i;)t[n]=e[n];return t}function _i(e,t,n,r){var i=!n;n||(n={});for(var s=-1,o=t.length;++s<o;){var a=t[s],u=r?r(n[a],e[a],a,n,e):void 0;void 0===u&&(u=e[a]),i?Yn(n,a,u):Dn(n,a,u)}return n}function bi(e,t){return function(n,r){var i=zo(n)?st:Hn,s=t?t():{};return i(n,e,Zi(r,2),s)}}function mi(e){return Mr((function(t,n){var r=-1,i=n.length,s=i>1?n[i-1]:void 0,o=i>2?n[2]:void 0;for(s=e.length>3&&"function"==typeof s?(i--,s):void 0,o&&as(n[0],n[1],o)&&(s=i<3?void 0:s,i=1),t=ge(t);++r<i;){var a=n[r];a&&e(t,a,r,s)}return t}))}function wi(e,t){return function(n,r){if(null==n)return n;if(!Ko(n))return e(n,r);for(var i=n.length,s=t?i:-1,o=ge(n);(t?s--:++s<i)&&!1!==r(o[s],s,o););return n}}function xi(e){return function(t,n,r){for(var i=-1,s=ge(t),o=r(t),a=o.length;a--;){var u=o[e?a:++i];if(!1===n(s[u],u,s))break}return t}}function ki(e){return function(t){var n=Mt(t=aa(t))?Ht(t):void 0,r=n?n[0]:t.charAt(0),i=n?li(n,1).join(""):t.slice(1);return r[e]()+i}}function Si(e){return function(t){return pt(Ua(Ta(t).replace(Re,"")),e,"")}}function Ei(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=An(e.prototype),r=e.apply(n,t);return Do(r)?r:n}}function Li(e){return function(t,n,r){var i=ge(t);if(!Ko(t)){var s=Zi(n,3);t=ma(t),n=function(e){return s(i[e],e,i)}}var o=e(t,n,r);return o>-1?i[s?t[o]:o]:void 0}}function Bi(e){return Fi((function(t){var n=t.length,r=n,s=Rn.prototype.thru;for(e&&t.reverse();r--;){var o=t[r];if("function"!=typeof o)throw new _e(i);if(s&&!a&&"wrapper"==Vi(o))var a=new Rn([],!0)}for(r=a?r:n;++r<n;){var u=Vi(o=t[r]),l="wrapper"==u?Yi(o):void 0;a=l&&ls(l[0])&&424==l[1]&&!l[4].length&&1==l[9]?a[Vi(l[0])].apply(a,l[3]):1==o.length&&ls(o)?a[u]():a.thru(o)}return function(){var e=arguments,r=e[0];if(a&&1==e.length&&zo(r))return a.plant(r).value();for(var i=0,s=n?t[i].apply(this,e):r;++i<n;)s=t[i].call(this,s);return s}}))}function Ci(e,t,n,i,s,o,a,u,l,h){var c=128&t,f=1&t,d=2&t,p=24&t,g=512&t,y=d?void 0:Ei(e);return function v(){for(var _=arguments.length,b=r(_),m=_;m--;)b[m]=arguments[m];if(p)var w=Gi(v),x=Nt(b,w);if(i&&(b=gi(b,i,s,p)),o&&(b=yi(b,o,a,p)),_-=x,p&&_<h){var k=Wt(b,w);return Ki(e,t,Ci,v.placeholder,n,b,k,u,l,h-_)}var S=f?n:this,E=d?S[e]:e;return _=b.length,u?b=ys(b,u):g&&_>1&&b.reverse(),c&&l<_&&(b.length=l),this&&this!==$e&&this instanceof v&&(E=y||Ei(E)),E.apply(S,b)}}function Ai(e,t){return function(n,r){return function(e,t,n,r){return ur(e,(function(e,i,s){t(r,n(e),i,s)})),r}(n,e,t(r),{})}}function Oi(e,t){return function(n,r){var i;if(void 0===n&&void 0===r)return t;if(void 0!==n&&(i=n),void 0!==r){if(void 0===i)return r;"string"==typeof n||"string"==typeof r?(n=Xr(n),r=Xr(r)):(n=Zr(n),r=Zr(r)),i=e(n,r)}return i}}function Ri(e){return Fi((function(t){return t=ft(t,At(Zi())),Mr((function(n){var r=this;return e(t,(function(e){return it(e,r,n)}))}))}))}function Ti(e,t){var n=(t=void 0===t?" ":Xr(t)).length;if(n<2)return n?jr(t,e):t;var r=jr(t,Jt(e/Ft(t)));return Mt(t)?li(Ht(r),0,e).join(""):r.slice(0,e)}function zi(e){return function(t,n,i){return i&&"number"!=typeof i&&as(t,n,i)&&(n=i=void 0),t=na(t),void 0===n?(n=t,t=0):n=na(n),function(e,t,n,i){for(var s=-1,o=on(Jt((t-e)/(n||1)),0),a=r(o);o--;)a[i?o:++s]=e,e+=n;return a}(t,n,i=void 0===i?t<n?1:-1:na(i),e)}}function Ni(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=sa(t),n=sa(n)),e(t,n)}}function Ki(e,t,n,r,i,s,o,a,u,l){var h=8&t;t|=h?32:64,4&(t&=~(h?64:32))||(t&=-4);var c=[e,t,i,h?s:void 0,h?o:void 0,h?void 0:s,h?void 0:o,a,u,l],f=n.apply(void 0,c);return ls(e)&&_s(f,c),f.placeholder=r,ws(f,e,t)}function Pi(e){var t=pe[e];return function(e,n){if(e=sa(e),(n=null==n?0:an(ra(n),292))&&nn(e)){var r=(aa(e)+"e").split("e");return+((r=(aa(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var ji=gn&&1/It(new gn([,-0]))[1]==1/0?function(e){return new gn(e)}:Xa;function Mi(e){return function(t){var n=ns(t);return n==p?qt(t):n==_?Dt(t):function(e,t){return ft(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function qi(e,t,n,o,a,u,l,h){var c=2&t;if(!c&&"function"!=typeof e)throw new _e(i);var f=o?o.length:0;if(f||(t&=-97,o=a=void 0),l=void 0===l?l:on(ra(l),0),h=void 0===h?h:ra(h),f-=a?a.length:0,64&t){var d=o,p=a;o=a=void 0}var g=c?void 0:Yi(e),y=[e,t,n,o,a,d,p,u,l,h];if(g&&function(e,t){var n=e[1],r=t[1],i=n|r,o=i<131,a=128==r&&8==n||128==r&&256==n&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!o&&!a)return e;1&r&&(e[2]=t[2],i|=1&n?0:4);var u=t[3];if(u){var l=e[3];e[3]=l?gi(l,u,t[4]):u,e[4]=l?Wt(e[3],s):t[4]}(u=t[5])&&(l=e[5],e[5]=l?yi(l,u,t[6]):u,e[6]=l?Wt(e[5],s):t[6]);(u=t[7])&&(e[7]=u);128&r&&(e[8]=null==e[8]?t[8]:an(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0],e[1]=i}(y,g),e=y[0],t=y[1],n=y[2],o=y[3],a=y[4],!(h=y[9]=void 0===y[9]?c?0:e.length:on(y[9]-f,0))&&24&t&&(t&=-25),t&&1!=t)v=8==t||16==t?function(e,t,n){var i=Ei(e);return function s(){for(var o=arguments.length,a=r(o),u=o,l=Gi(s);u--;)a[u]=arguments[u];var h=o<3&&a[0]!==l&&a[o-1]!==l?[]:Wt(a,l);if((o-=h.length)<n)return Ki(e,t,Ci,s.placeholder,void 0,a,h,void 0,void 0,n-o);var c=this&&this!==$e&&this instanceof s?i:e;return it(c,this,a)}}(e,t,h):32!=t&&33!=t||a.length?Ci.apply(void 0,y):function(e,t,n,i){var s=1&t,o=Ei(e);return function t(){for(var a=-1,u=arguments.length,l=-1,h=i.length,c=r(h+u),f=this&&this!==$e&&this instanceof t?o:e;++l<h;)c[l]=i[l];for(;u--;)c[l++]=arguments[++a];return it(f,s?n:this,c)}}(e,t,n,o);else var v=function(e,t,n){var r=1&t,i=Ei(e);return function t(){var s=this&&this!==$e&&this instanceof t?i:e;return s.apply(r?n:this,arguments)}}(e,t,n);return ws((g?Ir:_s)(v,y),e,t)}function Ui(e,t,n,r){return void 0===e||Ao(e,we[n])&&!Se.call(r,n)?t:e}function Wi(e,t,n,r,i,s){return Do(e)&&Do(t)&&(s.set(t,e),Or(e,t,void 0,Wi,s),s.delete(t)),e}function Ii(e){return Yo(e)?void 0:e}function Di(e,t,n,r,i,s){var o=1&n,a=e.length,u=t.length;if(a!=u&&!(o&&u>a))return!1;var l=s.get(e),h=s.get(t);if(l&&h)return l==t&&h==e;var c=-1,f=!0,d=2&n?new Pn:void 0;for(s.set(e,t),s.set(t,e);++c<a;){var p=e[c],g=t[c];if(r)var y=o?r(g,p,c,t,e,s):r(p,g,c,e,t,s);if(void 0!==y){if(y)continue;f=!1;break}if(d){if(!yt(t,(function(e,t){if(!Rt(d,t)&&(p===e||i(p,e,n,r,s)))return d.push(t)}))){f=!1;break}}else if(p!==g&&!i(p,g,n,r,s)){f=!1;break}}return s.delete(e),s.delete(t),f}function Fi(e){return ms(ps(e,void 0,zs),e+"")}function Hi(e){return fr(e,ma,es)}function $i(e){return fr(e,wa,ts)}var Yi=_n?function(e){return _n.get(e)}:Xa;function Vi(e){for(var t=e.name+"",n=bn[t],r=Se.call(bn,t)?n.length:0;r--;){var i=n[r],s=i.func;if(null==s||s==e)return i.name}return t}function Gi(e){return(Se.call(Cn,"placeholder")?Cn:e).placeholder}function Zi(){var e=Cn.iteratee||Ya;return e=e===Ya?kr:e,arguments.length?e(arguments[0],arguments[1]):e}function Xi(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function Ji(e){for(var t=ma(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,fs(i)]}return t}function Qi(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return xr(n)?n:void 0}var es=en?function(e){return null==e?[]:(e=ge(e),lt(en(e),(function(t){return Ve.call(e,t)})))}:iu,ts=en?function(e){for(var t=[];e;)dt(t,es(e)),e=He(e);return t}:iu,ns=dr;function rs(e,t,n){for(var r=-1,i=(t=ai(t,e)).length,s=!1;++r<i;){var o=Es(t[r]);if(!(s=null!=e&&n(e,o)))break;e=e[o]}return s||++r!=i?s:!!(i=null==e?0:e.length)&&Io(i)&&os(o,i)&&(zo(e)||To(e))}function is(e){return"function"!=typeof e.constructor||cs(e)?{}:An(He(e))}function ss(e){return zo(e)||To(e)||!!(Xe&&e&&e[Xe])}function os(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&ae.test(e))&&e>-1&&e%1==0&&e<t}function as(e,t,n){if(!Do(n))return!1;var r=typeof t;return!!("number"==r?Ko(n)&&os(t,n.length):"string"==r&&t in n)&&Ao(n[t],e)}function us(e,t){if(zo(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Xo(e))||(D.test(e)||!I.test(e)||null!=t&&e in ge(t))}function ls(e){var t=Vi(e),n=Cn[t];if("function"!=typeof n||!(t in Tn.prototype))return!1;if(e===n)return!0;var r=Yi(n);return!!r&&e===r[0]}(fn&&ns(new fn(new ArrayBuffer(1)))!=k||dn&&ns(new dn)!=p||pn&&"[object Promise]"!=ns(pn.resolve())||gn&&ns(new gn)!=_||yn&&ns(new yn)!=w)&&(ns=function(e){var t=dr(e),n=t==y?e.constructor:void 0,r=n?Ls(n):"";if(r)switch(r){case mn:return k;case wn:return p;case xn:return"[object Promise]";case kn:return _;case Sn:return w}return t});var hs=xe?Uo:su;function cs(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||we)}function fs(e){return e==e&&!Do(e)}function ds(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in ge(n)))}}function ps(e,t,n){return t=on(void 0===t?e.length-1:t,0),function(){for(var i=arguments,s=-1,o=on(i.length-t,0),a=r(o);++s<o;)a[s]=i[t+s];s=-1;for(var u=r(t+1);++s<t;)u[s]=i[s];return u[t]=n(a),it(e,this,u)}}function gs(e,t){return t.length<2?e:cr(e,Hr(t,0,-1))}function ys(e,t){for(var n=e.length,r=an(t.length,n),i=vi(e);r--;){var s=t[r];e[r]=os(s,n)?i[s]:void 0}return e}function vs(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var _s=xs(Ir),bs=Xt||function(e,t){return $e.setTimeout(e,t)},ms=xs(Dr);function ws(e,t,n){var r=t+"";return ms(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(Z,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return ot(o,(function(n){var r="_."+n[0];t&n[1]&&!ht(e,r)&&e.push(r)})),e.sort()}(function(e){var t=e.match(X);return t?t[1].split(J):[]}(r),n)))}function xs(e){var t=0,n=0;return function(){var r=un(),i=16-(r-n);if(n=r,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function ks(e,t){var n=-1,r=e.length,i=r-1;for(t=void 0===t?r:t;++n<t;){var s=Pr(n,i),o=e[s];e[s]=e[n],e[n]=o}return e.length=t,e}var Ss=function(e){var t=ko(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(F,(function(e,n,r,i){t.push(r?i.replace(ee,"$1"):n||e)})),t}));function Es(e){if("string"==typeof e||Xo(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Ls(e){if(null!=e){try{return ke.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Bs(e){if(e instanceof Tn)return e.clone();var t=new Rn(e.__wrapped__,e.__chain__);return t.__actions__=vi(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Cs=Mr((function(e,t){return Po(e)?Qn(e,sr(t,1,Po,!0)):[]})),As=Mr((function(e,t){var n=Ms(t);return Po(n)&&(n=void 0),Po(e)?Qn(e,sr(t,1,Po,!0),Zi(n,2)):[]})),Os=Mr((function(e,t){var n=Ms(t);return Po(n)&&(n=void 0),Po(e)?Qn(e,sr(t,1,Po,!0),void 0,n):[]}));function Rs(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:ra(n);return i<0&&(i=on(r+i,0)),bt(e,Zi(t,3),i)}function Ts(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r-1;return void 0!==n&&(i=ra(n),i=n<0?on(r+i,0):an(i,r-1)),bt(e,Zi(t,3),i,!0)}function zs(e){return(null==e?0:e.length)?sr(e,1):[]}function Ns(e){return e&&e.length?e[0]:void 0}var Ks=Mr((function(e){var t=ft(e,si);return t.length&&t[0]===e[0]?vr(t):[]})),Ps=Mr((function(e){var t=Ms(e),n=ft(e,si);return t===Ms(n)?t=void 0:n.pop(),n.length&&n[0]===e[0]?vr(n,Zi(t,2)):[]})),js=Mr((function(e){var t=Ms(e),n=ft(e,si);return(t="function"==typeof t?t:void 0)&&n.pop(),n.length&&n[0]===e[0]?vr(n,void 0,t):[]}));function Ms(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}var qs=Mr(Us);function Us(e,t){return e&&e.length&&t&&t.length?Nr(e,t):e}var Ws=Fi((function(e,t){var n=null==e?0:e.length,r=Vn(e,t);return Kr(e,ft(t,(function(e){return os(e,n)?+e:e})).sort(pi)),r}));function Is(e){return null==e?e:cn.call(e)}var Ds=Mr((function(e){return Jr(sr(e,1,Po,!0))})),Fs=Mr((function(e){var t=Ms(e);return Po(t)&&(t=void 0),Jr(sr(e,1,Po,!0),Zi(t,2))})),Hs=Mr((function(e){var t=Ms(e);return t="function"==typeof t?t:void 0,Jr(sr(e,1,Po,!0),void 0,t)}));function $s(e){if(!e||!e.length)return[];var t=0;return e=lt(e,(function(e){if(Po(e))return t=on(e.length,t),!0})),Ct(t,(function(t){return ft(e,St(t))}))}function Ys(e,t){if(!e||!e.length)return[];var n=$s(e);return null==t?n:ft(n,(function(e){return it(t,void 0,e)}))}var Vs=Mr((function(e,t){return Po(e)?Qn(e,t):[]})),Gs=Mr((function(e){return ri(lt(e,Po))})),Zs=Mr((function(e){var t=Ms(e);return Po(t)&&(t=void 0),ri(lt(e,Po),Zi(t,2))})),Xs=Mr((function(e){var t=Ms(e);return t="function"==typeof t?t:void 0,ri(lt(e,Po),void 0,t)})),Js=Mr($s);var Qs=Mr((function(e){var t=e.length,n=t>1?e[t-1]:void 0;return n="function"==typeof n?(e.pop(),n):void 0,Ys(e,n)}));function eo(e){var t=Cn(e);return t.__chain__=!0,t}function to(e,t){return t(e)}var no=Fi((function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,i=function(t){return Vn(t,e)};return!(t>1||this.__actions__.length)&&r instanceof Tn&&os(n)?((r=r.slice(n,+n+(t?1:0))).__actions__.push({func:to,args:[i],thisArg:void 0}),new Rn(r,this.__chain__).thru((function(e){return t&&!e.length&&e.push(void 0),e}))):this.thru(i)}));var ro=bi((function(e,t,n){Se.call(e,n)?++e[n]:Yn(e,n,1)}));var io=Li(Rs),so=Li(Ts);function oo(e,t){return(zo(e)?ot:er)(e,Zi(t,3))}function ao(e,t){return(zo(e)?at:tr)(e,Zi(t,3))}var uo=bi((function(e,t,n){Se.call(e,n)?e[n].push(t):Yn(e,n,[t])}));var lo=Mr((function(e,t,n){var i=-1,s="function"==typeof t,o=Ko(e)?r(e.length):[];return er(e,(function(e){o[++i]=s?it(t,e,n):_r(e,t,n)})),o})),ho=bi((function(e,t,n){Yn(e,n,t)}));function co(e,t){return(zo(e)?ft:Br)(e,Zi(t,3))}var fo=bi((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]}));var po=Mr((function(e,t){if(null==e)return[];var n=t.length;return n>1&&as(e,t[0],t[1])?t=[]:n>2&&as(t[0],t[1],t[2])&&(t=[t[0]]),Tr(e,sr(t,1),[])})),go=Zt||function(){return $e.Date.now()};function yo(e,t,n){return t=n?void 0:t,qi(e,128,void 0,void 0,void 0,void 0,t=e&&null==t?e.length:t)}function vo(e,t){var n;if("function"!=typeof t)throw new _e(i);return e=ra(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=void 0),n}}var _o=Mr((function(e,t,n){var r=1;if(n.length){var i=Wt(n,Gi(_o));r|=32}return qi(e,r,t,n,i)})),bo=Mr((function(e,t,n){var r=3;if(n.length){var i=Wt(n,Gi(bo));r|=32}return qi(t,r,e,n,i)}));function mo(e,t,n){var r,s,o,a,u,l,h=0,c=!1,f=!1,d=!0;if("function"!=typeof e)throw new _e(i);function p(t){var n=r,i=s;return r=s=void 0,h=t,a=e.apply(i,n)}function g(e){return h=e,u=bs(v,t),c?p(e):a}function y(e){var n=e-l;return void 0===l||n>=t||n<0||f&&e-h>=o}function v(){var e=go();if(y(e))return _(e);u=bs(v,function(e){var n=t-(e-l);return f?an(n,o-(e-h)):n}(e))}function _(e){return u=void 0,d&&r?p(e):(r=s=void 0,a)}function b(){var e=go(),n=y(e);if(r=arguments,s=this,l=e,n){if(void 0===u)return g(l);if(f)return hi(u),u=bs(v,t),p(l)}return void 0===u&&(u=bs(v,t)),a}return t=sa(t)||0,Do(n)&&(c=!!n.leading,o=(f="maxWait"in n)?on(sa(n.maxWait)||0,t):o,d="trailing"in n?!!n.trailing:d),b.cancel=function(){void 0!==u&&hi(u),h=0,r=l=s=u=void 0},b.flush=function(){return void 0===u?a:_(go())},b}var wo=Mr((function(e,t){return Jn(e,1,t)})),xo=Mr((function(e,t,n){return Jn(e,sa(t)||0,n)}));function ko(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new _e(i);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],s=n.cache;if(s.has(i))return s.get(i);var o=e.apply(this,r);return n.cache=s.set(i,o)||s,o};return n.cache=new(ko.Cache||Kn),n}function So(e){if("function"!=typeof e)throw new _e(i);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}ko.Cache=Kn;var Eo=ui((function(e,t){var n=(t=1==t.length&&zo(t[0])?ft(t[0],At(Zi())):ft(sr(t,1),At(Zi()))).length;return Mr((function(r){for(var i=-1,s=an(r.length,n);++i<s;)r[i]=t[i].call(this,r[i]);return it(e,this,r)}))})),Lo=Mr((function(e,t){return qi(e,32,void 0,t,Wt(t,Gi(Lo)))})),Bo=Mr((function(e,t){return qi(e,64,void 0,t,Wt(t,Gi(Bo)))})),Co=Fi((function(e,t){return qi(e,256,void 0,void 0,void 0,t)}));function Ao(e,t){return e===t||e!=e&&t!=t}var Oo=Ni(pr),Ro=Ni((function(e,t){return e>=t})),To=br(function(){return arguments}())?br:function(e){return Fo(e)&&Se.call(e,"callee")&&!Ve.call(e,"callee")},zo=r.isArray,No=Je?At(Je):function(e){return Fo(e)&&dr(e)==x};function Ko(e){return null!=e&&Io(e.length)&&!Uo(e)}function Po(e){return Fo(e)&&Ko(e)}var jo=tn||su,Mo=Qe?At(Qe):function(e){return Fo(e)&&dr(e)==h};function qo(e){if(!Fo(e))return!1;var t=dr(e);return t==c||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!Yo(e)}function Uo(e){if(!Do(e))return!1;var t=dr(e);return t==f||t==d||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Wo(e){return"number"==typeof e&&e==ra(e)}function Io(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function Do(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Fo(e){return null!=e&&"object"==typeof e}var Ho=et?At(et):function(e){return Fo(e)&&ns(e)==p};function $o(e){return"number"==typeof e||Fo(e)&&dr(e)==g}function Yo(e){if(!Fo(e)||dr(e)!=y)return!1;var t=He(e);if(null===t)return!0;var n=Se.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&ke.call(n)==Ce}var Vo=tt?At(tt):function(e){return Fo(e)&&dr(e)==v};var Go=nt?At(nt):function(e){return Fo(e)&&ns(e)==_};function Zo(e){return"string"==typeof e||!zo(e)&&Fo(e)&&dr(e)==b}function Xo(e){return"symbol"==typeof e||Fo(e)&&dr(e)==m}var Jo=rt?At(rt):function(e){return Fo(e)&&Io(e.length)&&!!qe[dr(e)]};var Qo=Ni(Lr),ea=Ni((function(e,t){return e<=t}));function ta(e){if(!e)return[];if(Ko(e))return Zo(e)?Ht(e):vi(e);if(vt&&e[vt])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[vt]());var t=ns(e);return(t==p?qt:t==_?It:Aa)(e)}function na(e){return e?(e=sa(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function ra(e){var t=na(e),n=t%1;return t==t?n?t-n:t:0}function ia(e){return e?Gn(ra(e),0,4294967295):0}function sa(e){if("number"==typeof e)return e;if(Xo(e))return NaN;if(Do(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Do(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(Y,"");var n=ie.test(e);return n||oe.test(e)?De(e.slice(2),n?2:8):re.test(e)?NaN:+e}function oa(e){return _i(e,wa(e))}function aa(e){return null==e?"":Xr(e)}var ua=mi((function(e,t){if(cs(t)||Ko(t))_i(t,ma(t),e);else for(var n in t)Se.call(t,n)&&Dn(e,n,t[n])})),la=mi((function(e,t){_i(t,wa(t),e)})),ha=mi((function(e,t,n,r){_i(t,wa(t),e,r)})),ca=mi((function(e,t,n,r){_i(t,ma(t),e,r)})),fa=Fi(Vn);var da=Mr((function(e,t){e=ge(e);var n=-1,r=t.length,i=r>2?t[2]:void 0;for(i&&as(t[0],t[1],i)&&(r=1);++n<r;)for(var s=t[n],o=wa(s),a=-1,u=o.length;++a<u;){var l=o[a],h=e[l];(void 0===h||Ao(h,we[l])&&!Se.call(e,l))&&(e[l]=s[l])}return e})),pa=Mr((function(e){return e.push(void 0,Wi),it(ka,void 0,e)}));function ga(e,t,n){var r=null==e?void 0:cr(e,t);return void 0===r?n:r}function ya(e,t){return null!=e&&rs(e,t,yr)}var va=Ai((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Be.call(t)),e[t]=n}),Da($a)),_a=Ai((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Be.call(t)),Se.call(e,t)?e[t].push(n):e[t]=[n]}),Zi),ba=Mr(_r);function ma(e){return Ko(e)?Mn(e):Sr(e)}function wa(e){return Ko(e)?Mn(e,!0):Er(e)}var xa=mi((function(e,t,n){Or(e,t,n)})),ka=mi((function(e,t,n,r){Or(e,t,n,r)})),Sa=Fi((function(e,t){var n={};if(null==e)return n;var r=!1;t=ft(t,(function(t){return t=ai(t,e),r||(r=t.length>1),t})),_i(e,$i(e),n),r&&(n=Zn(n,7,Ii));for(var i=t.length;i--;)Qr(n,t[i]);return n}));var Ea=Fi((function(e,t){return null==e?{}:function(e,t){return zr(e,t,(function(t,n){return ya(e,n)}))}(e,t)}));function La(e,t){if(null==e)return{};var n=ft($i(e),(function(e){return[e]}));return t=Zi(t),zr(e,n,(function(e,n){return t(e,n[0])}))}var Ba=Mi(ma),Ca=Mi(wa);function Aa(e){return null==e?[]:Ot(e,ma(e))}var Oa=Si((function(e,t,n){return t=t.toLowerCase(),e+(n?Ra(t):t)}));function Ra(e){return qa(aa(e).toLowerCase())}function Ta(e){return(e=aa(e))&&e.replace(ue,Kt).replace(Te,"")}var za=Si((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),Na=Si((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),Ka=ki("toLowerCase");var Pa=Si((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}));var ja=Si((function(e,t,n){return e+(n?" ":"")+qa(t)}));var Ma=Si((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),qa=ki("toUpperCase");function Ua(e,t,n){return e=aa(e),void 0===(t=n?void 0:t)?function(e){return Pe.test(e)}(e)?function(e){return e.match(Ne)||[]}(e):function(e){return e.match(Q)||[]}(e):e.match(t)||[]}var Wa=Mr((function(e,t){try{return it(e,void 0,t)}catch(e){return qo(e)?e:new fe(e)}})),Ia=Fi((function(e,t){return ot(t,(function(t){t=Es(t),Yn(e,t,_o(e[t],e))})),e}));function Da(e){return function(){return e}}var Fa=Bi(),Ha=Bi(!0);function $a(e){return e}function Ya(e){return kr("function"==typeof e?e:Zn(e,1))}var Va=Mr((function(e,t){return function(n){return _r(n,e,t)}})),Ga=Mr((function(e,t){return function(n){return _r(e,n,t)}}));function Za(e,t,n){var r=ma(t),i=hr(t,r);null!=n||Do(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=hr(t,ma(t)));var s=!(Do(n)&&"chain"in n&&!n.chain),o=Uo(e);return ot(i,(function(n){var r=t[n];e[n]=r,o&&(e.prototype[n]=function(){var t=this.__chain__;if(s||t){var n=e(this.__wrapped__),i=n.__actions__=vi(this.__actions__);return i.push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,dt([this.value()],arguments))})})),e}function Xa(){}var Ja=Ri(ft),Qa=Ri(ut),eu=Ri(yt);function tu(e){return us(e)?St(Es(e)):function(e){return function(t){return cr(t,e)}}(e)}var nu=zi(),ru=zi(!0);function iu(){return[]}function su(){return!1}var ou=Oi((function(e,t){return e+t}),0),au=Pi("ceil"),uu=Oi((function(e,t){return e/t}),1),lu=Pi("floor");var hu,cu=Oi((function(e,t){return e*t}),1),fu=Pi("round"),du=Oi((function(e,t){return e-t}),0);return Cn.after=function(e,t){if("function"!=typeof t)throw new _e(i);return e=ra(e),function(){if(--e<1)return t.apply(this,arguments)}},Cn.ary=yo,Cn.assign=ua,Cn.assignIn=la,Cn.assignInWith=ha,Cn.assignWith=ca,Cn.at=fa,Cn.before=vo,Cn.bind=_o,Cn.bindAll=Ia,Cn.bindKey=bo,Cn.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return zo(e)?e:[e]},Cn.chain=eo,Cn.chunk=function(e,t,n){t=(n?as(e,t,n):void 0===t)?1:on(ra(t),0);var i=null==e?0:e.length;if(!i||t<1)return[];for(var s=0,o=0,a=r(Jt(i/t));s<i;)a[o++]=Hr(e,s,s+=t);return a},Cn.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var s=e[t];s&&(i[r++]=s)}return i},Cn.concat=function(){var e=arguments.length;if(!e)return[];for(var t=r(e-1),n=arguments[0],i=e;i--;)t[i-1]=arguments[i];return dt(zo(n)?vi(n):[n],sr(t,1))},Cn.cond=function(e){var t=null==e?0:e.length,n=Zi();return e=t?ft(e,(function(e){if("function"!=typeof e[1])throw new _e(i);return[n(e[0]),e[1]]})):[],Mr((function(n){for(var r=-1;++r<t;){var i=e[r];if(it(i[0],this,n))return it(i[1],this,n)}}))},Cn.conforms=function(e){return function(e){var t=ma(e);return function(n){return Xn(n,e,t)}}(Zn(e,1))},Cn.constant=Da,Cn.countBy=ro,Cn.create=function(e,t){var n=An(e);return null==t?n:$n(n,t)},Cn.curry=function e(t,n,r){var i=qi(t,8,void 0,void 0,void 0,void 0,void 0,n=r?void 0:n);return i.placeholder=e.placeholder,i},Cn.curryRight=function e(t,n,r){var i=qi(t,16,void 0,void 0,void 0,void 0,void 0,n=r?void 0:n);return i.placeholder=e.placeholder,i},Cn.debounce=mo,Cn.defaults=da,Cn.defaultsDeep=pa,Cn.defer=wo,Cn.delay=xo,Cn.difference=Cs,Cn.differenceBy=As,Cn.differenceWith=Os,Cn.drop=function(e,t,n){var r=null==e?0:e.length;return r?Hr(e,(t=n||void 0===t?1:ra(t))<0?0:t,r):[]},Cn.dropRight=function(e,t,n){var r=null==e?0:e.length;return r?Hr(e,0,(t=r-(t=n||void 0===t?1:ra(t)))<0?0:t):[]},Cn.dropRightWhile=function(e,t){return e&&e.length?ti(e,Zi(t,3),!0,!0):[]},Cn.dropWhile=function(e,t){return e&&e.length?ti(e,Zi(t,3),!0):[]},Cn.fill=function(e,t,n,r){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&as(e,t,n)&&(n=0,r=i),function(e,t,n,r){var i=e.length;for((n=ra(n))<0&&(n=-n>i?0:i+n),(r=void 0===r||r>i?i:ra(r))<0&&(r+=i),r=n>r?0:ia(r);n<r;)e[n++]=t;return e}(e,t,n,r)):[]},Cn.filter=function(e,t){return(zo(e)?lt:ir)(e,Zi(t,3))},Cn.flatMap=function(e,t){return sr(co(e,t),1)},Cn.flatMapDeep=function(e,t){return sr(co(e,t),1/0)},Cn.flatMapDepth=function(e,t,n){return n=void 0===n?1:ra(n),sr(co(e,t),n)},Cn.flatten=zs,Cn.flattenDeep=function(e){return(null==e?0:e.length)?sr(e,1/0):[]},Cn.flattenDepth=function(e,t){return(null==e?0:e.length)?sr(e,t=void 0===t?1:ra(t)):[]},Cn.flip=function(e){return qi(e,512)},Cn.flow=Fa,Cn.flowRight=Ha,Cn.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},Cn.functions=function(e){return null==e?[]:hr(e,ma(e))},Cn.functionsIn=function(e){return null==e?[]:hr(e,wa(e))},Cn.groupBy=uo,Cn.initial=function(e){return(null==e?0:e.length)?Hr(e,0,-1):[]},Cn.intersection=Ks,Cn.intersectionBy=Ps,Cn.intersectionWith=js,Cn.invert=va,Cn.invertBy=_a,Cn.invokeMap=lo,Cn.iteratee=Ya,Cn.keyBy=ho,Cn.keys=ma,Cn.keysIn=wa,Cn.map=co,Cn.mapKeys=function(e,t){var n={};return t=Zi(t,3),ur(e,(function(e,r,i){Yn(n,t(e,r,i),e)})),n},Cn.mapValues=function(e,t){var n={};return t=Zi(t,3),ur(e,(function(e,r,i){Yn(n,r,t(e,r,i))})),n},Cn.matches=function(e){return Cr(Zn(e,1))},Cn.matchesProperty=function(e,t){return Ar(e,Zn(t,1))},Cn.memoize=ko,Cn.merge=xa,Cn.mergeWith=ka,Cn.method=Va,Cn.methodOf=Ga,Cn.mixin=Za,Cn.negate=So,Cn.nthArg=function(e){return e=ra(e),Mr((function(t){return Rr(t,e)}))},Cn.omit=Sa,Cn.omitBy=function(e,t){return La(e,So(Zi(t)))},Cn.once=function(e){return vo(2,e)},Cn.orderBy=function(e,t,n,r){return null==e?[]:(zo(t)||(t=null==t?[]:[t]),zo(n=r?void 0:n)||(n=null==n?[]:[n]),Tr(e,t,n))},Cn.over=Ja,Cn.overArgs=Eo,Cn.overEvery=Qa,Cn.overSome=eu,Cn.partial=Lo,Cn.partialRight=Bo,Cn.partition=fo,Cn.pick=Ea,Cn.pickBy=La,Cn.property=tu,Cn.propertyOf=function(e){return function(t){return null==e?void 0:cr(e,t)}},Cn.pull=qs,Cn.pullAll=Us,Cn.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?Nr(e,t,Zi(n,2)):e},Cn.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?Nr(e,t,void 0,n):e},Cn.pullAt=Ws,Cn.range=nu,Cn.rangeRight=ru,Cn.rearg=Co,Cn.reject=function(e,t){return(zo(e)?lt:ir)(e,So(Zi(t,3)))},Cn.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],s=e.length;for(t=Zi(t,3);++r<s;){var o=e[r];t(o,r,e)&&(n.push(o),i.push(r))}return Kr(e,i),n},Cn.rest=function(e,t){if("function"!=typeof e)throw new _e(i);return Mr(e,t=void 0===t?t:ra(t))},Cn.reverse=Is,Cn.sampleSize=function(e,t,n){return t=(n?as(e,t,n):void 0===t)?1:ra(t),(zo(e)?Un:Ur)(e,t)},Cn.set=function(e,t,n){return null==e?e:Wr(e,t,n)},Cn.setWith=function(e,t,n,r){return r="function"==typeof r?r:void 0,null==e?e:Wr(e,t,n,r)},Cn.shuffle=function(e){return(zo(e)?Wn:Fr)(e)},Cn.slice=function(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&as(e,t,n)?(t=0,n=r):(t=null==t?0:ra(t),n=void 0===n?r:ra(n)),Hr(e,t,n)):[]},Cn.sortBy=po,Cn.sortedUniq=function(e){return e&&e.length?Gr(e):[]},Cn.sortedUniqBy=function(e,t){return e&&e.length?Gr(e,Zi(t,2)):[]},Cn.split=function(e,t,n){return n&&"number"!=typeof n&&as(e,t,n)&&(t=n=void 0),(n=void 0===n?4294967295:n>>>0)?(e=aa(e))&&("string"==typeof t||null!=t&&!Vo(t))&&!(t=Xr(t))&&Mt(e)?li(Ht(e),0,n):e.split(t,n):[]},Cn.spread=function(e,t){if("function"!=typeof e)throw new _e(i);return t=null==t?0:on(ra(t),0),Mr((function(n){var r=n[t],i=li(n,0,t);return r&&dt(i,r),it(e,this,i)}))},Cn.tail=function(e){var t=null==e?0:e.length;return t?Hr(e,1,t):[]},Cn.take=function(e,t,n){return e&&e.length?Hr(e,0,(t=n||void 0===t?1:ra(t))<0?0:t):[]},Cn.takeRight=function(e,t,n){var r=null==e?0:e.length;return r?Hr(e,(t=r-(t=n||void 0===t?1:ra(t)))<0?0:t,r):[]},Cn.takeRightWhile=function(e,t){return e&&e.length?ti(e,Zi(t,3),!1,!0):[]},Cn.takeWhile=function(e,t){return e&&e.length?ti(e,Zi(t,3)):[]},Cn.tap=function(e,t){return t(e),e},Cn.throttle=function(e,t,n){var r=!0,s=!0;if("function"!=typeof e)throw new _e(i);return Do(n)&&(r="leading"in n?!!n.leading:r,s="trailing"in n?!!n.trailing:s),mo(e,t,{leading:r,maxWait:t,trailing:s})},Cn.thru=to,Cn.toArray=ta,Cn.toPairs=Ba,Cn.toPairsIn=Ca,Cn.toPath=function(e){return zo(e)?ft(e,Es):Xo(e)?[e]:vi(Ss(aa(e)))},Cn.toPlainObject=oa,Cn.transform=function(e,t,n){var r=zo(e),i=r||jo(e)||Jo(e);if(t=Zi(t,4),null==n){var s=e&&e.constructor;n=i?r?new s:[]:Do(e)&&Uo(s)?An(He(e)):{}}return(i?ot:ur)(e,(function(e,r,i){return t(n,e,r,i)})),n},Cn.unary=function(e){return yo(e,1)},Cn.union=Ds,Cn.unionBy=Fs,Cn.unionWith=Hs,Cn.uniq=function(e){return e&&e.length?Jr(e):[]},Cn.uniqBy=function(e,t){return e&&e.length?Jr(e,Zi(t,2)):[]},Cn.uniqWith=function(e,t){return t="function"==typeof t?t:void 0,e&&e.length?Jr(e,void 0,t):[]},Cn.unset=function(e,t){return null==e||Qr(e,t)},Cn.unzip=$s,Cn.unzipWith=Ys,Cn.update=function(e,t,n){return null==e?e:ei(e,t,oi(n))},Cn.updateWith=function(e,t,n,r){return r="function"==typeof r?r:void 0,null==e?e:ei(e,t,oi(n),r)},Cn.values=Aa,Cn.valuesIn=function(e){return null==e?[]:Ot(e,wa(e))},Cn.without=Vs,Cn.words=Ua,Cn.wrap=function(e,t){return Lo(oi(t),e)},Cn.xor=Gs,Cn.xorBy=Zs,Cn.xorWith=Xs,Cn.zip=Js,Cn.zipObject=function(e,t){return ii(e||[],t||[],Dn)},Cn.zipObjectDeep=function(e,t){return ii(e||[],t||[],Wr)},Cn.zipWith=Qs,Cn.entries=Ba,Cn.entriesIn=Ca,Cn.extend=la,Cn.extendWith=ha,Za(Cn,Cn),Cn.add=ou,Cn.attempt=Wa,Cn.camelCase=Oa,Cn.capitalize=Ra,Cn.ceil=au,Cn.clamp=function(e,t,n){return void 0===n&&(n=t,t=void 0),void 0!==n&&(n=(n=sa(n))==n?n:0),void 0!==t&&(t=(t=sa(t))==t?t:0),Gn(sa(e),t,n)},Cn.clone=function(e){return Zn(e,4)},Cn.cloneDeep=function(e){return Zn(e,5)},Cn.cloneDeepWith=function(e,t){return Zn(e,5,t="function"==typeof t?t:void 0)},Cn.cloneWith=function(e,t){return Zn(e,4,t="function"==typeof t?t:void 0)},Cn.conformsTo=function(e,t){return null==t||Xn(e,t,ma(t))},Cn.deburr=Ta,Cn.defaultTo=function(e,t){return null==e||e!=e?t:e},Cn.divide=uu,Cn.endsWith=function(e,t,n){e=aa(e),t=Xr(t);var r=e.length,i=n=void 0===n?r:Gn(ra(n),0,r);return(n-=t.length)>=0&&e.slice(n,i)==t},Cn.eq=Ao,Cn.escape=function(e){return(e=aa(e))&&M.test(e)?e.replace(P,Pt):e},Cn.escapeRegExp=function(e){return(e=aa(e))&&$.test(e)?e.replace(H,"\\$&"):e},Cn.every=function(e,t,n){var r=zo(e)?ut:nr;return n&&as(e,t,n)&&(t=void 0),r(e,Zi(t,3))},Cn.find=io,Cn.findIndex=Rs,Cn.findKey=function(e,t){return _t(e,Zi(t,3),ur)},Cn.findLast=so,Cn.findLastIndex=Ts,Cn.findLastKey=function(e,t){return _t(e,Zi(t,3),lr)},Cn.floor=lu,Cn.forEach=oo,Cn.forEachRight=ao,Cn.forIn=function(e,t){return null==e?e:or(e,Zi(t,3),wa)},Cn.forInRight=function(e,t){return null==e?e:ar(e,Zi(t,3),wa)},Cn.forOwn=function(e,t){return e&&ur(e,Zi(t,3))},Cn.forOwnRight=function(e,t){return e&&lr(e,Zi(t,3))},Cn.get=ga,Cn.gt=Oo,Cn.gte=Ro,Cn.has=function(e,t){return null!=e&&rs(e,t,gr)},Cn.hasIn=ya,Cn.head=Ns,Cn.identity=$a,Cn.includes=function(e,t,n,r){e=Ko(e)?e:Aa(e),n=n&&!r?ra(n):0;var i=e.length;return n<0&&(n=on(i+n,0)),Zo(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&mt(e,t,n)>-1},Cn.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:ra(n);return i<0&&(i=on(r+i,0)),mt(e,t,i)},Cn.inRange=function(e,t,n){return t=na(t),void 0===n?(n=t,t=0):n=na(n),function(e,t,n){return e>=an(t,n)&&e<on(t,n)}(e=sa(e),t,n)},Cn.invoke=ba,Cn.isArguments=To,Cn.isArray=zo,Cn.isArrayBuffer=No,Cn.isArrayLike=Ko,Cn.isArrayLikeObject=Po,Cn.isBoolean=function(e){return!0===e||!1===e||Fo(e)&&dr(e)==l},Cn.isBuffer=jo,Cn.isDate=Mo,Cn.isElement=function(e){return Fo(e)&&1===e.nodeType&&!Yo(e)},Cn.isEmpty=function(e){if(null==e)return!0;if(Ko(e)&&(zo(e)||"string"==typeof e||"function"==typeof e.splice||jo(e)||Jo(e)||To(e)))return!e.length;var t=ns(e);if(t==p||t==_)return!e.size;if(cs(e))return!Sr(e).length;for(var n in e)if(Se.call(e,n))return!1;return!0},Cn.isEqual=function(e,t){return mr(e,t)},Cn.isEqualWith=function(e,t,n){var r=(n="function"==typeof n?n:void 0)?n(e,t):void 0;return void 0===r?mr(e,t,void 0,n):!!r},Cn.isError=qo,Cn.isFinite=function(e){return"number"==typeof e&&nn(e)},Cn.isFunction=Uo,Cn.isInteger=Wo,Cn.isLength=Io,Cn.isMap=Ho,Cn.isMatch=function(e,t){return e===t||wr(e,t,Ji(t))},Cn.isMatchWith=function(e,t,n){return n="function"==typeof n?n:void 0,wr(e,t,Ji(t),n)},Cn.isNaN=function(e){return $o(e)&&e!=+e},Cn.isNative=function(e){if(hs(e))throw new fe("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return xr(e)},Cn.isNil=function(e){return null==e},Cn.isNull=function(e){return null===e},Cn.isNumber=$o,Cn.isObject=Do,Cn.isObjectLike=Fo,Cn.isPlainObject=Yo,Cn.isRegExp=Vo,Cn.isSafeInteger=function(e){return Wo(e)&&e>=-9007199254740991&&e<=9007199254740991},Cn.isSet=Go,Cn.isString=Zo,Cn.isSymbol=Xo,Cn.isTypedArray=Jo,Cn.isUndefined=function(e){return void 0===e},Cn.isWeakMap=function(e){return Fo(e)&&ns(e)==w},Cn.isWeakSet=function(e){return Fo(e)&&"[object WeakSet]"==dr(e)},Cn.join=function(e,t){return null==e?"":rn.call(e,t)},Cn.kebabCase=za,Cn.last=Ms,Cn.lastIndexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r;return void 0!==n&&(i=(i=ra(n))<0?on(r+i,0):an(i,r-1)),t==t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,i):bt(e,xt,i,!0)},Cn.lowerCase=Na,Cn.lowerFirst=Ka,Cn.lt=Qo,Cn.lte=ea,Cn.max=function(e){return e&&e.length?rr(e,$a,pr):void 0},Cn.maxBy=function(e,t){return e&&e.length?rr(e,Zi(t,2),pr):void 0},Cn.mean=function(e){return kt(e,$a)},Cn.meanBy=function(e,t){return kt(e,Zi(t,2))},Cn.min=function(e){return e&&e.length?rr(e,$a,Lr):void 0},Cn.minBy=function(e,t){return e&&e.length?rr(e,Zi(t,2),Lr):void 0},Cn.stubArray=iu,Cn.stubFalse=su,Cn.stubObject=function(){return{}},Cn.stubString=function(){return""},Cn.stubTrue=function(){return!0},Cn.multiply=cu,Cn.nth=function(e,t){return e&&e.length?Rr(e,ra(t)):void 0},Cn.noConflict=function(){return $e._===this&&($e._=Ae),this},Cn.noop=Xa,Cn.now=go,Cn.pad=function(e,t,n){e=aa(e);var r=(t=ra(t))?Ft(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return Ti(Qt(i),n)+e+Ti(Jt(i),n)},Cn.padEnd=function(e,t,n){e=aa(e);var r=(t=ra(t))?Ft(e):0;return t&&r<t?e+Ti(t-r,n):e},Cn.padStart=function(e,t,n){e=aa(e);var r=(t=ra(t))?Ft(e):0;return t&&r<t?Ti(t-r,n)+e:e},Cn.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),ln(aa(e).replace(V,""),t||0)},Cn.random=function(e,t,n){if(n&&"boolean"!=typeof n&&as(e,t,n)&&(t=n=void 0),void 0===n&&("boolean"==typeof t?(n=t,t=void 0):"boolean"==typeof e&&(n=e,e=void 0)),void 0===e&&void 0===t?(e=0,t=1):(e=na(e),void 0===t?(t=e,e=0):t=na(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var i=hn();return an(e+i*(t-e+Ie("1e-"+((i+"").length-1))),t)}return Pr(e,t)},Cn.reduce=function(e,t,n){var r=zo(e)?pt:Lt,i=arguments.length<3;return r(e,Zi(t,4),n,i,er)},Cn.reduceRight=function(e,t,n){var r=zo(e)?gt:Lt,i=arguments.length<3;return r(e,Zi(t,4),n,i,tr)},Cn.repeat=function(e,t,n){return t=(n?as(e,t,n):void 0===t)?1:ra(t),jr(aa(e),t)},Cn.replace=function(){var e=arguments,t=aa(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Cn.result=function(e,t,n){var r=-1,i=(t=ai(t,e)).length;for(i||(i=1,e=void 0);++r<i;){var s=null==e?void 0:e[Es(t[r])];void 0===s&&(r=i,s=n),e=Uo(s)?s.call(e):s}return e},Cn.round=fu,Cn.runInContext=e,Cn.sample=function(e){return(zo(e)?qn:qr)(e)},Cn.size=function(e){if(null==e)return 0;if(Ko(e))return Zo(e)?Ft(e):e.length;var t=ns(e);return t==p||t==_?e.size:Sr(e).length},Cn.snakeCase=Pa,Cn.some=function(e,t,n){var r=zo(e)?yt:$r;return n&&as(e,t,n)&&(t=void 0),r(e,Zi(t,3))},Cn.sortedIndex=function(e,t){return Yr(e,t)},Cn.sortedIndexBy=function(e,t,n){return Vr(e,t,Zi(n,2))},Cn.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=Yr(e,t);if(r<n&&Ao(e[r],t))return r}return-1},Cn.sortedLastIndex=function(e,t){return Yr(e,t,!0)},Cn.sortedLastIndexBy=function(e,t,n){return Vr(e,t,Zi(n,2),!0)},Cn.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var n=Yr(e,t,!0)-1;if(Ao(e[n],t))return n}return-1},Cn.startCase=ja,Cn.startsWith=function(e,t,n){return e=aa(e),n=null==n?0:Gn(ra(n),0,e.length),t=Xr(t),e.slice(n,n+t.length)==t},Cn.subtract=du,Cn.sum=function(e){return e&&e.length?Bt(e,$a):0},Cn.sumBy=function(e,t){return e&&e.length?Bt(e,Zi(t,2)):0},Cn.template=function(e,t,n){var r=Cn.templateSettings;n&&as(e,t,n)&&(t=void 0),e=aa(e),t=ha({},t,r,Ui);var i,s,o=ha({},t.imports,r.imports,Ui),a=ma(o),u=Ot(o,a),l=0,h=t.interpolate||le,c="__p += '",f=ye((t.escape||le).source+"|"+h.source+"|"+(h===W?te:le).source+"|"+(t.evaluate||le).source+"|$","g"),d="//# sourceURL="+(Se.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Me+"]")+"\n";e.replace(f,(function(t,n,r,o,a,u){return r||(r=o),c+=e.slice(l,u).replace(he,jt),n&&(i=!0,c+="' +\n__e("+n+") +\n'"),a&&(s=!0,c+="';\n"+a+";\n__p += '"),r&&(c+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=u+t.length,t})),c+="';\n";var p=Se.call(t,"variable")&&t.variable;p||(c="with (obj) {\n"+c+"\n}\n"),c=(s?c.replace(T,""):c).replace(z,"$1").replace(N,"$1;"),c="function("+(p||"obj")+") {\n"+(p?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+c+"return __p\n}";var g=Wa((function(){return de(a,d+"return "+c).apply(void 0,u)}));if(g.source=c,qo(g))throw g;return g},Cn.times=function(e,t){if((e=ra(e))<1||e>9007199254740991)return[];var n=4294967295,r=an(e,4294967295);e-=4294967295;for(var i=Ct(r,t=Zi(t));++n<e;)t(n);return i},Cn.toFinite=na,Cn.toInteger=ra,Cn.toLength=ia,Cn.toLower=function(e){return aa(e).toLowerCase()},Cn.toNumber=sa,Cn.toSafeInteger=function(e){return e?Gn(ra(e),-9007199254740991,9007199254740991):0===e?e:0},Cn.toString=aa,Cn.toUpper=function(e){return aa(e).toUpperCase()},Cn.trim=function(e,t,n){if((e=aa(e))&&(n||void 0===t))return e.replace(Y,"");if(!e||!(t=Xr(t)))return e;var r=Ht(e),i=Ht(t);return li(r,Tt(r,i),zt(r,i)+1).join("")},Cn.trimEnd=function(e,t,n){if((e=aa(e))&&(n||void 0===t))return e.replace(G,"");if(!e||!(t=Xr(t)))return e;var r=Ht(e);return li(r,0,zt(r,Ht(t))+1).join("")},Cn.trimStart=function(e,t,n){if((e=aa(e))&&(n||void 0===t))return e.replace(V,"");if(!e||!(t=Xr(t)))return e;var r=Ht(e);return li(r,Tt(r,Ht(t))).join("")},Cn.truncate=function(e,t){var n=30,r="...";if(Do(t)){var i="separator"in t?t.separator:i;n="length"in t?ra(t.length):n,r="omission"in t?Xr(t.omission):r}var s=(e=aa(e)).length;if(Mt(e)){var o=Ht(e);s=o.length}if(n>=s)return e;var a=n-Ft(r);if(a<1)return r;var u=o?li(o,0,a).join(""):e.slice(0,a);if(void 0===i)return u+r;if(o&&(a+=u.length-a),Vo(i)){if(e.slice(a).search(i)){var l,h=u;for(i.global||(i=ye(i.source,aa(ne.exec(i))+"g")),i.lastIndex=0;l=i.exec(h);)var c=l.index;u=u.slice(0,void 0===c?a:c)}}else if(e.indexOf(Xr(i),a)!=a){var f=u.lastIndexOf(i);f>-1&&(u=u.slice(0,f))}return u+r},Cn.unescape=function(e){return(e=aa(e))&&j.test(e)?e.replace(K,$t):e},Cn.uniqueId=function(e){var t=++Ee;return aa(e)+t},Cn.upperCase=Ma,Cn.upperFirst=qa,Cn.each=oo,Cn.eachRight=ao,Cn.first=Ns,Za(Cn,(hu={},ur(Cn,(function(e,t){Se.call(Cn.prototype,t)||(hu[t]=e)})),hu),{chain:!1}),Cn.VERSION="4.17.19",ot(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Cn[e].placeholder=Cn})),ot(["drop","take"],(function(e,t){Tn.prototype[e]=function(n){n=void 0===n?1:on(ra(n),0);var r=this.__filtered__&&!t?new Tn(this):this.clone();return r.__filtered__?r.__takeCount__=an(n,r.__takeCount__):r.__views__.push({size:an(n,4294967295),type:e+(r.__dir__<0?"Right":"")}),r},Tn.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),ot(["filter","map","takeWhile"],(function(e,t){var n=t+1,r=1==n||3==n;Tn.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:Zi(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}})),ot(["head","last"],(function(e,t){var n="take"+(t?"Right":"");Tn.prototype[e]=function(){return this[n](1).value()[0]}})),ot(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");Tn.prototype[e]=function(){return this.__filtered__?new Tn(this):this[n](1)}})),Tn.prototype.compact=function(){return this.filter($a)},Tn.prototype.find=function(e){return this.filter(e).head()},Tn.prototype.findLast=function(e){return this.reverse().find(e)},Tn.prototype.invokeMap=Mr((function(e,t){return"function"==typeof e?new Tn(this):this.map((function(n){return _r(n,e,t)}))})),Tn.prototype.reject=function(e){return this.filter(So(Zi(e)))},Tn.prototype.slice=function(e,t){e=ra(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Tn(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),void 0!==t&&(n=(t=ra(t))<0?n.dropRight(-t):n.take(t-e)),n)},Tn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Tn.prototype.toArray=function(){return this.take(4294967295)},ur(Tn.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),i=Cn[r?"take"+("last"==t?"Right":""):t],s=r||/^find/.test(t);i&&(Cn.prototype[t]=function(){var t=this.__wrapped__,o=r?[1]:arguments,a=t instanceof Tn,u=o[0],l=a||zo(t),h=function(e){var t=i.apply(Cn,dt([e],o));return r&&c?t[0]:t};l&&n&&"function"==typeof u&&1!=u.length&&(a=l=!1);var c=this.__chain__,f=!!this.__actions__.length,d=s&&!c,p=a&&!f;if(!s&&l){t=p?t:new Tn(this);var g=e.apply(t,o);return g.__actions__.push({func:to,args:[h],thisArg:void 0}),new Rn(g,c)}return d&&p?e.apply(this,o):(g=this.thru(h),d?r?g.value()[0]:g.value():g)})})),ot(["pop","push","shift","sort","splice","unshift"],(function(e){var t=be[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);Cn.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var i=this.value();return t.apply(zo(i)?i:[],e)}return this[n]((function(n){return t.apply(zo(n)?n:[],e)}))}})),ur(Tn.prototype,(function(e,t){var n=Cn[t];if(n){var r=n.name+"";Se.call(bn,r)||(bn[r]=[]),bn[r].push({name:t,func:n})}})),bn[Ci(void 0,2).name]=[{name:"wrapper",func:void 0}],Tn.prototype.clone=function(){var e=new Tn(this.__wrapped__);return e.__actions__=vi(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=vi(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=vi(this.__views__),e},Tn.prototype.reverse=function(){if(this.__filtered__){var e=new Tn(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Tn.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=zo(e),r=t<0,i=n?e.length:0,s=function(e,t,n){var r=-1,i=n.length;for(;++r<i;){var s=n[r],o=s.size;switch(s.type){case"drop":e+=o;break;case"dropRight":t-=o;break;case"take":t=an(t,e+o);break;case"takeRight":e=on(e,t-o)}}return{start:e,end:t}}(0,i,this.__views__),o=s.start,a=s.end,u=a-o,l=r?a:o-1,h=this.__iteratees__,c=h.length,f=0,d=an(u,this.__takeCount__);if(!n||!r&&i==u&&d==u)return ni(e,this.__actions__);var p=[];e:for(;u--&&f<d;){for(var g=-1,y=e[l+=t];++g<c;){var v=h[g],_=v.iteratee,b=v.type,m=_(y);if(2==b)y=m;else if(!m){if(1==b)continue e;break e}}p[f++]=y}return p},Cn.prototype.at=no,Cn.prototype.chain=function(){return eo(this)},Cn.prototype.commit=function(){return new Rn(this.value(),this.__chain__)},Cn.prototype.next=function(){void 0===this.__values__&&(this.__values__=ta(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?void 0:this.__values__[this.__index__++]}},Cn.prototype.plant=function(e){for(var t,n=this;n instanceof On;){var r=Bs(n);r.__index__=0,r.__values__=void 0,t?i.__wrapped__=r:t=r;var i=r;n=n.__wrapped__}return i.__wrapped__=e,t},Cn.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Tn){var t=e;return this.__actions__.length&&(t=new Tn(this)),(t=t.reverse()).__actions__.push({func:to,args:[Is],thisArg:void 0}),new Rn(t,this.__chain__)}return this.thru(Is)},Cn.prototype.toJSON=Cn.prototype.valueOf=Cn.prototype.value=function(){return ni(this.__wrapped__,this.__actions__)},Cn.prototype.first=Cn.prototype.head,vt&&(Cn.prototype[vt]=function(){return this}),Cn}();$e._=Yt,void 0===(r=function(){return Yt}.call(t,n,t,e))||(e.exports=r)}).call(this)}).call(this,n(114)(e))},function(e,t,n){"use strict";n.r(t);var r=n(42),i=n.n(r);const s=require("rn-bridge");n(44);s.channel.on("message",e=>{s.channel.send(e)}),s.channel.send(`\n  Node.js initialized: ${i.a.join(["Hello","humans"]," ")}.\n`)},function(e,t,n){var r=n(45),i=n(46),s=n(16),o=n(47),a=n(5),u=n(48),l=n(56),h=n(25),c=n(57),f=n(0),d=n(58),p=n(62),g=n(14),y=n(29),v=n(67),_=n(7),b=n(32),m=n(33),w=n(34),x=n(75),k=n(76),S=n(35),E=n(40),L=n(112);class B extends E{broadcast(e){const t=this.local.handlers,n=this.encoding.encode(e);for(const e of t.peers)e.extension(this.id,n)}send(e,t){t.extension(this.id,this.encode(e))}}var C={sign:(e,t,n)=>n(null,_.sign(e,t)),verify:(e,t,n,r)=>r(null,_.verify(e,t,n))};function A(e,t,i){if(!(this instanceof A))return new A(e,t,i);var s;if(L.call(this),"string"==typeof e&&(s=e,e=function(e){try{var t="bitfield"===e?n(113):null}catch(e){}return d(e,{directory:s,lock:t})}),"function"!=typeof e)throw new Error("Storage should be a function or string");"string"==typeof t&&(t=Buffer.from(t,"hex")),Buffer.isBuffer(t)||i||(i=t,t=null),i||(i={});var o=this,a=i.secretKey||null;"string"==typeof a&&(a=Buffer.from(a,"hex")),this.noiseKeyPair=i.noiseKeyPair||S.keyPair(),this.live=!1!==i.live,this.sparse=!!i.sparse,this.length=0,this.byteLength=0,this.maxRequests=i.maxRequests||16,this.key=t||i.key||null,this.discoveryKey=this.key&&_.discoveryKey(this.key),this.secretKey=a,this.bitfield=null,this.tree=null,this.writable=!!i.writable,this.readable=!0,this.downloading=!1!==i.downloading,this.uploading=!1!==i.uploading,this.allowPush=!!i.allowPush,this.peers=[],this.ifAvailable=new w,this.extensions=B.createLocal(this),this.crypto=i.crypto||C,this._onwrite=i.onwrite||null,this._expectedLength=-1,this._indexing=!!i.indexing,this._createIfMissing=!1!==i.createIfMissing,this._overwrite=!!i.overwrite,this._storeSecretKey=!1!==i.storeSecretKey,this._alwaysIfAvailable=!!i.ifAvailable,this._merkle=null,this._storage=v(e,i),this._batch=c(this._onwrite?function e(t,n){if(!o._merkle)return o._reloadMerkleStateBeforeAppend(e,t,n);o._appendHook(t,n)}:function e(t,n){if(!o._merkle)return o._reloadMerkleStateBeforeAppend(e,t,n);o._append(t,n)}),this.timeouts=i.timeouts||{get(e){e(null)},update(e){e(null)}},this._seq=0,this._waiting=[],this._selections=[],this._reserved=g(),this._synced=null,this._downloadingSet="boolean"==typeof i.downloading,this._stats=void 0===i.stats||i.stats?{downloadedBlocks:0,downloadedBytes:0,uploadedBlocks:0,uploadedBytes:0}:null,this._codec=N(i.valueEncoding),this._sync=r((function(e,t){o._syncBitfield(t)})),this.sparse||this.download({start:0,end:-1}),this.sparse&&i.eagerUpdate&&this.update((function e(t){t&&o.emit("update-error",t),o.update(e)})),this.open((function(e){e&&o.emit("error",e)}))}function O(){}function R(e,t){return e&&e.index===t.index&&0===Buffer.compare(e.hash,t.hash)}function T(e,t){return e+t.size}function z(e){return 0==(1&e)}function N(e){return h("json"===e?"ndjson":e)}function K(e,t){return function(n,r){if(n)return t(n);try{r=e.decode(r)}catch(n){return t(n)}t(null,r)}}function P(e,t){var n=!1,r=setTimeout((function(){n=!0;var t=new Error("ETIMEDOUT");t.code="ETIMEDOUT",e(t)}),t);return function(t,i){if(n)return;clearTimeout(r),e(t,i)}}function j(e){return 1024*Math.floor(e/1024/1024)*1024}function M(e,t,n){var r=new Error(n);return r.code=e,r.errno=t,r}function q(e,t){e.ready(t)}function U(e,t,n,r){e.crypto.verify(t,n,e.key,(function(i,s){if(i||s)return r(i,s);e.crypto.verify(t.slice(0,32),n,e.key,r)}))}e.exports=A,f(A,L),A.discoveryKey=_.discoveryKey,A.prototype[b]=function(e,t){var n="";if("number"==typeof t.indentationLvl)for(;n.length<t.indentationLvl;)n+=" ";return"Hypercore(\n"+n+"  key: "+t.stylize(this.key&&m(this.key),"string")+"\n"+n+"  discoveryKey: "+t.stylize(this.discoveryKey&&m(this.discoveryKey),"string")+"\n"+n+"  opened: "+t.stylize(this.opened,"boolean")+"\n"+n+"  sparse: "+t.stylize(this.sparse,"boolean")+"\n"+n+"  writable: "+t.stylize(this.writable,"boolean")+"\n"+n+"  length: "+t.stylize(this.length,"number")+"\n"+n+"  byteLength: "+t.stylize(this.byteLength,"number")+"\n"+n+"  peers: "+t.stylize(this.peers.length,"number")+"\n"+n+")"},Object.defineProperty(A.prototype,"remoteLength",{enumerable:!0,get:function(){for(var e=0,t=0;t<this.peers.length;t++){var n=this.peers[t].remoteLength;n>e&&(e=n)}return e}}),Object.defineProperty(A.prototype,"stats",{enumerable:!0,get:function(){if(!this._stats)return null;for(var e=[],t=0;t<this.peers.length;t++){var n=this.peers[t];e[t]=n.stats}return{peers:e,totals:this._stats}}}),A.prototype.replicate=function(e,t){this._selections.length&&-1===this._selections[0].end||this.sparse||t&&t.live||this.download({start:0,end:-1}),function(e){return!S.isProtocolStream(e)&&"object"==typeof e&&!!e&&"boolean"==typeof e.initiator}(e)&&!t&&(e=(t=e).initiator),(t=t||{}).stats=!!this._stats,t.noise=!(!1===t.noise&&!1===t.encrypted);var n=k(this,e,t);return this.emit("replicating",n),n},A.prototype.registerExtension=function(e,t){return this.extensions.add(e,t)},A.prototype.onextensionupdate=function(){for(const e of this.peers)e._updateOptions()},A.prototype.setDownloading=function(e){this.downloading===e&&this._downloadingSet||(this.downloading=e,this._downloadingSet=!0,this.ready(e=>{if(!e)for(const e of this.peers)e.setDownloading(this.downloading)}))},A.prototype.setUploading=function(e){e!==this.uploading&&(this.uploading=e,this.ready(e=>{if(!e)for(const e of this.peers)e.setUploading(this.uploading)}))},A.prototype.ready=A.prototype.open,A.prototype.update=function(e,t){if("function"==typeof e)return this.update(-1,e);"number"==typeof e&&(e={minLength:e}),e||(e={}),t||(t=O);var n=this,r="number"==typeof e.minLength?e.minLength:-1;this.ready((function(i){if(i)return t(i);if(-1===r&&(r=n.length+1),n.length>=r)return t(null);n.writable&&(t=n._writeStateReloader(t));var s={hash:!1!==e.hash,bytes:0,index:r-1,options:e,update:!0,callback:t};n._waiting.push(s),("boolean"==typeof e.ifAvailable?e.ifAvailable:n._alwaysIfAvailable)&&n._ifAvailable(s,r),n._updatePeers()}))},A.prototype.setExpectedLength=function(e){this._expectedLength=e,this.ready(e=>{if(!(e||(this.ifAvailable.ready(()=>{this._expectedLength=-1}),-1===this._expectedLength||this._expectedLength>this.length)))for(const e of this._waiting)e.update&&e.ifAvailable&&e.callback(new Error("Expected length is less than current length"))})},A.prototype._ifAvailable=function(e,t){var n=e.callback,r=!1,s=this;if(e.callback=o,e.ifAvailable=!0,this._expectedLength>-1&&this._expectedLength<=this.length)return process.nextTick(e.callback,new Error("Expected length is less than current length"));function o(t){if(!r){r=!0;var o=s._waiting.indexOf(e);o>-1&&i(s._waiting,o),n(t)}}this.timeouts.update((function(){if(s.closed)return o(new Error("Closed"));process.nextTick(q,s.ifAvailable,(function(){if(s.closed)return o(new Error("Closed"));s.length>=t||s.remoteLength>=t||o(new Error("No update available from peers"))}))}))},A.prototype._ifAvailableGet=function(e){var t=e.callback,n=!1,r=this;function s(s,o){if(!n){n=!0;var a=r._waiting.indexOf(e);a>-1&&i(r._waiting,a),t(s,o)}}e.callback=s,r.timeouts.get((function(){if(r.closed)return s(new Error("Closed"));process.nextTick(q,r.ifAvailable,(function(){if(r.closed)return s(new Error("Closed"));for(var t=0;t<r.peers.length;t++){if(r.peers[t].remoteBitfield.get(e.index))return}s(new Error("Block not available from peers"))}))}))},A.prototype._writeStateReloader=function(e){var t=this;return function(n){if(n)return e(n);t._reloadMerkleState(e)}},A.prototype._reloadMerkleState=function(e){var t=this;this._roots(t.length,(function(n,r){if(n)return e(n);t._merkle=o(_,r),e(null)}))},A.prototype._reloadMerkleStateBeforeAppend=function(e,t,n){this._reloadMerkleState((function(r){if(r)return n(r);e(t,n)}))},A.prototype._open=function(e){var t=this,n=!1,r=!0;function i(i,s){if(i)return e(i);if(!s.key&&s.bitfield.length&&(t._overwrite=!0),t._overwrite&&(s.bitfield=[],s.key=s.secretKey=null),t.bitfield=p(s.bitfieldPageSize,s.bitfield),t.tree=y(t.bitfield.tree),t.length=t.tree.blocks(),t._seq=t.length,s.key&&t.key&&0!==Buffer.compare(s.key,t.key))return t._forceClose(e,new Error("Another hypercore is stored here"));if(s.key&&(t.key=s.key),s.secretKey&&(t.secretKey=s.secretKey),!t.length)return a(null,null);function a(i,u){if(t.length&&(t.live=!!u),(n||!t.key)&&!t._createIfMissing)return t._forceClose(e,new Error("No hypercore is stored here"));if(!t.key&&t.live){var l=_.keyPair();t.secretKey=l.secretKey,t.key=l.publicKey}var h=!!t.secretKey||null===t.key;if(!h&&t.writable)return t._forceClose(e,new Error("Feed is not writable"));t.writable=h,t._downloadingSet||(t.downloading=!h),t.discoveryKey=t.key&&_.discoveryKey(t.key),t._storeSecretKey&&!t.secretKey&&(t._storeSecretKey=!1);var c=n||!x(t.key,s.key),f=t._storeSecretKey&&(n||!x(t.secretKey,s.secretKey)),d=1+(c?1:0)+(f?1:0)+(t._overwrite?1:0),p=null;function g(n){if(n&&(p=n),!--d)return p?t._forceClose(e,p):void t._roots(t.length,y)}function y(n,i){return n&&r?(r=!1,t.length--,void t._storage.getSignature(t.length-1,a)):n?t._forceClose(e,n):(t._merkle=o(_,i),t.byteLength=i.reduce(T,0),t.emit("ready"),void e(null))}c&&t._storage.key.write(0,t.key,g),f&&t._storage.secretKey.write(0,t.secretKey,g),t._overwrite&&t._storage.bitfield.del(32,1/0,g),g(null)}t._storage.getSignature(t.length-1,a)}this._storage.openKey((function(e,r){if(!r||t._overwrite||t.key||(t.key=r),!t.key&&t.live){var s=_.keyPair();t.secretKey=s.secretKey,t.key=s.publicKey,n=!0}t.discoveryKey=t.key&&_.discoveryKey(t.key),t._storage.open({key:t.key,discoveryKey:t.discoveryKey},i)}))},A.prototype.download=function(e,t){if("function"==typeof e)return this.download(null,e);if("number"==typeof e&&(e={start:e,end:e+1}),Array.isArray(e)&&(e={blocks:e}),e||(e={}),t||(t=O),!this.readable)return t(new Error("Feed is closed"));if(e.blocks&&"number"!=typeof e.start){for(var n=-1,r=0,i=0;i<e.blocks.length;i++){const t=e.blocks[i];(-1===n||t<n)&&(n=t),t>=r&&(r=t+1)}e.start=-1===n?0:n,e.end=r}var s={_index:this._selections.length,hash:!!e.hash,iterator:null,start:e.start||0,end:e.end||-1,want:0,linear:!!e.linear,blocks:e.blocks||null,blocksDownloaded:0,requested:0,callback:t};return s.want=j(s.start),this._selections.push(s),this._updatePeers(),s},A.prototype.undownload=function(e){if("number"==typeof e&&(e={start:e,end:e+1}),e||(e={}),e.callback&&e._index>-1)return s.remove(this._selections,e),void process.nextTick(e.callback,M("ECANCELED",-11,"Download was cancelled"));for(var t=e.start||0,n=e.end||-1,r=!!e.hash,i=!!e.linear,o=0;o<this._selections.length;o++){var a=this._selections[o];if(a.start===t&&a.end===n&&a.hash===r&&a.linear===i)return s.remove(this._selections,a),void process.nextTick(e.callback,M("ECANCELED",-11,"Download was cancelled"))}},A.prototype.digest=function(e){return this.tree.digest(2*e)},A.prototype.proof=function(e,t,n){if("function"==typeof t)return this.proof(e,null,t);if(!this.opened)return this._readyAndProof(e,t,n);t||(t={});var r=this.tree.proof(2*e,t);if(!r)return n(new Error("No proof available for this index"));var i=this.live&&!!r.verifiedBy,s=r.nodes.length+(i?1:0),o=null,a=null,u=new Array(r.nodes.length);if(!s)return n(null,{nodes:u,signature:null});for(var l=0;l<r.nodes.length;l++)this._storage.getNode(r.nodes[l],h);function h(e,t){if(e&&(o=e),t&&(u[r.nodes.indexOf(t.index)]=t),!--s)return o?n(o):void n(null,{nodes:u,signature:a})}i&&this._storage.getSignature(r.verifiedBy/2-1,(function(e,t){t&&(a=t);h(e,null)}))},A.prototype._readyAndProof=function(e,t,n){var r=this;this.ready((function(i){if(i)return n(i);r.proof(e,t,n)}))},A.prototype.put=function(e,t,n,r){if(!this.opened)return this._readyAndPut(e,t,n,r);this._putBuffer(e,null===t?null:this._codec.encode(t),n,null,r)},A.prototype.cancel=function(e,t){if("symbol"!=typeof e){t||(t=e+1);for(var n=this._selections.length-1;n>=0;n--){var r=this._selections[n];e<=r.start&&r.end<=t&&this.undownload(r)}}this.opened?this._cancel(e,t):this._readyAndCancel(e,t)},A.prototype._cancel=function(e,t){var n=0;if("symbol"!=typeof e){for(n=e;n<t;n++)this._reserved.set(n,!1);for(n=this._waiting.length-1;n>=0;n--){var r=this._waiting[n];(e<=r.start&&r.end<=t||e<=r.index&&r.index<t)&&(i(this._waiting,n),r.callback&&process.nextTick(r.callback,new Error("Request cancelled")))}}else for(n=this._waiting.length-1;n>=0;n--){const t=this._waiting[n];if(t.options.cancel===e)return i(this._waiting,n),this._reserved.set(t.index,!1),t.callback&&process.nextTick(t.callback,new Error("Request cancelled")),void this._updatePeers()}},A.prototype.clear=function(e,t,n,r){if("function"==typeof t)return this.clear(e,e+1,null,t);if("function"==typeof n)return this.clear(e,t,null,n);n||(n={}),t||(t=e+1),r||(r=O);var i=this,s=0===e?0:"number"==typeof n.byteOffset?n.byteOffset:-1,o="number"==typeof n.byteLength?n.byteLength:-1;this.ready((function(a){if(a)return r(a);for(var u=!1,l=e;l<t;l++)i.bitfield.set(l,!1)&&(u=!0);if(!u)return process.nextTick(r);if(i._unannounce({start:e,length:t-e}),!1===n.delete||i._indexing)return h();if(s>-1)return c(null,s);function h(){i.emit("clear",e,t),i._sync(null,r)}function c(e,n){return e?r(e):(s=n,o>-1?f(null,o+s):t===i.length?f(null,i.byteLength):void i._storage.dataOffset(t,[],f))}function f(e,t){return e?r(e):i._storage.data.del?void i._storage.data.del(s,t-s,h):h()}i._storage.dataOffset(e,[],c)}))},A.prototype.signature=function(e,t){return"function"==typeof e?this.signature(this.length-1,e):e<0||e>=this.length?t(new Error("No signature available for this index")):void this._storage.nextSignature(e,t)},A.prototype.verify=function(e,t,n){var r=this;this.rootHashes(e,(function(i,s){if(i)return n(i);var o=_.signable(s,e+1);U(r,o,t,(function(e,t){return e?n(e):t?n(null,!0):n(new Error("Signature verification failed"))}))}))},A.prototype.rootHashes=function(e,t){this._getRootsToVerify(2*e+2,{},[],t)},A.prototype.seek=function(e,t,n){if("function"==typeof t)return this.seek(e,null,t);if(t||(t={}),!this.opened)return this._readyAndSeek(e,t,n);var r=this;if(e===this.byteLength)return process.nextTick(n,null,this.length,0);this._seek(e,(function(i,s,o){if(!i&&z(s))return function(t,i){for(var s=0;s<r.peers.length;s++)r.peers[s].haveBytes(e);n(null,t,i)}(s/2,o);if(!1===t.wait)return n(i||new Error("Unable to seek to this offset"));var u=t.start||0,l=t.end||-1;if(!i){var h=a.leftSpan(s)/2,c=a.rightSpan(s)/2+1;h>u&&(u=h),(c<l||-1===l)&&(l=c)}if(l>-1&&l<=u)return n(new Error("Unable to seek to this offset"));var f={hash:!1!==t.hash,bytes:e,index:-1,ifAvailable:t&&"boolean"==typeof t.ifAvailable?t.ifAvailable:r._alwaysIfAvailable,start:u,end:l,want:j(u),requested:0,callback:n||O};r._waiting.push(f),r._updatePeers(),f.ifAvailable&&r._ifAvailableSeek(f)}))},A.prototype._ifAvailableSeek=function(e){var t=this,n=e.callback;function r(r){var s=t._waiting.indexOf(e);s>-1&&(i(t._waiting,s),e.callback=O,n(r))}t.timeouts.get((function(){if(t.closed)return r(new Error("Closed"));process.nextTick(q,t.ifAvailable,(function(){if(t.closed)return r(new Error("Closed"));let n=!1;for(const r of t.peers){const i=r._iterator;let s=i.seek(e.start).next(!0);for(;t.tree.get(2*s)&&s>-1;)s=i.next(!0);if(s>-1&&(-1===e.end||s<e.end)){n=!0;break}}n||r(new Error("Seek not available from peers"))}))}))},A.prototype._seek=function(e,t){if(0===e)return t(null,0,0);var n=this,r=a.fullRoots(2*this.length),i=0;function s(r){if(z(r))return t(null,i,e);for(var s=a.leftChild(r);!n.tree.get(s);){if(z(s))return t(null,i,e);s=a.leftChild(s)}n._storage.getNode(s,o)}function o(n,r){if(n)return t(n);r.size>e?(i=r.index,s(r.index)):(e-=r.size,a.parent(r.index)===i?s(i=a.sibling(r.index)):s(a.sibling(r.index)))}!function o(a,u){if(a)return t(a);if(u){if(u.size>e)return i=u.index,s(u.index);e-=u.size}if(!r.length)return t(new Error("Out of bounds"));n._storage.getNode(r.shift(),o)}(null,null)},A.prototype._readyAndSeek=function(e,t,n){var r=this;this.ready((function(i){if(i)return n(i);r.seek(e,t,n)}))},A.prototype._getBuffer=function(e,t){this._storage.getData(e,t)},A.prototype._putBuffer=function(e,t,n,r,i){for(var s=this,o=-1,u=[],l=2*e,h=t?0:1;;){if(this.tree.get(l)){o=l;break}var c=a.sibling(l);if(l=a.parent(l),h<n.nodes.length&&n.nodes[h].index===c)h++;else{if(!this.tree.get(c))break;u.push(c)}}-1===o&&this.tree.get(l)&&(o=l);var f=null,d=null,p=new Array(u.length),g=u.length+(o>-1?1:0);for(h=0;h<u.length;h++)this._storage.getNode(u[h],y);function y(e,t){e&&(f=e),t&&(p[u.indexOf(t.index)]=t),--g||v(f)}function v(o){if(o)return i(o);s._verifyAndWrite(e,t,n,p,d,r,i)}o>-1&&this._storage.getNode(o,(function(e,t){e&&(f=e);t&&(d=t);--g||v(f)})),u.length||-1!==o||v(null)},A.prototype._readyAndPut=function(e,t,n,r){var i=this;this.ready((function(s){if(s)return r(s);i.put(e,t,n,r)}))},A.prototype._write=function(e,t,n,r,i,s){if(!this._onwrite)return this._writeAfterHook(e,t,n,r,i,s);this._onwrite(e,t,i,function(e,t,n,r,i,s,o){return function(a){if(a)return o(a);e._writeAfterHook(t,n,r,i,s,o)}}(this,e,t,n,r,i,s))},A.prototype._writeAfterHook=function(e,t,n,r,i,s){for(var o=this,a=n.length+1+(r?1:0),u=null,l=0;l<n.length;l++)this._storage.putNode(n[l].index,n[l],h);function h(r){if(r&&(u=r),!--a)return u?s(u):void o._writeDone(e,t,n,i,s)}t?this._storage.putData(e,t,n,h):h(),r&&this._storage.putSignature(r.index,r.signature,h)},A.prototype._writeDone=function(e,t,n,r,i){for(var s=0;s<n.length;s++)this.tree.set(n[s].index);this.tree.set(2*e),t&&(this.bitfield.set(e,!0)&&(this._stats&&(this._stats.downloadedBlocks+=1,this._stats.downloadedBytes+=t.length),this.emit("download",e,t,r)),this.peers.length&&this._announce({start:e},r),this.writable||(this._synced||(this._synced=this.bitfield.iterator(0,this.length)),-1===this._synced.next()&&(this._synced.range(0,this.length),this._synced.seek(0),-1===this._synced.next()&&this.emit("sync")))),this._sync(null,i)},A.prototype._verifyAndWrite=function(e,t,n,r,i,s,o){var u=[],l=n.nodes,h=t?new v.Node(2*e,_.data(t),t.length):l.shift();if(R(i,h))this._write(e,t,u,null,s,o);else for(;;){var c=null,f=a.sibling(h.index);if(l.length&&l[0].index===f)c=l.shift(),u.push(c);else{if(!r.length||r[0].index!==f)return void this._verifyRootsAndWrite(e,t,h,n,u,s,o);c=r.shift()}if(u.push(h),R(i,h=new v.Node(a.parent(h.index),_.parent(h,c),h.size+c.size)))return void this._write(e,t,u,null,s,o)}},A.prototype._verifyRootsAndWrite=function(e,t,n,r,i,s,o){var u=r.nodes,l=u.length?u[u.length-1].index:n.index,h=Math.max(a.rightSpan(n.index),a.rightSpan(l))+2,c=h/2,f=this;this._getRootsToVerify(h,n,u,(function(n,a,u){if(n)return o(n);var l=_.signable(a,c),d=null;if(f.length&&f.live&&!r.signature)return o(new Error("Remote did not include a signature"));if(r.signature)U(f,l,r.signature,(function(e,t){return e?o(e):t?(d={index:h/2-1,signature:r.signature},void p()):o(new Error("Remote signature could not be verified"))}));else{if(0!==Buffer.compare(l.slice(0,32),f.key))return o(new Error("Remote checksum failed"));p()}function p(){f.live=!!d,c>f.length&&(f.writable&&(f._merkle=null),f.length=c,f._seq=c,f.byteLength=a.reduce(T,0),f._synced&&f._synced.seek(0,f.length),f.emit("append")),f._write(e,t,i.concat(u),d,s,o)}}))},A.prototype._getRootsToVerify=function(e,t,n,r){for(var i=a.fullRoots(e),s=new Array(i.length),o=[],u=null,l=s.length,h=0;h<i.length;h++)i[h]===t.index?(o.push(t),c(null,t)):n.length&&i[h]===n[0].index?(o.push(n[0]),c(null,n.shift())):this.tree.get(i[h])?this._storage.getNode(i[h],c):c(new Error("Missing tree roots needed for verify"));function c(e,t){e&&(u=e),t&&(s[i.indexOf(t.index)]=t),--l||function(e){if(e)return r(e);r(null,s,o)}(u)}},A.prototype._announce=function(e,t){for(var n=0;n<this.peers.length;n++){var r=this.peers[n];r!==t&&r.have(e)}},A.prototype._unannounce=function(e){for(var t=0;t<this.peers.length;t++)this.peers[t].unhave(e)},A.prototype.downloaded=function(e,t,n){const r=this.bitfield.total(e,t);return n&&process.nextTick(n,null,r),r},A.prototype.has=function(e,t,n){if("function"==typeof t)return this.has(e,void 0,t);if(void 0===t){const t=this.bitfield.get(e);return n&&process.nextTick(n,null,t),t}const r=t-e===this.bitfield.total(e,t);return n&&process.nextTick(n,null,r),r},A.prototype.head=function(e,t){if("function"==typeof e)return this.head({},e);var n=this;function r(){0===n.length?t(new Error("feed is empty")):n.get(n.length-1,e,t)}this.ready((function(i){if(i)return t(i);e&&e.update?n.update(e,r):process.nextTick(r)}))},A.prototype.get=function(e,t,n){if("function"==typeof t)return this.get(e,null,t);if((t={...t}).cancel||(t.cancel=Symbol("hypercore-get")),!this.opened)return this._readyAndGet(e,t,n);if(!this.readable)return process.nextTick(n,new Error("Feed is closed")),t.cancel;if(t.timeout&&(n=P(n,t.timeout)),!this.bitfield.get(e)){if(t&&!1===t.wait)return process.nextTick(n,new Error("Block not downloaded"));var r={bytes:0,hash:!1,index:e,options:t,requested:0,callback:n};if(this._waiting.push(r),(t&&"boolean"==typeof t.ifAvailable?t.ifAvailable:this._alwaysIfAvailable)&&this._ifAvailableGet(r),this._updatePeers(),t.onwait){const n=t.onwait;t.onwait=null,n(e)}return t.cancel}return t&&t.valueEncoding?n=K(N(t.valueEncoding),n):this._codec!==h.binary&&(n=K(this._codec,n)),this._getBuffer(e,n),t.cancel},A.prototype._readyAndGet=function(e,t,n){var r=this;return this.ready((function(i){if(i)return n(i);r.get(e,t,n)})),t.cancel},A.prototype.getBatch=function(e,t,n,r){if("function"==typeof n)return this.getBatch(e,t,null,n);if(!this.opened)return this._readyAndGetBatch(e,t,n,r);var i=this,s=!n||!1!==n.wait;return this.has(e,t)?this._getBatch(e,t,n,r):s?(n&&n.timeout&&(r=P(r,n.timeout)),void this.download({start:e,end:t},(function(s){if(s)return r(s);i._getBatch(e,t,n,r)}))):process.nextTick(r,new Error("Block not downloaded"))},A.prototype._getBatch=function(e,t,n,r){var i=n&&n.valueEncoding,s=i?N(i):this._codec;this._storage.getDataBatch(e,t-e,(function(e,t){if(e)return r(e);for(var n=new Array(t.length),i=0;i<t.length;i++)try{n[i]=s?s.decode(t[i]):t[i]}catch(e){return r(e)}r(null,n)}))},A.prototype._readyAndGetBatch=function(e,t,n,r){var i=this;this.ready((function(s){if(s)return r(s);i.getBatch(e,t,n,r)}))},A.prototype._updatePeers=function(){for(var e=0;e<this.peers.length;e++)this.peers[e].update()},A.prototype.createWriteStream=function(e){var t=this,n=e&&e.maxBlockSize||0;return u.obj((function(e,r){if(n)for(let t=0;t<e.length;t++){let r=e[t];if(r.length>n){const i=[];for(;r.length>n;)i.push(r.slice(0,n)),r=r.slice(n);r.length&&i.push(r),e.splice(t,1,...i),t+=i.length-1}}t.append(e,r)}))},A.prototype.createReadStream=function(e){e||(e={});var t=this,n=e.start||0,r="number"==typeof e.end?e.end:-1,i=!!e.live,s=!1!==e.snapshot,o=e.batch||1,a=0,u=0,h=!0,c=this.download({start:n,end:r,linear:!0}),f=l.obj(d).on("end",p).on("close",p);return f;function d(l,c){if(!t.opened)return function(e,n){t.ready((function(t){if(t)return n(t);d(e,n)}))}(l,c);if(!t.readable)return c(new Error("Feed is closed"));if(h){if(-1===r&&(i?r=1/0:s&&(r=t.length),n>r))return c(null,null);e.tail&&(n=t.length),h=!1}if(n===r||-1===r&&n===t.length)return c(null,null);1!==o?(a=n+o,u=r===1/0?t.length:r,a>u&&(a=u),t.downloaded(n,a)?t.getBatch(g(a),a,e,(e,t)=>{if(e||0===t.length)c(e);else{for(var n=t.length-1,r=0;r<n;r++)f.push(t[r]);c(null,t[n])}}):t.get(g(n+1),e,c)):t.get(g(n+1),e,c)}function p(){c&&(t.undownload(c),c=null)}function g(e){var t=n;return n=e,c.start=n,c.iterator&&(c.iterator.start=n),t}},A.prototype.finalize=function(e){this.key||(this.key=_.tree(this._merkle.roots),this.discoveryKey=_.discoveryKey(this.key)),this._storage.key.write(0,this.key,e)},A.prototype.append=function(e,t){t||(t=O);var n=this,r=Array.isArray(e)?e:[e];this._batch(r,(function(e){if(e)return t(e);var i=n._seq;n._seq+=r.length,t(null,i)}))},A.prototype.flush=function(e){this.append([],e)},A.prototype.destroyStorage=function(e){const t=this;this.close((function(n){n?e(n):t._storage.destroy(e)}))},A.prototype._close=function(e){const t=this;for(const e of this.peers)e._destroyed||e._close();this._forceClose((function(n){n||t.emit("close");e(n)}),null)},A.prototype._forceClose=function(e,t){var n=this;this.writable=!1,this.readable=!1,this._storage.close((function(r){r||(r=t),n._destroy(r||new Error("Feed is closed")),e(r)}))},A.prototype._destroy=function(e){for(this.ifAvailable.destroy();this._waiting.length;)this._waiting.pop().callback(e);for(;this._selections.length;)this._selections.pop().callback(e)},A.prototype._appendHook=function(e,t){var n=this,r=e.length,i=null;if(!r)return this._append(e,t);for(var s=0;s<e.length;s++)this._onwrite(s+this.length,e[s],null,o);function o(s){if(s&&(i=s),!--r)return i?t(i):void n._append(e,t)}},A.prototype._append=function(e,t){if(!this.opened)return this._readyAndAppend(e,t);if(!this.writable)return t(new Error("This feed is not writable. Did you create it?"));var n=this,r=1,i=0,s=null,o=new Array(e.length?2*e.length-1:0),a=2*this.length,u=new Array(e.length);if(!r)return t();for(var l=0;l<e.length;l++){var h=this._codec.encode(e[l]),c=this._merkle.next(h);if(h.length>8388608)return t(new Error("Individual blocks has be less than 8MB"));i+=h.length,u[l]=h;for(var f=0;f<c.length;f++){var d=c[f];d.index>=a&&d.index-a<o.length?o[d.index-a]=d:(r++,this._storage.putNode(d.index,d,p))}}function p(o){if(o&&(s=o),!--r){if(s)return t(s);var a=n.length;n.byteLength+=i;for(var u=0;u<e.length;u++)n.bitfield.set(n.length,!0),n.tree.set(2*n.length++);n.emit("append");var l=n.length-a>1?{start:a,length:n.length-a}:{start:a};n.peers.length&&n._announce(l),n._sync(null,t)}}this.live&&e.length&&(r++,this.crypto.sign(_.signable(this._merkle.roots,n.length+e.length),this.secretKey,(function(t,r){if(t)return p(t);n._storage.putSignature(n.length+e.length-1,r,p)}))),this._indexing||(r++,1===u.length?this._storage.data.write(this.byteLength,u[0],p):this._storage.data.write(this.byteLength,Buffer.concat(u),p)),this._storage.putNodeBatch(a,o,p)},A.prototype._readyAndAppend=function(e,t){var n=this;this.ready((function(r){if(r)return t(r);n._append(e,t)}))},A.prototype._readyAndCancel=function(e,t){var n=this;this.ready((function(){n._cancel(e,t)}))},A.prototype._pollWaiting=function(){for(var e=this._waiting.length,t=0;t<e;t++){var n=this._waiting[t];(n.bytes||this.bitfield.get(n.index)||n.hash&&this.tree.get(2*n.index))&&(i(this._waiting,t--),e--,n.bytes?this.seek(n.bytes,n,n.callback):n.update?this.update(n.index+1,n.callback):this.get(n.index,n.options,n.callback))}},A.prototype._syncBitfield=function(e){var t=this.bitfield.pages.updates.length,n=null,r=null;if(!t)return this._pollWaiting(),e(null);for(;null!==(n=this.bitfield.pages.lastUpdate());)this._storage.putBitfield(n.offset,n.buffer,i);function i(n){n&&(r=n),--t||e(r)}this._pollWaiting()},A.prototype._roots=function(e,t){var n=a.fullRoots(2*e),r=new Array(n.length),i=n.length,s=null;if(!i)return t(null,r);for(var o=0;o<n.length;o++)this._storage.getNode(n[o],u);function u(e,o){if(e&&(s=e),o&&(r[n.indexOf(o.index)]=o),!--i)return s?t(s):void t(null,r)}},A.prototype.audit=function(e){e||(e=O);var t=this,n={valid:0,invalid:0};this.ready((function(r){if(r)return e(r);var i=0,s=t.length;function o(e,r){if(e)return s(null,null);function s(e,s){var o=s&&_.data(s).equals(r.hash);o?n.valid++:n.invalid++,t.bitfield.set(i,o),i++,a()}t._storage.getData(i,s)}function a(){for(;i<s&&!t.bitfield.get(i);)i++;i>=s?t._sync(null,(function(t){if(t)return e(t);e(null,n)})):t._storage.getNode(2*i,o)}a()}))},A.prototype.extension=function(e,t){for(var n=this.peers,r=0;r<n.length;r++)n[r].extension(e,t)}},function(e,t){function n(e){}e.exports=function(e){var t=null,r=null,i=null,s=null;return function(e,t){s=e,o(t||n)};function o(n){if(r)return t||(t=[]),void t.push(n);var i=s;s=null,r=n,e(i,a)}function a(e){var s=r,a=i;if(i=null,r=null,t&&(i=t,t=null,o(n)),a)for(var u=0;u<a.length;u++)a[u](e);s(e)}}},function(e,t){e.exports=function(e,t){if(t>=e.length||t<0)return;var n=e.pop();if(t<e.length){var r=e[t];return e[t]=n,r}return n}},function(e,t,n){var r=n(5);function i(e,t){if(!(this instanceof i))return new i(e,t);if(!e||!e.leaf||!e.parent)throw new Error("opts.leaf and opts.parent required");this.roots=t||e.roots||[],this.blocks=this.roots.length?1+r.rightSpan(this.roots[this.roots.length-1].index)/2:0;for(var n=0;n<this.roots.length;n++){var s=this.roots[n];s&&!s.parent&&(s.parent=r.parent(s.index))}this._leaf=e.leaf,this._parent=e.parent}e.exports=i,i.prototype.next=function(e,t){Buffer.isBuffer(e)||(e=new Buffer(e)),t||(t=[]);var n=2*this.blocks++,i={index:n,parent:r.parent(n),hash:null,size:e.length,data:e};for(i.hash=this._leaf(i,this.roots),this.roots.push(i),t.push(i);this.roots.length>1;){var s=this.roots[this.roots.length-2],o=this.roots[this.roots.length-1];if(s.parent!==o.parent)break;this.roots.pop(),this.roots[this.roots.length-1]=i={index:s.parent,parent:r.parent(s.parent),hash:this._parent(s,o),size:s.size+o.size,data:null},t.push(i)}return t}},function(e,t,n){var r=n(17),i=n(0),s=n(55)([0]),o=function(e,t,n){if(!(this instanceof o))return new o(e,t,n);"function"==typeof e&&(n=t,t=e,e={}),r.Writable.call(this,e),this._worker=t,this._flush=n,this.destroyed=!1};i(o,r.Writable),o.obj=function(e,t,n){return"function"==typeof e?o.obj(null,e,t):(e||(e={}),e.objectMode=!0,new o(e,t,n))},o.prototype.end=function(e,t,n){return this._flush?"function"==typeof e?this.end(null,null,e):"function"==typeof t?this.end(e,null,t):(e&&this.write(e),this._writableState.ending||this.write(s),r.Writable.prototype.end.call(this,n)):r.Writable.prototype.end.apply(this,arguments)},o.prototype.destroy=function(e){this.destroyed||(this.destroyed=!0,e&&this.emit("error"),this.emit("close"))},o.prototype._write=function(e,t,n){e===s?this._flush(n):this._worker([e],n)},o.prototype._writev=function(e,t){var n=e.length;if(e[e.length-1].chunk===s&&(t=this._flusher(t),!--n))return t();for(var r=new Array(n),i=0;i<n;i++)r[i]=e[i].chunk;this._worker(r,t)},o.prototype._flusher=function(e){var t=this;return function(n){if(n)return e(n);t._flush(e)}},e.exports=o},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t){e.exports=require("buffer")},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},function(e,t,n){"use strict";var r=n(11).Buffer,i=n(2);e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},e.prototype.concat=function(e){if(0===this.length)return r.alloc(0);if(1===this.length)return this.head.data;for(var t,n,i,s=r.allocUnsafe(e>>>0),o=this.head,a=0;o;)t=o.data,n=s,i=a,t.copy(n,i),a+=o.data.length,o=o.next;return s},e}(),i&&i.inspect&&i.inspect.custom&&(e.exports.prototype[i.inspect.custom]=function(){var e=i.inspect({length:this.length});return this.constructor.name+" "+e})},function(e,t,n){e.exports=n(2).deprecate},function(e,t,n){"use strict";e.exports=s;var r=n(24),i=Object.create(n(6));function s(e){if(!(this instanceof s))return new s(e);r.call(this,e)}i.inherits=n(0),i.inherits(s,r),s.prototype._transform=function(e,t,n){n(null,e)}},function(e,t){var n=Object.prototype.toString,r="function"==typeof Buffer.alloc&&"function"==typeof Buffer.allocUnsafe&&"function"==typeof Buffer.from;e.exports=function(e,t,i){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return s=e,"ArrayBuffer"===n.call(s).slice(8,-1)?function(e,t,n){t>>>=0;var i=e.byteLength-t;if(i<0)throw new RangeError("'offset' is out of bounds");if(void 0===n)n=i;else if((n>>>=0)>i)throw new RangeError("'length' is out of bounds");return r?Buffer.from(e.slice(t,t+n)):new Buffer(new Uint8Array(e.slice(t,t+n)))}(e,t,i):"string"==typeof e?function(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!Buffer.isEncoding(t))throw new TypeError('"encoding" must be a valid string encoding');return r?Buffer.from(e,t):new Buffer(e,t)}(e,t):r?Buffer.from(e):new Buffer(e);var s}},function(e,t,n){var r=n(17).Readable,i=n(0);e.exports=o,o.ctor=a,o.obj=function(e,t){("function"==typeof e||Array.isArray(e))&&(t=e,e={});return(e=l(e)).objectMode=!0,e.highWaterMark=16,o(e,t)};var s=a();function o(e,t){("object"!=typeof e||Array.isArray(e))&&(t=e,e={});var n,r=new s(e);return r._from=Array.isArray(t)?(n=(n=t).slice(),function(e,t){var r=null,i=n.length?n.shift():null;i instanceof Error&&(r=i,i=null),t(r,i)}):t||u,r}function a(e,t){function n(t){if(!(this instanceof n))return new n(t);this._reading=!1,this._callback=function(e,t){if(i.destroyed)return;if(e)return i.destroy(e);if(null===t)return i.push(null);i._reading=!1,i.push(t)&&i._read(s)},this.destroyed=!1,r.call(this,t||e);var i=this,s=this._readableState.highWaterMark}return"function"==typeof e&&(t=e,e={}),e=l(e),i(n,r),n.prototype._from=t||u,n.prototype._read=function(e){this._reading||this.destroyed||(this._reading=!0,this._from(e,this._callback))},n.prototype.destroy=function(e){if(!this.destroyed){this.destroyed=!0;var t=this;process.nextTick((function(){e&&t.emit("error",e),t.emit("close")}))}},n}function u(){}function l(e){return e=e||{}}},function(e,t){e.exports=function(e){var t=!1,n=null,r=null,i=null;return function(o,a){t?(n||(n=[],r=[]),function(e,t){Array.isArray(t)?function(e,t){for(var n=0;n<t.length;n++)e.push(t[n])}(e,t):e.push(t)}(n,o),a&&r.push(a)):(a&&(i=[a]),t=!0,e(Array.isArray(o)?o:[o],s))};function s(o){i&&function(e,t){for(var n=0;n<e.length;n++)e[n](t)}(i,o),t=!1,i=r;var a=n;if(n=null,r=null,!a||!a.length){if(!i||!i.length)return void(i=null);a||(a=[])}t=!0,e(a,s)}}},function(e,t,n){var r=n(2).inherits,i=n(59),s=n(12),o=n(60),a=n(13),u=s.constants||n(61),l=u.O_RDONLY,h=u.O_RDWR|u.O_CREAT;function c(e,t){if(!(this instanceof c))return new c(e,t);i.call(this),t||(t={}),t.directory&&(e=a.join(t.directory,a.resolve("/",e).replace(/^\w+:\\/,""))),this.directory=t.directory||null,this.filename=e,this.fd=0,(t.writable||t.truncate)&&(this.preferReadonly=!1),this._size=t.size||t.length||0,this._truncate=!!t.truncate||this._size>0,this._rmdir=!!t.rmdir,this._lock=t.lock||p}function f(e,t,n){function r(r,o){return r?n.callback(r):(e.fd=o,e._lock(e.fd)?e._truncate&&t!==l?void s.ftruncate(e.fd,e._size,i):n.callback(null):n.callback(function(e){var t=new Error("ELOCKED: File is locked");return t.code="ELOCKED",t.path=e,t}(e.filename)))}function i(e){if(e)return o(e);n.callback(null)}function o(t){s.close(e.fd,(function(){e.fd=0,n.callback(t)}))}e.fd?s.close(e.fd,(function(n){if(n)return o(n);e.fd=0,s.open(e.filename,t,r)})):s.open(e.filename,t,r)}function d(e){e.callback(null,Buffer.alloc(0))}function p(e){return!0}e.exports=c,r(c,i),c.prototype._open=function(e){var t=this;o(a.dirname(this.filename),(function(n){if(n)return e.callback(n);f(t,h,e)}))},c.prototype._openReadonly=function(e){f(this,l,e)},c.prototype._write=function(e){var t=e.data,n=this.fd;s.write(n,t,0,e.size,e.offset,(function r(i,o){if(i)return e.callback(i);if(e.size-=o,e.offset+=o,!e.size)return e.callback(null);s.write(n,t,t.length-e.size,e.size,e.offset,r)}))},c.prototype._read=function(e){var t=e.data||Buffer.allocUnsafe(e.size),n=this.fd;if(!e.size)return process.nextTick(d,e);s.read(n,t,0,e.size,e.offset,(function r(i,o){if(i)return e.callback(i);if(!o)return e.callback(new Error("Could not satisfy length"));if(e.size-=o,e.offset+=o,!e.size)return e.callback(null,t);s.read(n,t,t.length-e.size,e.size,e.offset,r)}))},c.prototype._del=function(e){var t=this.fd;function n(t){e.callback(t)}s.fstat(t,(function(r,i){if(r)return e.callback(r);if(e.offset+e.size<i.size)return e.callback(null);s.ftruncate(t,e.offset,n)}))},c.prototype._stat=function(e){s.fstat(this.fd,(function(t,n){e.callback(t,n)}))},c.prototype._close=function(e){var t=this;s.close(this.fd,(function(n){if(n)return e.callback(n);t.fd=0,e.callback(null)}))},c.prototype._destroy=function(e){var t=this,n=this.directory&&a.resolve(a.join(this.directory,".")),r=a.resolve(a.dirname(this.filename));function i(t){if(r=a.join(r,".."),t||r===n)return e.callback(null);s.rmdir(r,i)}s.unlink(this.filename,(function(o){if(!t._rmdir||!n||r===n)return e.callback(o);s.rmdir(r,i)}))}},function(e,t,n){var r=n(10),i=n(0),s=g(new Error("Not readable")),o=g(new Error("Not writable")),a=g(new Error("Not deletable")),u=g(new Error("Not statable")),l=g(new Error("No readonly open"));function h(e){if(!(this instanceof h))return new h(e);r.EventEmitter.call(this),this._queued=[],this._pending=0,this._needsOpen=!0,this.opened=!1,this.closed=!1,this.destroyed=!1,e&&(e.openReadonly&&(this._openReadonly=e.openReadonly),e.open&&(this._open=e.open),e.read&&(this._read=e.read),e.write&&(this._write=e.write),e.del&&(this._del=e.del),e.stat&&(this._stat=e.stat),e.close&&(this._close=e.close),e.destroy&&(this._destroy=e.destroy)),this.preferReadonly=this._openReadonly!==l,this.readable=this._read!==s,this.writable=this._write!==o,this.deletable=this._del!==a,this.statable=this._stat!==u}function c(){}function f(e,t,n,r,i,s){this.type=t,this.offset=n,this.data=i,this.size=r,this.storage=e,this._sync=!1,this._callback=s,this._openError=null}function d(e,t){e._queued.push(t),e._pending||t._run()}function p(e){e.preferReadonly&&(e._needsOpen=!0,e.preferReadonly=!1)}function g(e){return function(t){y(t,e)}}function y(e,t,n){process.nextTick(v,e,t,n)}function v(e,t,n){e.callback(t,n)}e.exports=h,i(h,r.EventEmitter),h.prototype.read=function(e,t,n){this.run(new f(this,0,e,t,null,n))},h.prototype._read=s,h.prototype.write=function(e,t,n){n||(n=c),p(this),this.run(new f(this,1,e,t.length,t,n))},h.prototype._write=o,h.prototype.del=function(e,t,n){n||(n=c),p(this),this.run(new f(this,2,e,t,null,n))},h.prototype._del=a,h.prototype.stat=function(e){this.run(new f(this,3,0,0,null,e))},h.prototype._stat=u,h.prototype.open=function(e){if(e||(e=c),this.opened&&!this._needsOpen)return process.nextTick(e,null);d(this,new f(this,4,0,0,null,e))},h.prototype._open=g(null),h.prototype._openReadonly=l,h.prototype.close=function(e){if(e||(e=c),this.closed)return process.nextTick(e,null);d(this,new f(this,5,0,0,null,e))},h.prototype._close=g(null),h.prototype.destroy=function(e){e||(e=c),this.closed||this.close(c),d(this,new f(this,6,0,0,null,e))},h.prototype._destroy=g(null),h.prototype.run=function(e){this._needsOpen&&this.open(c),this._queued.length?this._queued.push(e):e._run()},f.prototype._maybeOpenError=function(e){if(4===this.type)for(var t=this.storage._queued,n=0;n<t.length;n++)t[n]._openError=e},f.prototype._unqueue=function(e){var t=this.storage,n=t._queued;if(e)this._maybeOpenError(e);else switch(this.type){case 4:t.opened||(t.opened=!0,t.emit("open"));break;case 5:t.closed||(t.closed=!0,t.emit("close"));break;case 6:t.destroyed||(t.destroyed=!0,t.emit("destroy"))}n.length&&n[0]===this&&n.shift(),--t._pending||function(e){var t=e._queued;for(;t.length>0;){var n=t[0].type>3;if(n&&e._pending||t[0]._run(),n)return;t.shift()}}(t)},f.prototype.callback=function(e,t){if(this._sync)return y(this,e,t);this._unqueue(e),this._callback(e,t)},f.prototype._openAndNotClosed=function(){var e=this.storage;return!(!e.opened||e.closed)||(e.opened?e.closed&&y(this,new Error("Closed")):y(this,this._openError||new Error("Not opened")),!1)},f.prototype._open=function(){var e=this.storage;return e.opened&&!e._needsOpen?y(this,null):e.closed?y(this,new Error("Closed")):(e._needsOpen=!1,void(e.preferReadonly?e._openReadonly(this):e._open(this)))},f.prototype._run=function(){var e=this.storage;switch(e._pending++,this._sync=!0,this.type){case 0:this._openAndNotClosed()&&e._read(this);break;case 1:this._openAndNotClosed()&&e._write(this);break;case 2:this._openAndNotClosed()&&e._del(this);break;case 3:this._openAndNotClosed()&&e._stat(this);break;case 4:this._open();break;case 5:e.closed||!e.opened?y(this,null):e._close(this);break;case 6:e.destroyed?y(this,null):e._destroy(this)}this._sync=!1}},function(e,t,n){var r=n(13),i=n(12),s=parseInt("0777",8);function o(e,t,n,a){"function"==typeof t?(n=t,t={}):t&&"object"==typeof t||(t={mode:t});var u=t.mode,l=t.fs||i;void 0===u&&(u=s&~process.umask()),a||(a=null);var h=n||function(){};e=r.resolve(e),l.mkdir(e,u,(function(n){if(!n)return h(null,a=a||e);switch(n.code){case"ENOENT":o(r.dirname(e),t,(function(n,r){n?h(n,r):o(e,t,h,r)}));break;default:l.stat(e,(function(e,t){e||!t.isDirectory()?h(n,a):h(null,a)}))}}))}e.exports=o.mkdirp=o.mkdirP=o,o.sync=function e(t,n,o){n&&"object"==typeof n||(n={mode:n});var a=n.mode,u=n.fs||i;void 0===a&&(a=s&~process.umask()),o||(o=null),t=r.resolve(t);try{u.mkdirSync(t,a),o=o||t}catch(i){switch(i.code){case"ENOENT":o=e(r.dirname(t),n,o),e(t,n,o);break;default:var l;try{l=u.statSync(t)}catch(e){throw i}if(!l.isDirectory())throw i}}return o}},function(e,t){e.exports=require("constants")},function(e,t,n){for(var r=n(5),i=n(26),s=n(28),o=n(14),a=[63,207,243,252],u=[0,192,240,252],l=[128,192,224,240,248,252,254,255],h=[127,191,223,239,247,251,253,254],c=new Array(256),f=new Array(256),d=new Array(256),p=new Array(256),g=new Array(256),y=0;y<256;y++){var v=(240&y)>>4,_=15&y,b=[0,1,1,2,1,2,2,3,1,2,2,3,2,3,3,4];c[y]=(15===v?3:0===v?0:1)<<2|(15===_?3:0===_?0:1),f[y]=c[y]<<4,d[y]=255===y?-1:8-Math.ceil(Math.log(256-y)/Math.log(2)),p[y]=255===y?-1:Math.floor(d[y]/2),g[y]=b[y>>4]+b[15&y]}function m(e,t){if(!(this instanceof m))return new m(e,t);e||(e=3584);var n=Buffer.allocUnsafe(e);if(n.fill(255),this.indexSize=e-2048-1024,this.pages=s(e,{deduplicate:n}),t)for(var i=0;i<t.length;i++)this.pages.set(i,t[i]);this.data=o({pageSize:1024,pageOffset:0,pages:this.pages,trackUpdates:!0}),this.tree=o({pageSize:2048,pageOffset:1024,pages:this.pages,trackUpdates:!0}),this.index=o({pageSize:this.indexSize,pageOffset:3072,pages:this.pages,trackUpdates:!0}),this.length=this.data.length,this._iterator=r.iterator(0)}function w(e,t,n){return!(8*t>=e.length)&&e.setByte(t,n)}function x(e){this.start=0,this.end=0,this._indexEnd=0,this._pos=0,this._byte=0,this._bitfield=e}function k(e){return e.index+e.factor/2-1}function S(e){return 1&e.index}e.exports=m,m.prototype.set=function(e,t){var n=7&e;e=(e-n)/8;var r=t?this.data.getByte(e)|128>>n:this.data.getByte(e)&h[n];return!!this.data.setByte(e,r)&&(this.length=this.data.length,this._setIndex(e,r),!0)},m.prototype.get=function(e){return this.data.get(e)},m.prototype.total=function(e,t){if((!e||e<0)&&(e=0),t||(t=this.data.length),t<e)return 0;t>this.data.length&&this._expand(t);var n=7&e,r=7&t,i=(e-n)/8,s=(t-r)/8,o=255-(n?l[n-1]:0),a=r?l[r-1]:0,u=this.data.getByte(i);if(i===s)return g[u&o&a];for(var h=g[u&o],c=i+1;c<s;c++)h+=g[this.data.getByte(c)];return h+=g[this.data.getByte(s)&a]},m.prototype.compress=function(e,t){if(!e&&!t)return i.encode(this.data.toBuffer());e+t>this.length&&(t=Math.max(1,this.length-e));for(var n=Buffer.alloc(Math.ceil(t/8)),r=e/this.data.pageSize/8,s=r+t/this.data.pageSize/8,o=r*this.data.pageSize;r<s;r++){var a=this.data.pages.get(r,!0);a&&a.buffer&&a.buffer.copy(n,r*this.data.pageSize-o,this.data.pageOffset,this.data.pageOffset+this.data.pageSize)}return i.encode(n)},m.prototype._setIndex=function(e,t){var n=3&e;e=(e-n)/4;var r=this.index,i=this._iterator,s=2*e,o=r.getByte(s)&a[n]|function(e){switch(e){case 255:return 192;case 0:return 0;default:return 64}}(t)>>2*n,u=r.length,l=this.pages.length*this.indexSize;for(i.seek(s);i.index<l&&r.setByte(i.index,o);)o=i.isLeft()?f[o]|c[r.getByte(i.sibling())]:c[o]|f[r.getByte(i.sibling())],i.parent();return u!==r.length&&this._expand(u),i.index!==s},m.prototype._expand=function(e){for(var t=r.fullRoots(2*e),n=this.index,i=this._iterator,s=0,o=0;o<t.length;o++){i.seek(t[o]),s=n.getByte(i.index);do{s=i.isLeft()?f[s]|c[n.getByte(i.sibling())]:c[s]|f[n.getByte(i.sibling())]}while(w(n,i.parent(),s))}},m.prototype.iterator=function(e,t){var n=new x(this);return n.range(e||0,t||this.length),n.seek(0),n},x.prototype.range=function(e,t){return this.start=e,this.end=t,this._indexEnd=2*Math.ceil(t/32),this.end>this._bitfield.length&&this._bitfield._expand(this.end),this},x.prototype.seek=function(e){if((e+=this.start)<this.start&&(e=this.start),e>=this.end)return this._pos=-1,this;var t=7&e;return this._pos=(e-t)/8,this._byte=this._bitfield.data.getByte(this._pos)|(t?l[t-1]:0),this},x.prototype.random=function(){var e=this.seek(Math.floor(Math.random()*(this.end-this.start))).next();return-1===e?this.seek(0).next():e},x.prototype.next=function(){if(-1===this._pos)return-1;for(var e=this._bitfield.data,t=d[this._byte];-1===t;)if(this._byte=e.getByte(++this._pos),-1===(t=d[this._byte])){if(this._pos=this._skipAhead(this._pos),-1===this._pos)return-1;this._byte=e.getByte(this._pos),t=d[this._byte]}this._byte|=l[t];var n=8*this._pos+t;return n<this.end?n:-1},x.prototype.peek=function(){if(-1===this._pos)return-1;var e=d[this._byte],t=8*this._pos+e;return t<this.end?t:-1},x.prototype._skipAhead=function(e){var t=this._bitfield.index,n=this._indexEnd,r=this._bitfield._iterator,i=3&e;r.seek((e-i)/4*2);for(var s=t.getByte(r.index)|u[i];-1===p[s];){if(r.isLeft()?r.next():(r.next(),r.parent()),k(r)>=n){for(;k(r)>=n&&S(r);)r.leftChild();if(k(r)>=n)return-1}s=t.getByte(r.index)}for(;r.factor>2;)p[s]<2?r.leftChild():r.rightChild(),s=t.getByte(r.index);var o=p[s];-1===o&&(o=4);var a=2*r.index+o;return a<=e?e+1:a}},function(e,t,n){e.exports={encode:n(64),decode:n(65),encodingLength:n(66)}},function(e,t){e.exports=function e(t,r,i){r=r||[];var s=i=i||0;for(;t>=n;)r[i++]=255&t|128,t/=128;for(;-128&t;)r[i++]=255&t|128,t>>>=7;return r[i]=0|t,e.bytes=i-s+1,r};var n=Math.pow(2,31)},function(e,t){e.exports=function e(t,n){var r,i=0,s=0,o=n=n||0,a=t.length;do{if(o>=a)return e.bytes=0,void(e.bytesRead=0);r=t[o++],i+=s<28?(127&r)<<s:(127&r)*Math.pow(2,s),s+=7}while(r>=128);return e.bytes=o-n,i}},function(e,t){var n=Math.pow(2,7),r=Math.pow(2,14),i=Math.pow(2,21),s=Math.pow(2,28),o=Math.pow(2,35),a=Math.pow(2,42),u=Math.pow(2,49),l=Math.pow(2,56),h=Math.pow(2,63);e.exports=function(e){return e<n?1:e<r?2:e<i?3:e<s?4:e<o?5:e<a?6:e<u?7:e<l?8:e<h?9:10}},function(e,t,n){var r=n(68),i=n(5),s=n(71);e.exports=a;var o=[];function a(e,t){if(!(this instanceof a))return new a(e,t);const n=s(t);this.treeCache=n.tree||null,this.dataCache=n.data||null,this.key=null,this.secretKey=null,this.tree=null,this.data=null,this.bitfield=null,this.signatures=null,this.create=e}function u(){}function l(e,t,n){var r=Buffer.alloc(32);return r[0]=5,r[1]=2,r[2]=87,r[3]=e,r[4]=0,r.writeUInt16BE(t,5),n&&(r[7]=n.length,r.write(n,8)),r}function h(e,t,n){this.index=e,this.hash=t,this.size=n}function c(e,t){for(var n=0;n<e.length;n++)if(e[n].index===t)return e[n];return null}function f(e){for(var t=0;t<e.length;t++)if(e[t])return!1;return!0}function d(e,t){e.close?e.close(t):t()}function p(e,t){e.destroy?e.destroy(t):t()}a.prototype.putData=function(e,t,n,r){r||(r=u);var i=this;if(!t.length)return r(null);this.dataOffset(e,n,(function(e,n,s){return e?r(e):s!==t.length?r(new Error("Unexpected data size")):void i.data.write(n,t,r)}))},a.prototype.getData=function(e,t){var n=this,r=this.dataCache&&this.dataCache.get(e);if(r)return process.nextTick(t,null,r);this.dataOffset(e,o,(function(r,i,s){if(r)return t(r);n.data.read(i,s,(r,i)=>r?t(r):(n.dataCache&&n.dataCache.set(e,i),t(null,i)))}))},a.prototype.nextSignature=function(e,t){var n=this;this._getSignature(e,(function(r,i){return r?t(r):f(i)?n.nextSignature(e+1,t):void t(null,{index:e,signature:i})}))},a.prototype.getSignature=function(e,t){this._getSignature(e,(function(e,n){return e?t(e):f(n)?t(new Error("No signature found")):void t(null,n)}))},a.prototype._getSignature=function(e,t){this.signatures.read(32+64*e,64,t)},a.prototype.putSignature=function(e,t,n){this.signatures.write(32+64*e,t,n)},a.prototype.dataOffset=function(e,t,n){var r=i.fullRoots(2*e),s=this,o=0,a=r.length,u=null,l=2*e;if(!a)return a=1,void p(null,null);for(var h=0;h<r.length;h++){var f=c(t,r[h]);f?p(null,f):this.getNode(r[h],p)}function d(e,t){if(e)return n(e);n(null,o,t.size)}function p(e,r){if(e&&(u=e),r&&(o+=r.size),!--a){if(u)return n(u);var i=c(t,l);i?d(null,i):s.getNode(l,d)}}},a.prototype.getDataBatch=function(e,t,n){var i=new Array(t),s=new Array(t),a=this;this.dataOffset(e,o,(function(o,u,l){if(o)return n(o);if(e++,--t<=0)return h(null,null);function h(e,t){if(e)return n(e);var i=s[0]=l;if(t)for(var o=1;o<s.length;o++)s[o]=r.decode(t,32+80*(o-1)),i+=s[o];a.data.read(u,i,c)}function c(e,t){if(e)return n(e);for(var r=0,o=0;o<i.length;o++)i[o]=t.slice(r,r+=s[o]);n(null,i)}a.tree.read(32+80*e,80*t-40,h)}))},a.prototype.getNode=function(e,t){if(this.treeCache){var n=this.treeCache.get(e);if(n)return t(null,n)}var i=this;this.tree.read(32+40*e,40,(function(n,s){if(n)return t(n);var o=s.slice(0,32),a=r.decode(s,32);if(!a&&f(o))return t(new Error("No node found"));var u=new h(e,o,a,null);i.treeCache&&i.treeCache.set(e,u),t(null,u)}))},a.prototype.putNodeBatch=function(e,t,n){n||(n=u);for(var i=Buffer.alloc(40*t.length),s=0;s<t.length;s++){var o=40*s,a=t[s];a&&(a.hash.copy(i,o),r.encode(a.size,i,32+o))}this.tree.write(32+40*e,i,n)},a.prototype.putNode=function(e,t,n){n||(n=u);var i=Buffer.allocUnsafe(40);t.hash.copy(i,0),r.encode(t.size,i,32),this.tree.write(32+40*e,i,n)},a.prototype.putBitfield=function(e,t,n){this.bitfield.write(32+e,t,n)},a.prototype.close=function(e){e||(e=u);var t=6,n=null;function r(r){r&&(n=r),--t||e(n)}d(this.bitfield,r),d(this.tree,r),d(this.data,r),d(this.key,r),d(this.secretKey,r),d(this.signatures,r)},a.prototype.destroy=function(e){e||(e=u);var t=6,n=null;function r(r){r&&(n=r),--t||e(n)}p(this.bitfield,r),p(this.tree,r),p(this.data,r),p(this.key,r),p(this.secretKey,r),p(this.signatures,r)},a.prototype.openKey=function(e,t){if("function"==typeof e)return this.openKey({},e);this.key||(this.key=this.create("key",e)),this.key.read(0,32,t)},a.prototype.open=function(e,t){if("function"==typeof e)return this.open({},e);var n=this,r=null,i=5;this.key||(this.key=this.create("key",e)),this.secretKey||(this.secretKey=this.create("secret_key",e)),this.tree||(this.tree=this.create("tree",e)),this.data||(this.data=this.create("data",e)),this.bitfield||(this.bitfield=this.create("bitfield",e)),this.signatures||(this.signatures=this.create("signatures",e));var s={bitfield:[],bitfieldPageSize:3584,secretKey:null,key:null};function o(e){e&&(r=e),--i||(r?t(r):t(null,s))}this.bitfield.read(0,32,(function(e,r){if(e&&"ELOCKED"===e.code)return t(e);r&&(s.bitfieldPageSize=r.readUInt16BE(5)),n.bitfield.write(0,l(0,s.bitfieldPageSize,null),(function(e){if(e)return t(e);!function(e,t,n,r){if(!0===e.statable)return function(e,t,n,r){e.stat((function(i,s){if(i)return r(null,[]);var o=[];!function i(a,u){if(a)return r(a);if(u){t+=u.length;for(var l=0;l<u.length;l+=n)o.push(u.slice(l,l+n))}var h=Math.min(s.size-t,32*n);if(!h)return r(null,o);e.read(t,h,i)}(null,null)}))}(e,t,n,r);var i=[];e.read(t,n,(function s(o,a){if(o)return r(null,i);i.push(a),e.read(t+i.length*n,n,s)}))}(n.bitfield,32,s.bitfieldPageSize,(function(e,t){t&&(s.bitfield=t),o(e)}))}))})),this.signatures.write(0,l(1,64,"Ed25519"),o),this.tree.write(0,l(2,40,"BLAKE2b"),o),this.secretKey.read(0,64,(function(e,t){t&&(s.secretKey=t),o(null)})),this.key.read(0,32,(function(e,t){t&&(s.key=t),o(null)}))},a.Node=h},function(e,t,n){var r=n(69),i=Math.pow(2,32);t.encodingLength=function(){return 8},t.encode=function(e,t,n){t||(t=r(8)),n||(n=0);var s=Math.floor(e/i),o=e-s*i;return t.writeUInt32BE(s,n),t.writeUInt32BE(o,n+4),t},t.decode=function(e,t){t||(t=0);var n=e.readUInt32BE(t),r=e.readUInt32BE(t+4);return n*i+r},t.encode.bytes=8,t.decode.bytes=8},function(e,t,n){var r=n(70),i=n(27);e.exports=function(e,t,n){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative');if(Buffer.alloc)return Buffer.alloc(e,t,n);var s=i(e);return 0===e?s:void 0===t?r(s,0):("string"!=typeof n&&(n=void 0),r(s,t,n))}},function(e,t){var n=function(){try{if(!Buffer.isEncoding("latin1"))return!1;var e=Buffer.alloc?Buffer.alloc(4):new Buffer(4);return e.fill("ab","ucs2"),"61006200"===e.toString("hex")}catch(e){return!1}}();function r(e,t,n,r){if(n<0||r>e.length)throw new RangeError("Out of range index");return n>>>=0,(r=void 0===r?e.length:r>>>0)>n&&e.fill(t,n,r),e}e.exports=function(e,t,i,s,o){if(n)return e.fill(t,i,s,o);if("number"==typeof t)return r(e,t,i,s);if("string"==typeof t){if("string"==typeof i?(o=i,i=0,s=e.length):"string"==typeof s&&(o=s,s=e.length),void 0!==o&&"string"!=typeof o)throw new TypeError("encoding must be a string");if("latin1"===o&&(o="binary"),"string"==typeof o&&!Buffer.isEncoding(o))throw new TypeError("Unknown encoding: "+o);if(""===t)return r(e,0,i,s);if(function(e){return 1===e.length&&e.charCodeAt(0)<256}(t))return r(e,t.charCodeAt(0),i,s);t=new Buffer(t,o)}return Buffer.isBuffer(t)?function(e,t,n,r){if(n<0||r>e.length)throw new RangeError("Out of range index");if(r<=n)return e;n>>>=0,r=void 0===r?e.length:r>>>0;for(var i=n,s=t.length;i<=r-s;)t.copy(e,i),i+=s;return i!==r&&t.copy(e,i,0,r-i),e}(e,t,i,s):r(e,0,i,s)}},function(e,t,n){const r=n(72);e.exports=function(e){if(!1===e.cache)return{};const t=e.cache||{};if(void 0===t.tree||"number"==typeof t.tree){const n=t.tree||e.storageCacheSize;t.tree=new r({maxByteSize:void 0!==n?n:2621440,estimateSize:()=>40})}return void 0===t.data||"number"==typeof t.data&&(t.data=new r({maxByteSize:t.data,estimateSize:e=>e.length})),t}},function(e,t){class n{constructor(e,t){this.name=t,this.parent=e}get _info(){return this.parent._info}set(e,t){return this.parent._set(this.name,e,t)}del(e){return this.parent._del(this.name,e)}get(e){return this.parent._get(this.name,e)}}function r(){return 1024}e.exports=class{constructor(e={}){this.maxByteSize=e.maxByteSize||16777216,this.onEvict=e.onEvict,this.estimateSize=e.estimateSize||r,this._nextNamespace=0,this.defaultCache=new n(this,this._nextNamespace++),this._stale=null,this._fresh=new Map,this._freshByteSize=0,this._staleByteSize=0}get _info(){return{freshByteSize:this._freshByteSize,staleByteSize:this._staleByteSize,staleEntries:this._stale?this._stale.size:0,freshEntries:this._fresh.size,byteSize:this.byteSize}}_prefix(e,t){return e+":"+t}_gc(){this.onEvict&&this._staleByteSize>0&&this.onEvict(this._stale),this._stale=this._fresh,this._fresh=new Map,this._staleByteSize=this._freshByteSize,this._freshByteSize=0}_get(e,t,n){return n||(n=this._prefix(e,t)),this._fresh.get(n)||this._stale&&this._stale.get(n)}_set(e,t,n){const r=this.estimateSize(n),i=this._prefix(e,t);this._freshByteSize+r>this.maxByteSize&&this._gc(),this._fresh.set(i,n),this._freshByteSize+=r}_del(e,t){const n=this._prefix(e,t);let r=this._stale&&this._stale.get(n);r&&(this._stale.delete(n),this._staleByteSize-=this.estimateSize(r)),r=this._fresh.get(n),r&&(this._fresh.delete(n),this._freshByteSize-=this.estimateSize(r))}get byteSize(){return this._freshByteSize+this._staleByteSize}namespace(){return new n(this,this._nextNamespace++)}set(e,t){return this.defaultCache.set(e,t)}del(e){return this.defaultCache.del(e)}get(e){return this.defaultCache.get(e)}}},function(e,t,n){e.exports=n(1)},function(e,t){const n=Math.pow(2,32);t.encodingLength=function(){return 8},t.encode=function(e,t,r){t||(t=Buffer.allocUnsafe(8)),r||(r=0);const i=Math.floor(e/n),s=e-i*n;return t.writeUInt32BE(i,r),t.writeUInt32BE(s,r+4),t},t.decode=function(e,t){t||(t=0);const r=e.readUInt32BE(t),i=e.readUInt32BE(t+4);return r*n+i},t.encode.bytes=8,t.decode.bytes=8},function(e,t){e.exports=function(e,t){return e?t?0===Buffer.compare(e,t):!e:!t}},function(e,t,n){var r=n(35),i=n(39),s=n(110),o=n(16),a=n(26).align(4),u=n(29),l=new Uint8Array(1024);function h(e,t){if(t.extensions)throw new Error("Per peer extensions is not supported. Use feed.registerExtension instead");this.feed=e,this.stream=null,this.wants=s(),this.remoteBitfield=s(),this.remoteLength=0,this.remoteWant=!1,this.remoteTree=null,this.remoteAck=!1,this.remoteOpened=!1,this.live=!!t.live,this.sparse=e.sparse,this.ack=!!t.ack,this.remoteDownloading=!0,this.remoteUploading=!0,this.remoteExtensions=e.extensions.remote(),this.downloading="boolean"==typeof t.download?t.download:e.downloading,this.uploading="boolean"==typeof t.upload?t.upload:e.uploading,this.updated=!1,this.maxRequests=t.maxRequests||e.maxRequests||16,this.urgentRequests=this.maxRequests+16,this.inflightRequests=[],this.inflightWants=0,this._openTimeout=null,this._index=-1,this._lastBytes=0,this._first=!0,this._closed=!1,this._destroyed=!1,this._defaultDownloading=this.downloading,this._iterator=this.remoteBitfield.iterator(),this._requestTimeout=null,this.stats=t.stats?{uploadedBytes:0,uploadedBlocks:0,downloadedBytes:0,downloadedBlocks:0}:null}function c(e){var t=e?e.buffer:l;return new DataView(t.buffer,t.byteOffset,1024)}e.exports=function(e,t,n){e.ifAvailable.wait();var i=r.isProtocolStream(t)?t:n.stream;i||(n.keyPair||(n.keyPair=e.noiseKeyPair),i=new r(t,n));e.opened?s(null):e.ready(s);return i;function s(t){if(e.ifAvailable.continue(),t)return i.destroy(t);if(!i.destroyed&&!i.opened(e.key))if(!1===n.noise||!i.remoteOpened(e.key)||i.remoteVerified(e.key)){var r=new h(e,n);r.feed=e,r.stream=i.open(e.key,r),i.setMaxListeners(0),r.ready()}else i.close(e.discoveryKey)}},Object.defineProperty(h.prototype,"remoteAddress",{enumerable:!0,get:function(){return this.stream.stream.remoteAddress}}),Object.defineProperty(h.prototype,"remoteType",{enumerable:!0,get:function(){return this.stream.stream.remoteType}}),Object.defineProperty(h.prototype,"remotePublicKey",{enumerable:!0,get:function(){return this.stream.state.remotePublicKey}}),h.prototype.onwant=function(e){if(this.uploading&&!(8191&e.start||8191&e.length)){!this.remoteWant&&this.feed.length&&this.feed.bitfield.get(this.feed.length-1)&&this.stream.have({start:this.feed.length-1}),this.remoteWant=!0;var t=this.feed.bitfield.compress(e.start,e.length);this.stream.have({start:e.start,length:e.length,bitfield:t})}},h.prototype.ondata=function(e){var t=this;if(!(this.feed.allowPush||!e.value)&&!this.feed._reserved.get(e.index))return t.feed.bitfield.get(e.index)||t.unhave({start:e.index}),void t._clear(e.index,!e.value);this.feed._putBuffer(e.index,e.value,e,this,(function(n){if(n)return t.destroy(n);e.value&&t.remoteBitfield.set(e.index,!1),t.remoteAck&&t.stream.have({start:e.index,length:1,ack:!0}),t.stats&&e.value&&(t.stats.downloadedBlocks+=1,t.stats.downloadedBytes+=e.value.length),t._clear(e.index,!e.value)}))},h.prototype._clear=function(e,t){for(var n=0;n<this.inflightRequests.length;n++)this.inflightRequests[n].index===e&&(null!==this._requestTimeout&&this._requestTimeout.refresh(),this.inflightRequests.splice(n,1),n--);this.feed._reserved.set(e,!1),this.feed._updatePeers(),0===this.inflightRequests.length&&null!==this._requestTimeout&&(this._requestTimeout.destroy(),this._requestTimeout=null)},h.prototype.onrequest=function(e){if(this.uploading){if(e.bytes)return this._onbytes(e);this.remoteTree||(this.remoteTree=u());var t=this,n={digest:e.nodes,hash:e.hash,tree:this.remoteTree};this.feed.proof(e.index,n,(function(n,r){if(n)return t.destroy(n);e.hash?i(null,null):t.feed.bitfield.get(e.index)&&t.feed._getBuffer(e.index,i);function i(n,i){if(t.uploading){if(n)return t.destroy(n);i&&(t.stats&&(t.stats.uploadedBlocks+=1,t.stats.uploadedBytes+=i.length,t.feed._stats.uploadedBlocks+=1,t.feed._stats.uploadedBytes+=i.length),t.feed.emit("upload",e.index,i,t)),e.index+1>t.remoteLength&&(t.remoteLength=e.index+1,t._updateEnd()),t.stream.data({index:e.index,value:i,nodes:r.nodes,signature:r.signature})}}}))}},h.prototype._updateOptions=function(){(this.ack||this.feed.extensions.length)&&this.stream.options({ack:this.ack,extensions:this.feed.extensions.names()})},h.prototype.setDownloading=function(e){e!==this.downloading&&(this.downloading=e,this.stream.status({downloading:e,uploading:this.uploading}),this.update())},h.prototype.setUploading=function(e){e!==this.uploading&&(this.uploading=e,this.stream.status({downloading:this.downloading,uploading:e}),this.update())},h.prototype._onbytes=function(e){var t=this;this.feed.seek(e.bytes,{wait:!1},(function(n,r){if(n)return e.bytes=0,void t.onrequest(e);t._lastBytes!==e.bytes&&(t._lastBytes=e.bytes,e.bytes=0,e.index=r,e.nodes=0,t.onrequest(e))}))},h.prototype._onrequesttimeout=function(){if(this._requestTimeout=null,this.inflightRequests.length){var e=this.inflightRequests[0];if(e.hash?this.feed.tree.get(2*e.index):this.feed.bitfield.get(e.index))return this.inflightRequests.shift(),this.feed._reserved.set(e.index,!1),void(this.stream.stream.timeout&&(this._requestTimeout=i(this.stream.stream.timeout.ms,this._onrequesttimeout,this)));this.destroy(new Error("Request timeout"))}},h.prototype.onhave=function(e){if(this.ack&&e.ack&&!e.bitfield&&this.feed.bitfield.get(e.start))this.stream.stream.emit("ack",e);else{var t=this._first;if(this._first&&(this._first=!1),1048576===e.length&&this.inflightWants>0&&(this.feed.ifAvailable.continue(),this.inflightWants--),e.bitfield){0!==e.length&&1!==e.length||(this.wants=null);var n=a.decode(e.bitfield),r=8*n.length;!function(e,t,n,r){for(var i=new DataView(t.buffer,t.byteOffset),s=Math.floor(t.length/4),o=new Uint32Array(t.buffer,t.byteOffset,s),a=r/8192,u=0,l=c(e.pages.get(a++,!0)),h=0;h<s;h++)o[h]=i.getUint32(4*h,!n)&~l.getUint32(4*u++,!n),256===u&&(l=c(e.pages.get(a++,!0)),u=0)}(this.feed.bitfield,n,this.remoteBitfield.littleEndian,e.start),this.remoteBitfield.fill(n,e.start),r>this.remoteLength&&(this.remoteLength=this.remoteBitfield.last()+1,t=!0)}else{for(var i=e.start,s=e.length||1;s--;)this.remoteBitfield.set(i,!this.feed.bitfield.get(i++));i>this.remoteLength&&(this.remoteLength=i,t=!0)}t&&(this.updated=!0,this.feed.emit("remote-update",this)),this._updateEnd(),this.update()}},h.prototype._updateEnd=function(){if(!this.live&&!this.feed.sparse&&this.feed._selections.length){for(var e=this.feed._selections[0],t=this.feed.length||-1,n=0;n<this.feed.peers.length;n++)this.feed.peers[n].remoteLength>t&&(t=this.feed.peers[n].remoteLength);e.end=t}},h.prototype.onextension=function(e,t){this.remoteExtensions.onmessage(e,t,this)},h.prototype.onstatus=function(e){if(this.remoteUploading=e.uploading,this.remoteDownloading=e.downloading,!e.uploading){for(;this.inflightRequests.length;){const e=this.inflightRequests[0];this._clear(e.index,!e.value)}for(var t=0;t<this.inflightWants;t++)this.feed.ifAvailable.continue();this.inflightWants=0,this.wants=s()}this.update(),e.downloading||this.live||this.feed._selections.length&&this.downloading||this._autoEnd()},h.prototype._autoEnd=function(){this.uploading&&this.remoteDownloading||(this.sparse||this.live)&&(this.remoteUploading||this.downloading)||this.end()},h.prototype.onunhave=function(e){var t=e.start,n=e.length||1;if(0===t&&n>=this.remoteLength)return this.remoteLength=0,void(this.remoteBitfield=s());for(;n--;)this.remoteBitfield.set(t++,!1)},h.prototype.onunwant=h.prototype.oncancel=function(){},h.prototype.onclose=function(){this._close()},h.prototype.have=function(e){this.stream&&this.remoteWant&&this.stream.have(e);for(var t=e.start,n=e.length;n--;)this.remoteBitfield.set(t++,!1)},h.prototype.unhave=function(e){this.stream&&this.remoteWant&&this.stream.unhave(e)},h.prototype.haveBytes=function(e){for(var t=0;t<this.inflightRequests.length;t++)this.inflightRequests[t].bytes===e&&(this.feed._reserved.set(this.inflightRequests[t].index,!1),this.inflightRequests.splice(t,1),t--);this.update(),0===this.inflightRequests.length&&null!==this._requestTimeout&&(this._requestTimeout.destroy(),this._requestTimeout=null)},h.prototype.update=function(){for(;this._update(););this._sendWantsMaybe()},h.prototype._update=function(){if(!this.downloading||!this.remoteUploading)return!1;for(var e=this.feed._selections,t=this.feed._waiting,n=t.length,r=e.length,i=this.inflightRequests.length,s=0,o=0;i<this.urgentRequests;){for(s=Math.floor(Math.random()*t.length),o=0;o<t.length;o++){var a=t[s++];if(s===t.length&&(s=0),this._downloadWaiting(a),t.length!==n)return!0;if(this.inflightRequests.length>=this.urgentRequests)return!1}if(i===this.inflightRequests.length)break;i=this.inflightRequests.length}for(;i<this.maxRequests;){for(s=Math.floor(Math.random()*e.length),o=0;o<e.length;o++){var u=e[s++];if(s===e.length&&(s=0),u.iterator||(u.iterator=this.feed.bitfield.iterator(u.start,u.end)),u.blocks?this._downloadBlocks(u):this._downloadRange(u),e.length!==r)return!0;if(this.inflightRequests.length>=this.maxRequests)return!1}if(i===this.inflightRequests.length)return!1;i=this.inflightRequests.length}return!1},h.prototype.onopen=function(){clearTimeout(this._openTimeout),this.feed.ifAvailable.continue(),this.remoteOpened=!0,this._updateOptions(),this.uploading&&this.downloading||this.stream.status({uploading:this.uploading,downloading:this.downloading}),this._sendWants(),this.feed.emit("peer-open",this)},h.prototype.onoptions=function(e){this.remoteAck=e.ack,this.remoteExtensions.update(e.extensions)},h.prototype.ready=function(){this._openTimeout=setTimeout(this.destroy.bind(this,new Error("ETIMEOUT before open")),4e3),this.feed.ifAvailable.wait(),o.add(this.feed.peers,this),this.feed.emit("peer-add",this),this.stream.remoteOpened&&this.onopen()},h.prototype.end=function(){if(!this.downloading&&!this.remoteDownloading&&!this.live)return this._defaultDownloading||this.stream.status({downloading:!1,uploading:!1}),void this._close();this._closed?this.live||this._close():(this._closed=!0,this.downloading=!1,this.stream.status({downloading:!1,uploading:!0}))},h.prototype._close=function(){if(clearTimeout(this._openTimeout),-1!==this._index){this._destroyed||(this.stream.close(),this._destroyed=!0),o.remove(this.feed.peers,this),this._index=-1;for(var e=0;e<this.inflightRequests.length;e++)this.feed._reserved.set(this.inflightRequests[e].index,!1);for(null!==this._requestTimeout&&(this._requestTimeout.destroy(),this._requestTimeout=null),this._updateEnd(),this.remoteWant=!1,this.feed._updatePeers(),this.feed.emit("peer-remove",this),e=0;e<this.inflightWants;e++)this.feed.ifAvailable.continue();this.remoteOpened||this.feed.ifAvailable.continue()}},h.prototype.destroy=function(e){-1===this._index||this._destroyed||(this.stream.destroy(e),this._destroyed=!0,this._close())},h.prototype._sendWantsMaybe=function(){this.inflightRequests.length<this.maxRequests&&this._sendWants()},h.prototype._sendWants=function(){if(this.wants&&this.downloading&&this.remoteOpened&&this.remoteUploading&&!(this.inflightWants>=16)){var e;for(e=0;e<this.feed._waiting.length;e++){var t=this.feed._waiting[e];if(-1===t.index?this._sendWantRange(t):this._sendWant(t.index),this.inflightWants>=16)return}for(e=0;e<this.feed._selections.length;e++){var n=this.feed._selections[e];if(this._sendWantRange(n),this.inflightWants>=16)return}this._sendWant(0)}},h.prototype._sendWantRange=function(e){for(var t=0;;){if(t>=this.remoteLength)return;if(-1!==e.end&&t>=e.end)return;if(this._sendWant(t))return;if(!this.wants.get(Math.floor(t/1024/1024)))return;t+=1048576}},h.prototype._sendWant=function(e){var t=Math.floor(e/1048576);return!this.wants.get(t)&&(this.wants.set(t,!0),this.inflightWants++,this.feed.ifAvailable.wait(),this.stream.want({start:1048576*t,length:1048576}),!0)},h.prototype._downloadWaiting=function(e){if(e.bytes)this._downloadRange(e);else{if(!this.remoteBitfield.get(e.index)||!this.feed._reserved.set(e.index,!0)){if(!e.update||this.feed._reserved.get(e.index))return;const t=this._iterator.seek(e.index).next(!0);if(-1===t||!this.feed._reserved.set(t,!0))return;e.index=t}this._request(e.index,0,!0===e.hash)}},h.prototype._downloadBlocks=function(e){for(;e.blocksDownloaded<e.blocks.length;){const t=e.blocks[e.blocksDownloaded];if(!this.feed.bitfield.get(t))break;e.blocksDownloaded++}if(e.blocksDownloaded>=e.blocks.length)return o.remove(this.feed._selections,e),void e.callback(null);for(var t=e.blocksDownloaded;t<e.blocks.length;t++){const n=e.blocks[t];if(this.remoteBitfield.get(n)&&this.feed._reserved.set(n,!0))return e.requested++,void this._request(n,0,!1)}},h.prototype._downloadRange=function(e){e.iterator||(e.iterator=this.feed.bitfield.iterator(e.start,e.end));var t=this.feed._reserved,n=this._iterator,r=Math.min(-1===e.end?this.remoteLength:e.end,this.remoteLength),i=e.linear?n.seek(e.start).next(!0):function(e,t,n){var r=n-t,i=e.seek(Math.floor(Math.random()*r)+t).next(!0);return-1===i||i>=n?e.seek(t).next(!0):i}(n,e.start,r),s=i;if(-1===i||i>=r)!e.bytes&&e.end>-1&&this.feed.length>=e.end&&-1===e.iterator.seek(0).next()&&(o.remove(this.feed._selections,e),e.callback(null),this.live||this.sparse||this.feed._selections.length||this.end());else{for(;e.hash&&this.feed.tree.get(2*i)||!t.set(i,!0);)if(!((i=n.next(!0))>-1&&i<r)&&(e.linear||0===s||(s=0,!((i=n.seek(e.start).next(!0))>-1&&i<r)))){if(e.hash){for(var a=e.start;a<r;a++)if(!this.feed.tree.get(2*a))return;e.bytes||(o.remove(this.feed._selections,e),e.callback(null))}return}e.requested++,this._request(i,e.bytes||0,e.hash)}},h.prototype._request=function(e,t,n){var r={bytes:t,index:e,hash:n,nodes:this.feed.digest(e)};null===this._requestTimeout&&this.stream.stream.timeout&&(this._requestTimeout=i(this.stream.stream.timeout.ms,this._onrequesttimeout,this)),this.inflightRequests.push(r),this.stream.request(r)},h.prototype.extension=function(e,t){this.stream.extension(e,t)}},function(e,t,n){const r=n(78),i=n(90),s=n(93),o=n(95),a=n(7),u=n(8);function l(e,t,n){n.handlers.onopen&&n.handlers.onopen(e,t)}function h(e,t,n){n.handlers.onoptions&&n.handlers.onoptions(e,t)}function c(e,t,n){n.handlers.onstatus&&n.handlers.onstatus(e,t)}function f(e,t,n){n.handlers.onhave&&n.handlers.onhave(e,t)}function d(e,t,n){n.handlers.onunhave&&n.handlers.onunhave(e,t)}function p(e,t,n){n.handlers.onwant&&n.handlers.onwant(e,t)}function g(e,t,n){n.handlers.onunwant&&n.handlers.onunwant(e,t)}function y(e,t,n){n.handlers.onrequest&&n.handlers.onrequest(e,t)}function v(e,t,n){n.handlers.oncancel&&n.handlers.oncancel(e,t)}function _(e,t,n){n.handlers.ondata&&n.handlers.ondata(e,t)}function b(e,t,n){n.handlers.onclose&&n.handlers.onclose(e,t)}function m(e,t,n,r){if(15!==t)return;const i=u.decode(n),s=n.slice(u.decode.bytes);r.handlers.onextension&&r.handlers.onextension(e,i,s)}function w(e,t){t.handlers.onmissing&&t.handlers.onmissing(e)}e.exports=class{constructor(e,t){const n={nonce:s.nonce()};this.handlers=t||{},this.remotePayload=null,this.remotePublicKey=null,this.publicKey=null,this.handshakeHash=null,this.destroyed=!1,this._initiator=e,this._payload=n,this._pending=[],this._handshake=null,this._split=null,this._encryption=null,this._noise=!(!1===t.encrypted&&!1===t.noise),this._buffering=null,this._handshaking=!1,this._messages=new o({onmessage:m,onmissing:w,context:this,types:[{context:this,onmessage:l,encoding:i.Open},{context:this,onmessage:h,encoding:i.Options},{context:this,onmessage:c,encoding:i.Status},{context:this,onmessage:f,encoding:i.Have},{context:this,onmessage:d,encoding:i.Unhave},{context:this,onmessage:p,encoding:i.Want},{context:this,onmessage:g,encoding:i.Unwant},{context:this,onmessage:y,encoding:i.Request},{context:this,onmessage:v,encoding:i.Cancel},{context:this,onmessage:_,encoding:i.Data},{context:this,onmessage:b,encoding:i.Close}]}),!1===t.encrypted&&!1===t.noise||(this._handshaking=!0,"function"!=typeof this.handlers.keyPair?this._onkeypair(null,this.handlers.keyPair||null):(this._buffering=[],this.handlers.keyPair(this._onkeypair.bind(this))))}_onkeypair(e,t){if(e)return this.destroy(e);if(null!==this._handshake)return;this.handlers.keyPair=t;const n=new r(this._initiator,i.NoisePayload.encode(this._payload),this.handlers,this._onhandshake.bind(this));if(this.publicKey=n.keyPair.publicKey,this._handshake=n,this._buffering)for(;this._buffering.length;)this._recv(this._buffering.shift());this._buffering=null}open(e,t){return this._send(e,0,t)}options(e,t){return this._send(e,1,t)}status(e,t){return this._send(e,2,t)}have(e,t){return this._send(e,3,t)}unhave(e,t){return this._send(e,4,t)}want(e,t){return this._send(e,5,t)}unwant(e,t){return this._send(e,6,t)}request(e,t){return this._send(e,7,t)}cancel(e,t){return this._send(e,8,t)}data(e,t){return this._send(e,9,t)}close(e,t){return this._send(e,10,t||{})}extension(e,t,n){const r=Buffer.allocUnsafe(u.encodingLength(t)+n.length);return u.encode(t,r,0),n.copy(r,u.encode.bytes),this._send(e,15,r)}ping(){if(this._handshaking||this._pending.length)return;let e=Buffer.from([0]);return null!==this._encryption&&(e=this._encryption.encrypt(e)),this.handlers.send(e)}_onhandshake(e,t,n,r,o,a){if(e)return this.destroy(new Error("Noise handshake error"));if(!t)return this.destroy(new Error("Remote did not include a handshake payload"));this.remotePublicKey=o,this.handshakeHash=a;try{t=i.NoisePayload.decode(t)}catch(e){return this.destroy(new Error("Could not parse remote payload"))}if(this._handshake=null,this._handshaking=!1,this._split=n,this._encryption=!1===this.handlers.encrypted?null:new s({rnonce:t.nonce,tnonce:this._payload.nonce},n),this.remotePayload=t,this.handlers.onhandshake&&this.handlers.onhandshake(),!this.destroyed)for(r&&this.recv(r);this._pending.length&&!this.destroyed;)this._sendNow(...this._pending.shift())}_send(e,t,n){return this._handshaking||this._pending.length?(this._pending.push([e,t,n]),!1):this._sendNow(e,t,n)}_sendNow(e,t,n){0===t&&n.key&&!n.capability&&(n.capability=this.capability(n.key),n.key=null);let r=this._messages.send(e,t,n);return null!==this._encryption&&(r=this._encryption.encrypt(r)),this.handlers.send(r)}capability(e){return a.capability(e,this._split)}remoteCapability(e){return a.remoteCapability(e,this._split)}recv(e){null!==this._buffering?this._buffering.push(e):this._recv(e)}_recv(e){this.destroyed||(this._handshaking?this._handshake.recv(e):(null!==this._encryption&&(e=this._encryption.decrypt(e)),this._messages.recv(e)||this.destroy(this._messages.error)))}destroy(e){this.destroyed||(this.destroyed=!0,this._handshake&&this._handshake.destroy(),this._encryption&&this._encryption.destroy(),this.handlers.destroy&&this.handlers.destroy(e))}static keyPair(e){return r.keyPair(e)}}},function(e,t,n){const r=n(79),i=n(15),s=n(7),o=n(8);function a(e){if(e.destroyed)return;e.destroyed=!0;const t={rx:Buffer.from(e.noise.split.rx),tx:Buffer.from(e.noise.split.tx)};s.free(e.noise.split.rx),s.free(e.noise.split.tx),e.ondone(null,e.remotePayload,t,e.buffer,e.remotePublicKey,e.noise.handshakeHash)}function u(e){e.destroyed||e.noise.send(e.payload,e.onsend)}function l(e,t){if(e)return this.destroy(e);const n=Buffer.allocUnsafe(o.encodingLength(t.length)+t.length);o.encode(t.length,n,0),t.copy(n,o.encode.bytes),this.options.send(n)}function h(e,t){if(e)return this.destroy(e);t&&t.length&&(this.remotePayload=Buffer.concat([t])),this.destroyed||this.noise.finished||!1===this.noise.waiting&&this.noise.send(this.payload,this.onsend)}function c(e,t){this.remotePublicKey=Buffer.concat([e]),this.options.onauthenticate?this.options.onauthenticate(this.remotePublicKey,t):t(null)}e.exports=class e{constructor(t,n,i,s){this.options=i,this.ondone=s,this.buffer=null,this.length=0,this.remotePayload=null,this.payload=n,this.keyPair=i.keyPair||e.keyPair(),this.remotePublicKey=null,this.onrecv=h.bind(this),this.onsend=l.bind(this),this.destroyed=!1,this.noise=r(t,{pattern:"XX",onhandshake:function(e,t){process.nextTick(a,o),t(null)},staticKeyPair:this.keyPair,onstatickey:c.bind(this)});const o=this;!1===this.noise.waiting&&process.nextTick(u,this)}recv(e){if(!this.destroyed)for(this.buffer?this.buffer=Buffer.concat([this.buffer,e]):this.buffer=e;!this.destroyed&&!this.noise.finished;){if(!this.buffer||this.buffer.length<3)return;if(this.length){if(this.buffer.length<this.length)return;const e=this.buffer.slice(0,this.length);this.buffer=this.length<this.buffer.length?this.buffer.slice(this.length):null,this.length=0,this.noise.recv(e,this.onrecv)}else this.length=o.decode(this.buffer,0),this.buffer=this.buffer.slice(o.decode.bytes)}}destroy(e){this.destroyed||(this.destroyed=!0,this.noise.finished||this.noise.destroy(),this.ondone(e))}static keyPair(e){const t={publicKey:Buffer.alloc(i.PKLEN),secretKey:Buffer.alloc(i.SKLEN)};return e?i.generateSeedKeypair(t.publicKey,t.secretKey,e):i.generateKeypair(t.publicKey,t.secretKey),t}}},function(e,t,n){var r=n(80),i=n(36),s=n(38),o=n(86),a=Buffer.alloc(0);function u(e,t){if(!(this instanceof u))return new u(e,t);var n=(t=t||{}).pattern||"NN",i=t.prolouge||a;this.handshakeHash=null,this.onstatickey=t.onstatickey||function(e,t){t()},this.onephemeralkey=t.onephemeralkey||function(e,t){t()},this.onhandshake=t.onhandshake||function(e,t){t()},this.state=r.initialize(n,e,i,t.staticKeyPair,t.ephemeralKeyPair,t.remoteStaticKey,t.remoteEphemeralKey),this.waiting=!1===e,this.finished=!1,this.split=null,this._tx=Buffer.alloc(65535),this._rx=Buffer.alloc(65535)}u.prototype.recv=function(e,t){var n=this;o(!1===n.finished,"Should not call recv if finished"),o(null!=e,"must have data"),o(e.byteLength<=n._rx.byteLength,"too much data received"),o(!0===n.waiting,"Wrong state, not ready to receive data"),o(null==n.split,"split should be null");var i=null!=n.state.re,s=null!=n.state.rs;try{n.split=r.readMessage(n.state,e,n._rx)}catch(e){return n._finish(e,null,t)}n.waiting=!1;var a=null!=n.state.re,u=null!=n.state.rs;return!1===i&&!0===a?n.onephemeralkey(n.state.re,l):l();function l(e){return e?h(e):!1===s&&!0===u?n.onstatickey(n.state.rs,h):h()}function h(e){if(e)return n._finish(e,null,t);var i=n._rx.subarray(0,r.readMessage.bytes);if(n.split)return n._finish(null,i,t);t(null,i)}},u.prototype.send=function(e,t){o(!1===this.finished,"Should not call send if finished"),o(!1===this.waiting,"Wrong state, not ready to send data"),o(null==this.split,"split should be null"),e=e||a;try{this.split=r.writeMessage(this.state,e,this._tx)}catch(e){return this._finish(e,null,t)}this.waiting=!0;var n=this._tx.subarray(0,r.writeMessage.bytes);return null!=this.split?this._finish(null,n,t):t(null,n)},u.prototype.destroy=function(){this._finish(null,null,(function(){}))},u.prototype._finish=function(e,t,n){o(!1===this.finished,"Already finished");const a=this;if(a.finished=!0,a.waiting=!1,a.split&&(a.handshakeHash=Buffer.alloc(s.HASHLEN),i.getHandshakeHash(a.state.symmetricState,a.handshakeHash)),e)return u(e);function u(e){r.destroy(a.state),n(e,t,a.split),a._rx.fill(0),a._tx.fill(0)}a.onhandshake(a.state,u)},u.keygen=r.keygen,u.seedKeygen=r.seedKeygen,e.exports=u},function(e,t,n){e.exports=n(81)},function(e,t,n){var r=n(1),i=n(4),s=n(82),o=n(36),a=n(37),u=n(15),l=u.PKLEN,h=u.SKLEN;function c(){this.symmetricState=r.sodium_malloc(o.STATELEN),this.initiator=null,this.spk=null,this.ssk=null,this.epk=null,this.esk=null,this.rs=null,this.re=null,this.messagePatterns=null}e.exports=Object.freeze({initialize:function(e,t,n,r,a,l,h){i(Object.keys(m).includes(e),"Unsupported handshake pattern"),i("boolean"==typeof t,"Initiator must be a boolean"),i(null!=n.byteLength,"prolouge must be a Buffer"),i(null==a||a.publicKey.byteLength===u.PKLEN,`e.publicKey must be ${u.PKLEN} bytes`),i(null==a||a.secretKey.byteLength===u.SKLEN,`e.secretKey must be ${u.SKLEN} bytes`),i(null==l||l.byteLength===u.PKLEN,`rs must be ${u.PKLEN} bytes`),i(null==h||h.byteLength===u.PKLEN,`re must be ${u.PKLEN} bytes`);var y=new c,v=Buffer.from(`Noise_${e}_25519_ChaChaPoly_BLAKE2b`);o.initializeSymmetric(y.symmetricState,v),o.mixHash(y.symmetricState,n),y.role=!0===t?f:d,null!=r&&(i(r.publicKey.byteLength===u.PKLEN,`s.publicKey must be ${u.PKLEN} bytes`),i(r.secretKey.byteLength===u.SKLEN,`s.secretKey must be ${u.SKLEN} bytes`),y.spk=w(r.publicKey),y.ssk=w(r.secretKey));null!=a&&(i(a.publicKey.byteLength===u.PKLEN),i(a.secretKey.byteLength===u.SKLEN),y.epk=w(a.publicKey),y.esk=w(a.secretKey));null!=l&&(i(l.byteLength===u.PKLEN),y.rs=w(l));null!=h&&(i(h.byteLength===u.PKLEN),y.re=w(h));var _=m[e];for(var b of s(_.premessages)){var x=b.shift();for(var k of b)switch(k){case g:i(y.role===x?null!=y.epk.byteLength:null!=y.re.byteLength),o.mixHash(y.symmetricState,y.role===x?y.epk:y.re);break;case p:i(y.role===x?null!=y.spk.byteLength:null!=y.rs.byteLength),o.mixHash(y.symmetricState,y.role===x?y.spk:y.rs);break;default:throw new Error("Invalid premessage pattern")}}return y.messagePatterns=s(_.messagePatterns),i(!y.messagePatterns.filter(e=>e[0]===f).some(e=>e.includes(p))||null!==y.spk&&null!==y.ssk,"This handshake pattern requires a static keypair"),y},writeMessage:k,readMessage:S,destroy:function(e){null!=e.symmetricState&&(r.sodium_free(e.symmetricState),e.symmetricState=null);e.role=null,null!=e.spk&&(r.sodium_free(e.spk),e.spk=null);null!=e.ssk&&(r.sodium_free(e.ssk),e.ssk=null);null!=e.epk&&(r.sodium_free(e.epk),e.epk=null);null!=e.esk&&(r.sodium_free(e.esk),e.esk=null);null!=e.rs&&(r.sodium_free(e.rs),e.rs=null);null!=e.re&&(r.sodium_free(e.re),e.re=null);e.messagePatterns=null},keygen:function e(t,n){if(!t)return t={publicKey:r.sodium_malloc(l),secretKey:r.sodium_malloc(h)},e(t);if(t.publicKey)return u.generateKeypair(t.publicKey,t.secretKey),t;null!=t.byteLength&&u.generateKeypair(null,t)},seedKeygen:function(e){var t={publicKey:r.sodium_malloc(l),secretKey:r.sodium_malloc(h)};return u.generateSeedKeypair(t.publicKey,t.secretKey,e),t},SKLEN:h,PKLEN:l});const f=Symbol("initiator"),d=Symbol("responder"),p=Symbol("s"),g=Symbol("e"),y=Symbol("es"),v=Symbol("se"),_=Symbol("ee"),b=Symbol("es");var m=Object.freeze({N:{premessages:[[d,p]],messagePatterns:[[f,g,y]]},K:{premessages:[[f,p],[d,p]],messagePatterns:[[f,g,y,b]]},X:{premessages:[[d,p]],messagePatterns:[[f,g,y,p,b]]},NN:{premessages:[],messagePatterns:[[f,g],[d,g,_]]},KN:{premessages:[[f,p]],messagePatterns:[[f,g],[d,g,_,v]]},NK:{premessages:[[d,p]],messagePatterns:[[f,g,y],[d,g,_]]},KK:{premessages:[[f,p],[d,p]],messagePatterns:[[f,g,y,b],[d,g,_,v]]},NX:{premessages:[],messagePatterns:[[f,g],[d,g,_,p,y]]},KX:{premessages:[[f,p]],messagePatterns:[[f,g],[d,g,_,v,p,y]]},XN:{premessages:[],messagePatterns:[[f,g],[d,g,_],[f,p,v]]},IN:{premessages:[],messagePatterns:[[f,g,p],[d,g,_,v]]},XK:{premessages:[[d,p]],messagePatterns:[[f,g,y],[d,g,_],[f,p,v]]},IK:{premessages:[[d,p]],messagePatterns:[[f,g,y,p,b],[d,g,_,v]]},XX:{premessages:[],messagePatterns:[[f,g],[d,g,_,p,y],[f,p,v]]},IX:{premessages:[],messagePatterns:[[f,g,p],[d,g,_,v,p,y]]}});function w(e){var t=r.sodium_malloc(e.byteLength);return t.set(e),t}var x=r.sodium_malloc(u.DHLEN);function k(e,t,n){i(e instanceof c),i(null!=t.byteLength),i(null!=n.byteLength);var s=e.messagePatterns.shift(),l=0;for(var h of(i(null!=s),i(e.role===s.shift()),s))switch(h){case g:i(null==e.epk),i(null==e.esk),e.epk=r.sodium_malloc(u.PKLEN),e.esk=r.sodium_malloc(u.SKLEN),u.generateKeypair(e.epk,e.esk),n.set(e.epk,l),l+=e.epk.byteLength,o.mixHash(e.symmetricState,e.epk);break;case p:i(e.spk.byteLength===u.PKLEN),o.encryptAndHash(e.symmetricState,n.subarray(l),e.spk),l+=o.encryptAndHash.bytesWritten;break;case _:u.dh(x,e.esk,e.re),o.mixKey(e.symmetricState,x),r.sodium_memzero(x);break;case y:e.role===f?u.dh(x,e.esk,e.rs):u.dh(x,e.ssk,e.re),o.mixKey(e.symmetricState,x),r.sodium_memzero(x);break;case v:e.role===f?u.dh(x,e.ssk,e.re):u.dh(x,e.esk,e.rs),o.mixKey(e.symmetricState,x),r.sodium_memzero(x);break;case b:u.dh(x,e.ssk,e.rs),o.mixKey(e.symmetricState,x),r.sodium_memzero(x);break;default:throw new Error("Invalid message pattern")}if(o.encryptAndHash(e.symmetricState,n.subarray(l),t),l+=o.encryptAndHash.bytesWritten,k.bytes=l,0===e.messagePatterns.length){var d=r.sodium_malloc(a.STATELEN),m=r.sodium_malloc(a.STATELEN);return o.split(e.symmetricState,d,m),{tx:d,rx:m}}}function S(e,t,n){i(e instanceof c),i(null!=t.byteLength),i(null!=n.byteLength);var s=e.messagePatterns.shift(),l=0;for(var h of(i(null!=s),i(s.shift()!==e.role),s))switch(h){case g:i(null==e.re),i(t.byteLength-l>=u.PKLEN),e.re=r.sodium_malloc(u.PKLEN),e.re.set(t.subarray(l,l+u.PKLEN)),l+=u.PKLEN,o.mixHash(e.symmetricState,e.re);break;case p:i(null==e.rs),e.rs=r.sodium_malloc(u.PKLEN);var d=0;d=o._hasKey(e.symmetricState)?u.PKLEN+16:u.PKLEN,i(t.byteLength-l>=d),o.decryptAndHash(e.symmetricState,e.rs,t.subarray(l,l+d)),l+=o.decryptAndHash.bytesRead;break;case _:u.dh(x,e.esk,e.re),o.mixKey(e.symmetricState,x),r.sodium_memzero(x);break;case y:e.role===f?u.dh(x,e.esk,e.rs):u.dh(x,e.ssk,e.re),o.mixKey(e.symmetricState,x),r.sodium_memzero(x);break;case v:e.role===f?u.dh(x,e.ssk,e.re):u.dh(x,e.esk,e.rs),o.mixKey(e.symmetricState,x),r.sodium_memzero(x);break;case b:u.dh(x,e.ssk,e.rs),o.mixKey(e.symmetricState,x),r.sodium_memzero(x);break;default:throw new Error("Invalid message pattern")}if(o.decryptAndHash(e.symmetricState,n,t.subarray(l)),S.bytes=o.decryptAndHash.bytesWritten,0===e.messagePatterns.length){var m=r.sodium_malloc(a.STATELEN),w=r.sodium_malloc(a.STATELEN);return o.split(e.symmetricState,w,m),{tx:m,rx:w}}}k.bytes=0,S.bytes=0},function(e,t,n){var r=function(){"use strict";function e(e,t){return null!=t&&e instanceof t}var t,n,r;try{t=Map}catch(e){t=function(){}}try{n=Set}catch(e){n=function(){}}try{r=Promise}catch(e){r=function(){}}function i(s,a,u,l,h){"object"==typeof a&&(u=a.depth,l=a.prototype,h=a.includeNonEnumerable,a=a.circular);var c=[],f=[],d="undefined"!=typeof Buffer;return void 0===a&&(a=!0),void 0===u&&(u=1/0),function s(u,p){if(null===u)return null;if(0===p)return u;var g,y;if("object"!=typeof u)return u;if(e(u,t))g=new t;else if(e(u,n))g=new n;else if(e(u,r))g=new r((function(e,t){u.then((function(t){e(s(t,p-1))}),(function(e){t(s(e,p-1))}))}));else if(i.__isArray(u))g=[];else if(i.__isRegExp(u))g=new RegExp(u.source,o(u)),u.lastIndex&&(g.lastIndex=u.lastIndex);else if(i.__isDate(u))g=new Date(u.getTime());else{if(d&&Buffer.isBuffer(u))return g=Buffer.allocUnsafe?Buffer.allocUnsafe(u.length):new Buffer(u.length),u.copy(g),g;e(u,Error)?g=Object.create(u):void 0===l?(y=Object.getPrototypeOf(u),g=Object.create(y)):(g=Object.create(l),y=l)}if(a){var v=c.indexOf(u);if(-1!=v)return f[v];c.push(u),f.push(g)}for(var _ in e(u,t)&&u.forEach((function(e,t){var n=s(t,p-1),r=s(e,p-1);g.set(n,r)})),e(u,n)&&u.forEach((function(e){var t=s(e,p-1);g.add(t)})),u){var b;y&&(b=Object.getOwnPropertyDescriptor(y,_)),b&&null==b.set||(g[_]=s(u[_],p-1))}if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(u);for(_=0;_<m.length;_++){var w=m[_];(!(k=Object.getOwnPropertyDescriptor(u,w))||k.enumerable||h)&&(g[w]=s(u[w],p-1),k.enumerable||Object.defineProperty(g,w,{enumerable:!1}))}}if(h){var x=Object.getOwnPropertyNames(u);for(_=0;_<x.length;_++){var k,S=x[_];(k=Object.getOwnPropertyDescriptor(u,S))&&k.enumerable||(g[S]=s(u[S],p-1),Object.defineProperty(g,S,{enumerable:!1}))}}return g}(s,u)}function s(e){return Object.prototype.toString.call(e)}function o(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),t}return i.clonePrototype=function(e){if(null===e)return null;var t=function(){};return t.prototype=e,new t},i.__objToStr=s,i.__isDate=function(e){return"object"==typeof e&&"[object Date]"===s(e)},i.__isArray=function(e){return"object"==typeof e&&"[object Array]"===s(e)},i.__isRegExp=function(e){return"object"==typeof e&&"[object RegExp]"===s(e)},i.__getRegExpFlags=o,i}();e.exports&&(e.exports=r)},function(e,t,n){var r=n(1),i=n(4);i(32===r.crypto_aead_chacha20poly1305_ietf_KEYBYTES),i(12===r.crypto_aead_chacha20poly1305_ietf_NPUBBYTES),i(16===r.crypto_aead_chacha20poly1305_ietf_ABYTES),e.exports={KEYLEN:32,NONCELEN:8,MACLEN:16,encrypt:o,decrypt:a,rekey:f};var s=r.sodium_malloc(r.crypto_aead_chacha20poly1305_ietf_NPUBBYTES);function o(e,t,n,a,u){i(e.byteLength>=u.byteLength+16,"output buffer must be at least plaintext plus MACLEN bytes long"),i(32===t.byteLength),i(8===n.byteLength),i(null==a||null!=a.byteLength),r.sodium_memzero(s),s.set(n,4),o.bytesWritten=r.crypto_aead_chacha20poly1305_ietf_encrypt(e.subarray(0,u.byteLength+16),u,a,null,s,t),o.bytesRead=o.bytesWritten-16,r.sodium_memzero(s)}function a(e,t,n,o,u){i(e.byteLength>=u.byteLength-16),i(32===t.byteLength),i(8===n.byteLength),i(null==o||null!=o.byteLength),r.sodium_memzero(s),s.set(n,4),a.bytesWritten=r.crypto_aead_chacha20poly1305_ietf_decrypt(e.subarray(0,u.byteLength-16),null,u,o,s,t),a.bytesRead=a.bytesWritten+16,r.sodium_memzero(s)}o.bytesWritten=0,o.bytesRead=0,a.bytesWritten=0,a.bytesRead=0;var u=Buffer.alloc(8,255),l=Buffer.alloc(0),h=Buffer.alloc(32,0),c=r.sodium_malloc(48);function f(e,t){i(32===e.byteLength),i(32===t.byteLength),r.sodium_memzero(c),c.set(t),o(c,t,u,l,h),f.bytesWritten=o.bytesWritten,f.bytesRead=o.bytesRead,e.set(c.subarray(0,32)),r.sodium_memzero(c)}r.sodium_memzero(c),f.bytesWritten=0,f.bytesRead=0},function(e,t,n){var r=n(1),i=n(85),s=r.sodium_malloc(384),o=s.subarray(0,128),a=s.subarray(128,256),u=s.subarray(256,384);e.exports=function(e,t,n){i(64===e.byteLength),i(null!=n.byteLength),i(Array.isArray(t)?t.every(e=>null!=e.byteLength):null!=t.byteLength),n.byteLength>128?(r.crypto_generichash(o.subarray(0,64),n),r.sodium_memzero(o.subarray(64))):(o.set(n),r.sodium_memzero(o.subarray(n.byteLength)));for(var s=0;s<o.byteLength;s++)a[s]=92^o[s],u[s]=54^o[s];r.sodium_memzero(o),r.crypto_generichash_batch(e,[u].concat(t)),r.sodium_memzero(u),r.crypto_generichash_batch(e,[a].concat(e)),r.sodium_memzero(a)},e.exports.BYTES=64,e.exports.KEYBYTES=128},function(e,t){function n(e,t){if(!e)throw new Error(t||"AssertionError")}n.notEqual=function(e,t,r){n(e!=t,r)},n.notOk=function(e,t){n(!e,t)},n.equal=function(e,t,r){n(e==t,r)},n.ok=n,e.exports=n},function(e,t){e.exports=function e(t,r){if(!t){var i=new n(r);throw Error.captureStackTrace&&Error.captureStackTrace(i,e),i}};class n extends Error{}n.prototype.name="AssertionError"},function(e,t){e.exports=function e(t,r,i){r=r||[];var s=i=i||0;for(;t>=n;)r[i++]=255&t|128,t/=128;for(;-128&t;)r[i++]=255&t|128,t>>>=7;return r[i]=0|t,e.bytes=i-s+1,r};var n=Math.pow(2,31)},function(e,t){e.exports=function e(t,n){var r,i=0,s=0,o=n=n||0,a=t.length;do{if(o>=a)throw e.bytes=0,new RangeError("Could not decode varint");r=t[o++],i+=s<28?(127&r)<<s:(127&r)*Math.pow(2,s),s+=7}while(r>=128);return e.bytes=o-n,i}},function(e,t){var n=Math.pow(2,7),r=Math.pow(2,14),i=Math.pow(2,21),s=Math.pow(2,28),o=Math.pow(2,35),a=Math.pow(2,42),u=Math.pow(2,49),l=Math.pow(2,56),h=Math.pow(2,63);e.exports=function(e){return e<n?1:e<r?2:e<i?3:e<s?4:e<o?5:e<a?6:e<u?7:e<l?8:e<h?9:10}},function(e,t,n){var r=n(91),i=r.varint,s=r.skip,o=t.NoisePayload={buffer:!0,encodingLength:null,encode:null,decode:null},a=t.Open={buffer:!0,encodingLength:null,encode:null,decode:null},u=t.Options={buffer:!0,encodingLength:null,encode:null,decode:null},l=t.Status={buffer:!0,encodingLength:null,encode:null,decode:null},h=t.Have={buffer:!0,encodingLength:null,encode:null,decode:null},c=t.Unhave={buffer:!0,encodingLength:null,encode:null,decode:null},f=t.Want={buffer:!0,encodingLength:null,encode:null,decode:null},d=t.Unwant={buffer:!0,encodingLength:null,encode:null,decode:null},p=t.Request={buffer:!0,encodingLength:null,encode:null,decode:null},g=t.Cancel={buffer:!0,encodingLength:null,encode:null,decode:null},y=t.Data={buffer:!0,encodingLength:null,encode:null,decode:null},v=t.Close={buffer:!0,encodingLength:null,encode:null,decode:null};function _(e){return null!=e&&("number"!=typeof e||!isNaN(e))}!function(){var e=[r.bytes];function t(t){var n=0;if(!_(t.nonce))throw new Error("nonce is required");return n+=1+e[0].encodingLength(t.nonce)}o.encodingLength=t,o.encode=function n(r,i,s){s||(s=0),i||(i=Buffer.allocUnsafe(t(r)));var o=s;if(!_(r.nonce))throw new Error("nonce is required");return i[s++]=10,e[0].encode(r.nonce,i,s),s+=e[0].encode.bytes,n.bytes=s-o,i},o.decode=function t(n,r,o){if(r||(r=0),o||(o=n.length),!(o<=n.length&&r<=n.length))throw new Error("Decoded message is not valid");for(var a=r,u={nonce:null},l=!1;;){if(o<=r){if(!l)throw new Error("Decoded message is not valid");return t.bytes=r-a,u}var h=i.decode(n,r);switch(r+=i.decode.bytes,h>>3){case 1:u.nonce=e[0].decode(n,r),r+=e[0].decode.bytes,l=!0;break;default:r=s(7&h,n,r)}}}}(),function(){var e=[r.bytes];function t(t){var n=0;if(!_(t.discoveryKey))throw new Error("discoveryKey is required");(n+=1+e[0].encodingLength(t.discoveryKey),_(t.capability))&&(n+=1+e[0].encodingLength(t.capability));return n}a.encodingLength=t,a.encode=function n(r,i,s){s||(s=0),i||(i=Buffer.allocUnsafe(t(r)));var o=s;if(!_(r.discoveryKey))throw new Error("discoveryKey is required");return i[s++]=10,e[0].encode(r.discoveryKey,i,s),s+=e[0].encode.bytes,_(r.capability)&&(i[s++]=18,e[0].encode(r.capability,i,s),s+=e[0].encode.bytes),n.bytes=s-o,i},a.decode=function t(n,r,o){if(r||(r=0),o||(o=n.length),!(o<=n.length&&r<=n.length))throw new Error("Decoded message is not valid");for(var a=r,u={discoveryKey:null,capability:null},l=!1;;){if(o<=r){if(!l)throw new Error("Decoded message is not valid");return t.bytes=r-a,u}var h=i.decode(n,r);switch(r+=i.decode.bytes,h>>3){case 1:u.discoveryKey=e[0].decode(n,r),r+=e[0].decode.bytes,l=!0;break;case 2:u.capability=e[0].decode(n,r),r+=e[0].decode.bytes;break;default:r=s(7&h,n,r)}}}}(),function(){var e=[r.string,r.bool];function t(t){var n=0;if(_(t.extensions))for(var r=0;r<t.extensions.length;r++){if(_(t.extensions[r]))n+=1+e[0].encodingLength(t.extensions[r])}_(t.ack)&&(n+=1+e[1].encodingLength(t.ack));return n}u.encodingLength=t,u.encode=function n(r,i,s){s||(s=0),i||(i=Buffer.allocUnsafe(t(r)));var o=s;if(_(r.extensions))for(var a=0;a<r.extensions.length;a++)_(r.extensions[a])&&(i[s++]=10,e[0].encode(r.extensions[a],i,s),s+=e[0].encode.bytes);return _(r.ack)&&(i[s++]=16,e[1].encode(r.ack,i,s),s+=e[1].encode.bytes),n.bytes=s-o,i},u.decode=function t(n,r,o){if(r||(r=0),o||(o=n.length),!(o<=n.length&&r<=n.length))throw new Error("Decoded message is not valid");for(var a=r,u={extensions:[],ack:!1};;){if(o<=r)return t.bytes=r-a,u;var l=i.decode(n,r);switch(r+=i.decode.bytes,l>>3){case 1:u.extensions.push(e[0].decode(n,r)),r+=e[0].decode.bytes;break;case 2:u.ack=e[1].decode(n,r),r+=e[1].decode.bytes;break;default:r=s(7&l,n,r)}}}}(),function(){var e=[r.bool];function t(t){var n=0;_(t.uploading)&&(n+=1+e[0].encodingLength(t.uploading));_(t.downloading)&&(n+=1+e[0].encodingLength(t.downloading));return n}l.encodingLength=t,l.encode=function n(r,i,s){s||(s=0),i||(i=Buffer.allocUnsafe(t(r)));var o=s;return _(r.uploading)&&(i[s++]=8,e[0].encode(r.uploading,i,s),s+=e[0].encode.bytes),_(r.downloading)&&(i[s++]=16,e[0].encode(r.downloading,i,s),s+=e[0].encode.bytes),n.bytes=s-o,i},l.decode=function t(n,r,o){if(r||(r=0),o||(o=n.length),!(o<=n.length&&r<=n.length))throw new Error("Decoded message is not valid");for(var a=r,u={uploading:!1,downloading:!1};;){if(o<=r)return t.bytes=r-a,u;var l=i.decode(n,r);switch(r+=i.decode.bytes,l>>3){case 1:u.uploading=e[0].decode(n,r),r+=e[0].decode.bytes;break;case 2:u.downloading=e[0].decode(n,r),r+=e[0].decode.bytes;break;default:r=s(7&l,n,r)}}}}(),function(){var e=[r.varint,r.bytes,r.bool];function t(t){var n=0;if(!_(t.start))throw new Error("start is required");(n+=1+e[0].encodingLength(t.start),_(t.length))&&(n+=1+e[0].encodingLength(t.length));_(t.bitfield)&&(n+=1+e[1].encodingLength(t.bitfield));_(t.ack)&&(n+=1+e[2].encodingLength(t.ack));return n}h.encodingLength=t,h.encode=function n(r,i,s){s||(s=0),i||(i=Buffer.allocUnsafe(t(r)));var o=s;if(!_(r.start))throw new Error("start is required");return i[s++]=8,e[0].encode(r.start,i,s),s+=e[0].encode.bytes,_(r.length)&&(i[s++]=16,e[0].encode(r.length,i,s),s+=e[0].encode.bytes),_(r.bitfield)&&(i[s++]=26,e[1].encode(r.bitfield,i,s),s+=e[1].encode.bytes),_(r.ack)&&(i[s++]=32,e[2].encode(r.ack,i,s),s+=e[2].encode.bytes),n.bytes=s-o,i},h.decode=function t(n,r,o){if(r||(r=0),o||(o=n.length),!(o<=n.length&&r<=n.length))throw new Error("Decoded message is not valid");for(var a=r,u={start:0,length:1,bitfield:null,ack:!1},l=!1;;){if(o<=r){if(!l)throw new Error("Decoded message is not valid");return t.bytes=r-a,u}var h=i.decode(n,r);switch(r+=i.decode.bytes,h>>3){case 1:u.start=e[0].decode(n,r),r+=e[0].decode.bytes,l=!0;break;case 2:u.length=e[0].decode(n,r),r+=e[0].decode.bytes;break;case 3:u.bitfield=e[1].decode(n,r),r+=e[1].decode.bytes;break;case 4:u.ack=e[2].decode(n,r),r+=e[2].decode.bytes;break;default:r=s(7&h,n,r)}}}}(),function(){var e=[r.varint];function t(t){var n=0;if(!_(t.start))throw new Error("start is required");(n+=1+e[0].encodingLength(t.start),_(t.length))&&(n+=1+e[0].encodingLength(t.length));return n}c.encodingLength=t,c.encode=function n(r,i,s){s||(s=0),i||(i=Buffer.allocUnsafe(t(r)));var o=s;if(!_(r.start))throw new Error("start is required");return i[s++]=8,e[0].encode(r.start,i,s),s+=e[0].encode.bytes,_(r.length)&&(i[s++]=16,e[0].encode(r.length,i,s),s+=e[0].encode.bytes),n.bytes=s-o,i},c.decode=function t(n,r,o){if(r||(r=0),o||(o=n.length),!(o<=n.length&&r<=n.length))throw new Error("Decoded message is not valid");for(var a=r,u={start:0,length:1},l=!1;;){if(o<=r){if(!l)throw new Error("Decoded message is not valid");return t.bytes=r-a,u}var h=i.decode(n,r);switch(r+=i.decode.bytes,h>>3){case 1:u.start=e[0].decode(n,r),r+=e[0].decode.bytes,l=!0;break;case 2:u.length=e[0].decode(n,r),r+=e[0].decode.bytes;break;default:r=s(7&h,n,r)}}}}(),function(){var e=[r.varint];function t(t){var n=0;if(!_(t.start))throw new Error("start is required");(n+=1+e[0].encodingLength(t.start),_(t.length))&&(n+=1+e[0].encodingLength(t.length));return n}f.encodingLength=t,f.encode=function n(r,i,s){s||(s=0),i||(i=Buffer.allocUnsafe(t(r)));var o=s;if(!_(r.start))throw new Error("start is required");return i[s++]=8,e[0].encode(r.start,i,s),s+=e[0].encode.bytes,_(r.length)&&(i[s++]=16,e[0].encode(r.length,i,s),s+=e[0].encode.bytes),n.bytes=s-o,i},f.decode=function t(n,r,o){if(r||(r=0),o||(o=n.length),!(o<=n.length&&r<=n.length))throw new Error("Decoded message is not valid");for(var a=r,u={start:0,length:0},l=!1;;){if(o<=r){if(!l)throw new Error("Decoded message is not valid");return t.bytes=r-a,u}var h=i.decode(n,r);switch(r+=i.decode.bytes,h>>3){case 1:u.start=e[0].decode(n,r),r+=e[0].decode.bytes,l=!0;break;case 2:u.length=e[0].decode(n,r),r+=e[0].decode.bytes;break;default:r=s(7&h,n,r)}}}}(),function(){var e=[r.varint];function t(t){var n=0;if(!_(t.start))throw new Error("start is required");(n+=1+e[0].encodingLength(t.start),_(t.length))&&(n+=1+e[0].encodingLength(t.length));return n}d.encodingLength=t,d.encode=function n(r,i,s){s||(s=0),i||(i=Buffer.allocUnsafe(t(r)));var o=s;if(!_(r.start))throw new Error("start is required");return i[s++]=8,e[0].encode(r.start,i,s),s+=e[0].encode.bytes,_(r.length)&&(i[s++]=16,e[0].encode(r.length,i,s),s+=e[0].encode.bytes),n.bytes=s-o,i},d.decode=function t(n,r,o){if(r||(r=0),o||(o=n.length),!(o<=n.length&&r<=n.length))throw new Error("Decoded message is not valid");for(var a=r,u={start:0,length:0},l=!1;;){if(o<=r){if(!l)throw new Error("Decoded message is not valid");return t.bytes=r-a,u}var h=i.decode(n,r);switch(r+=i.decode.bytes,h>>3){case 1:u.start=e[0].decode(n,r),r+=e[0].decode.bytes,l=!0;break;case 2:u.length=e[0].decode(n,r),r+=e[0].decode.bytes;break;default:r=s(7&h,n,r)}}}}(),function(){var e=[r.varint,r.bool];function t(t){var n=0;if(!_(t.index))throw new Error("index is required");(n+=1+e[0].encodingLength(t.index),_(t.bytes))&&(n+=1+e[0].encodingLength(t.bytes));_(t.hash)&&(n+=1+e[1].encodingLength(t.hash));_(t.nodes)&&(n+=1+e[0].encodingLength(t.nodes));return n}p.encodingLength=t,p.encode=function n(r,i,s){s||(s=0),i||(i=Buffer.allocUnsafe(t(r)));var o=s;if(!_(r.index))throw new Error("index is required");return i[s++]=8,e[0].encode(r.index,i,s),s+=e[0].encode.bytes,_(r.bytes)&&(i[s++]=16,e[0].encode(r.bytes,i,s),s+=e[0].encode.bytes),_(r.hash)&&(i[s++]=24,e[1].encode(r.hash,i,s),s+=e[1].encode.bytes),_(r.nodes)&&(i[s++]=32,e[0].encode(r.nodes,i,s),s+=e[0].encode.bytes),n.bytes=s-o,i},p.decode=function t(n,r,o){if(r||(r=0),o||(o=n.length),!(o<=n.length&&r<=n.length))throw new Error("Decoded message is not valid");for(var a=r,u={index:0,bytes:0,hash:!1,nodes:0},l=!1;;){if(o<=r){if(!l)throw new Error("Decoded message is not valid");return t.bytes=r-a,u}var h=i.decode(n,r);switch(r+=i.decode.bytes,h>>3){case 1:u.index=e[0].decode(n,r),r+=e[0].decode.bytes,l=!0;break;case 2:u.bytes=e[0].decode(n,r),r+=e[0].decode.bytes;break;case 3:u.hash=e[1].decode(n,r),r+=e[1].decode.bytes;break;case 4:u.nodes=e[0].decode(n,r),r+=e[0].decode.bytes;break;default:r=s(7&h,n,r)}}}}(),function(){var e=[r.varint,r.bool];function t(t){var n=0;if(!_(t.index))throw new Error("index is required");(n+=1+e[0].encodingLength(t.index),_(t.bytes))&&(n+=1+e[0].encodingLength(t.bytes));_(t.hash)&&(n+=1+e[1].encodingLength(t.hash));return n}g.encodingLength=t,g.encode=function n(r,i,s){s||(s=0),i||(i=Buffer.allocUnsafe(t(r)));var o=s;if(!_(r.index))throw new Error("index is required");return i[s++]=8,e[0].encode(r.index,i,s),s+=e[0].encode.bytes,_(r.bytes)&&(i[s++]=16,e[0].encode(r.bytes,i,s),s+=e[0].encode.bytes),_(r.hash)&&(i[s++]=24,e[1].encode(r.hash,i,s),s+=e[1].encode.bytes),n.bytes=s-o,i},g.decode=function t(n,r,o){if(r||(r=0),o||(o=n.length),!(o<=n.length&&r<=n.length))throw new Error("Decoded message is not valid");for(var a=r,u={index:0,bytes:0,hash:!1},l=!1;;){if(o<=r){if(!l)throw new Error("Decoded message is not valid");return t.bytes=r-a,u}var h=i.decode(n,r);switch(r+=i.decode.bytes,h>>3){case 1:u.index=e[0].decode(n,r),r+=e[0].decode.bytes,l=!0;break;case 2:u.bytes=e[0].decode(n,r),r+=e[0].decode.bytes;break;case 3:u.hash=e[1].decode(n,r),r+=e[1].decode.bytes;break;default:r=s(7&h,n,r)}}}}(),function(){var e=y.Node={buffer:!0,encodingLength:null,encode:null,decode:null};!function(){var t=[r.varint,r.bytes];function n(e){var n=0;if(!_(e.index))throw new Error("index is required");if(n+=1+t[0].encodingLength(e.index),!_(e.hash))throw new Error("hash is required");if(n+=1+t[1].encodingLength(e.hash),!_(e.size))throw new Error("size is required");return n+=1+t[0].encodingLength(e.size)}e.encodingLength=n,e.encode=function e(r,i,s){s||(s=0);i||(i=Buffer.allocUnsafe(n(r)));var o=s;if(!_(r.index))throw new Error("index is required");if(i[s++]=8,t[0].encode(r.index,i,s),s+=t[0].encode.bytes,!_(r.hash))throw new Error("hash is required");if(i[s++]=18,t[1].encode(r.hash,i,s),s+=t[1].encode.bytes,!_(r.size))throw new Error("size is required");return i[s++]=24,t[0].encode(r.size,i,s),s+=t[0].encode.bytes,e.bytes=s-o,i},e.decode=function e(n,r,o){r||(r=0);o||(o=n.length);if(!(o<=n.length&&r<=n.length))throw new Error("Decoded message is not valid");var a=r,u={index:0,hash:null,size:0},l=!1,h=!1,c=!1;for(;;){if(o<=r){if(!l||!h||!c)throw new Error("Decoded message is not valid");return e.bytes=r-a,u}var f=i.decode(n,r);switch(r+=i.decode.bytes,f>>3){case 1:u.index=t[0].decode(n,r),r+=t[0].decode.bytes,l=!0;break;case 2:u.hash=t[1].decode(n,r),r+=t[1].decode.bytes,h=!0;break;case 3:u.size=t[0].decode(n,r),r+=t[0].decode.bytes,c=!0;break;default:r=s(7&f,n,r)}}}}();var t=[r.varint,r.bytes,e];function n(e){var n=0;if(!_(e.index))throw new Error("index is required");(n+=1+(s=t[0].encodingLength(e.index)),_(e.value))&&(n+=1+(s=t[1].encodingLength(e.value)));if(_(e.nodes))for(var r=0;r<e.nodes.length;r++)if(_(e.nodes[r])){var s=t[2].encodingLength(e.nodes[r]);n+=i.encodingLength(s),n+=1+s}_(e.signature)&&(n+=1+(s=t[1].encodingLength(e.signature)));return n}y.encodingLength=n,y.encode=function e(r,s,o){o||(o=0),s||(s=Buffer.allocUnsafe(n(r)));var a=o;if(!_(r.index))throw new Error("index is required");if(s[o++]=8,t[0].encode(r.index,s,o),o+=t[0].encode.bytes,_(r.value)&&(s[o++]=18,t[1].encode(r.value,s,o),o+=t[1].encode.bytes),_(r.nodes))for(var u=0;u<r.nodes.length;u++)_(r.nodes[u])&&(s[o++]=26,i.encode(t[2].encodingLength(r.nodes[u]),s,o),o+=i.encode.bytes,t[2].encode(r.nodes[u],s,o),o+=t[2].encode.bytes);return _(r.signature)&&(s[o++]=34,t[1].encode(r.signature,s,o),o+=t[1].encode.bytes),e.bytes=o-a,s},y.decode=function e(n,r,o){if(r||(r=0),o||(o=n.length),!(o<=n.length&&r<=n.length))throw new Error("Decoded message is not valid");for(var a=r,u={index:0,value:null,nodes:[],signature:null},l=!1;;){if(o<=r){if(!l)throw new Error("Decoded message is not valid");return e.bytes=r-a,u}var h=i.decode(n,r);switch(r+=i.decode.bytes,h>>3){case 1:u.index=t[0].decode(n,r),r+=t[0].decode.bytes,l=!0;break;case 2:u.value=t[1].decode(n,r),r+=t[1].decode.bytes;break;case 3:var c=i.decode(n,r);r+=i.decode.bytes,u.nodes.push(t[2].decode(n,r,r+c)),r+=t[2].decode.bytes;break;case 4:u.signature=t[1].decode(n,r),r+=t[1].decode.bytes;break;default:r=s(7&h,n,r)}}}}(),function(){var e=[r.bytes];function t(t){var n=0;_(t.discoveryKey)&&(n+=1+e[0].encodingLength(t.discoveryKey));return n}v.encodingLength=t,v.encode=function n(r,i,s){s||(s=0),i||(i=Buffer.allocUnsafe(t(r)));var o=s;return _(r.discoveryKey)&&(i[s++]=10,e[0].encode(r.discoveryKey,i,s),s+=e[0].encode.bytes),n.bytes=s-o,i},v.decode=function t(n,r,o){if(r||(r=0),o||(o=n.length),!(o<=n.length&&r<=n.length))throw new Error("Decoded message is not valid");for(var a=r,u={discoveryKey:null};;){if(o<=r)return t.bytes=r-a,u;var l=i.decode(n,r);switch(r+=i.decode.bytes,l>>3){case 1:u.discoveryKey=e[0].decode(n,r),r+=e[0].decode.bytes;break;default:r=s(7&l,n,r)}}}}()},function(e,t,n){var r=n(8),i=n(92);function s(e,t,n,r){return t.bytes=n.bytes=0,{type:e,encode:t,decode:n,encodingLength:r}}function o(e){return Buffer.isBuffer(e)?e.length:Buffer.byteLength(e)}t.make=s,t.name=function(e){for(var n=Object.keys(t),r=0;r<n.length;r++)if(t[n[r]]===e)return n[r];return null},t.skip=function(e,t,n){switch(e){case 0:return r.decode(t,n),n+r.decode.bytes;case 1:return n+8;case 2:var i=r.decode(t,n);return n+r.decode.bytes+i;case 3:case 4:throw new Error("Groups are not supported");case 5:return n+4}throw new Error("Unknown wire type: "+e)},t.bytes=s(2,(function e(t,n,i){var s=i,a=o(t);return r.encode(a,n,i),i+=r.encode.bytes,Buffer.isBuffer(t)?t.copy(n,i):n.write(t,i,a),e.bytes=(i+=a)-s,n}),(function e(t,n){var i=n,s=r.decode(t,n);n+=r.decode.bytes;var o=t.slice(n,n+s);return n+=o.length,e.bytes=n-i,o}),(function(e){var t=o(e);return r.encodingLength(t)+t})),t.string=s(2,(function e(t,n,i){var s=i,o=Buffer.byteLength(t);return r.encode(o,n,i,"utf-8"),i+=r.encode.bytes,n.write(t,i,o),e.bytes=(i+=o)-s,n}),(function e(t,n){var i=n,s=r.decode(t,n);n+=r.decode.bytes;var o=t.toString("utf-8",n,n+s);return e.bytes=(n+=s)-i,o}),(function(e){var t=Buffer.byteLength(e);return r.encodingLength(t)+t})),t.bool=s(0,(function e(t,n,r){return n[r]=t?1:0,e.bytes=1,n}),(function e(t,n){var r=t[n]>0;return e.bytes=1,r}),(function(){return 1})),t.int32=s(0,(function e(t,n,i){return r.encode(t<0?t+4294967296:t,n,i),e.bytes=r.encode.bytes,n}),(function e(t,n){var i=r.decode(t,n);return e.bytes=r.decode.bytes,i>2147483647?i-4294967296:i}),(function(e){return r.encodingLength(e<0?e+4294967296:e)})),t.int64=s(0,(function e(t,n,i){if(t<0){var s=i+9;for(r.encode(-1*t,n,i),n[i+=r.encode.bytes-1]=128|n[i];i<s-1;)n[++i]=255;n[s]=1,e.bytes=10}else r.encode(t,n,i),e.bytes=r.encode.bytes;return n}),(function e(t,n){var i=r.decode(t,n);if(i>=Math.pow(2,63)){for(var s=9;255===t[n+s-1];)s--;s=s||9;var o=Buffer.allocUnsafe(s);t.copy(o,0,n,n+s),o[s-1]=127&o[s-1],i=-1*r.decode(o,0),e.bytes=10}else e.bytes=r.decode.bytes;return i}),(function(e){return e<0?10:r.encodingLength(e)})),t.sint32=t.sint64=s(0,i.encode,i.decode,i.encodingLength),t.uint32=t.uint64=t.enum=t.varint=s(0,r.encode,r.decode,r.encodingLength),t.fixed64=t.sfixed64=s(1,(function e(t,n,r){return t.copy(n,r),e.bytes=8,n}),(function e(t,n){var r=t.slice(n,n+8);return e.bytes=8,r}),(function(){return 8})),t.double=s(1,(function e(t,n,r){return n.writeDoubleLE(t,r),e.bytes=8,n}),(function e(t,n){var r=t.readDoubleLE(n);return e.bytes=8,r}),(function(){return 8})),t.fixed32=s(5,(function e(t,n,r){return n.writeUInt32LE(t,r),e.bytes=4,n}),(function e(t,n){var r=t.readUInt32LE(n);return e.bytes=4,r}),(function(){return 4})),t.sfixed32=s(5,(function e(t,n,r){return n.writeInt32LE(t,r),e.bytes=4,n}),(function e(t,n){var r=t.readInt32LE(n);return e.bytes=4,r}),(function(){return 4})),t.float=s(5,(function e(t,n,r){return n.writeFloatLE(t,r),e.bytes=4,n}),(function e(t,n){var r=t.readFloatLE(n);return e.bytes=4,r}),(function(){return 4}))},function(e,t,n){var r=n(8);t.encode=function e(t,n,i){t=t>=0?2*t:-2*t-1;var s=r.encode(t,n,i);return e.bytes=r.encode.bytes,s},t.decode=function e(t,n){var i=r.decode(t,n);return e.bytes=r.decode.bytes,1&i?(i+1)/-2:i/2},t.encodingLength=function(e){return r.encodingLength(e>=0?2*e:-2*e-1)}},function(e,t,n){const r=n(94),i=n(7);e.exports=class{constructor(e,t){this.rnonce=e.rnonce,this.tnonce=e.tnonce,this.rx=new r(this.rnonce,t.rx.slice(0,32)),this.tx=new r(this.tnonce,t.tx.slice(0,32))}encrypt(e){return this.tx.update(e,e),e}decrypt(e){return this.rx.update(e,e),e}destroy(){this.tx.final(),this.rx.final()}static nonce(){return i.randomBytes(24)}}},function(e,t,n){const r=n(1);e.exports=class{constructor(e,t){this.handle=Buffer.alloc(r.crypto_stream_xor_STATEBYTES),this.nonce=e,this.key=t,r.crypto_stream_xor_init(this.handle,this.nonce,this.key)}update(e,t){r.crypto_stream_xor_update(this.handle,e,t)}final(){r.crypto_stream_xor_final(this.handle)}}},function(e,t,n){const r=n(8);e.exports=class{constructor({maxSize:e=8388608,context:t=null,onmessage:n=null,onmissing:r=null,types:i=null}={}){this._message=null,this._ptr=0,this._varint=0,this._factor=1,this._length=0,this._header=0,this._state=0,this._consumed=0,this._maxSize=e,this._types=i||[],this.receiving=!1,this.destroyed=!1,this.error=null,this.context=t,this.onmessage=n,this.onmissing=r}destroy(e){e&&(this.error=e),this.destroyed=!0}recv(e){if(!0===this.receiving)throw new Error("Cannot recursively receive data");this.receiving=!0;let t=0;for(;t<e.length;)t=2===this._state?this._readMessage(e,t):this._readVarint(e,t);return 2===this._state&&0===this._length&&this._readMessage(e,t),this.receiving=!1,!this.destroyed}_readMessage(e,t){const n=e.length-t;return n>=this._length?(this._message?e.copy(this._message,this._message.length-this._length,t):this._message=e.slice(t,t+this._length),this._nextState(e,t+=this._length)?t:e.length):(this._message||(this._message=Buffer.allocUnsafe(this._length)),e.copy(this._message,this._message.length-this._length,t),this._length-=n,e.length)}_readVarint(e,t){for(;t<e.length;t++){if(this._varint+=(127&e[t])*this._factor,this._consumed++,e[t]<128)return this._nextState(e,++t)?t:e.length;this._factor*=128}return this._consumed>=8&&this.destroy(new Error("Incoming varint is invalid")),e.length}_nextState(e,t){switch(this._state){case 0:return this._state=1,this._factor=1,this._length=this._varint,this._consumed=this._varint=0,0===this._length&&(this._state=0),!0;case 1:if(this._state=2,this._factor=1,this._header=this._varint,this._length-=this._consumed,this._consumed=this._varint=0,this._length<0||this._length>this._maxSize)return this.destroy(new Error("Incoming message is larger than max size")),!1;if(this.onmissing){const n=e.length-t;this._length>n&&this.onmissing(this._length-n,this.context)}return!0;case 2:return this._state=0,this._onmessage(this._header>>4,15&this._header,this._message,e,t),this._message=null,!this.destroyed;default:return!1}}_onmessage(e,t,n,r,i){if(t>=this._types.length){if(null===this.onmessage)return;return this.onmessage(e,t,n,this.context,r,i)}let s=null;const{onmessage:o,encoding:a,context:u}=this._types[t];try{s=a.decode(n)}catch(e){return void this.destroy(e)}o(e,s,u,r,i)}send(e,t,n){const i=e<<4|t,s=this._encodingLength(t,n)+r.encodingLength(i),o=Buffer.allocUnsafe(r.encodingLength(s)+s);r.encode(s,o,0);const a=r.encode.bytes;return r.encode(i,o,a),this._encode(t,n,o,a+r.encode.bytes),o}sendBatch(e){let t=0,n=0;for(const{type:n,message:r}of e)t+=16+this._encodingLength(n,r);const i=Buffer.allocUnsafe(t);for(const{channel:t,type:s,message:o}of e){const e=t<<4|s,a=this._encodingLength(s,o)+r.encodingLength(e);r.encode(a,i,n),n+=r.encode.bytes,r.encode(e,i,n),n+=r.encode.bytes,n+=this._encode(s,o,i,n)}return i.slice(0,n)}_encodingLength(e,t){return e>=this._types.length?t.length:this._types[e].encoding.encodingLength(t)}_encode(e,t,n,r){if(e>=this._types.length)return t.copy(n,r),t.length;const i=this._types[e].encoding;return i.encode(t,n,r),i.encode.bytes}}},function(e,t){function n(e,t,i){if(!(this instanceof n))return new n(e,t,i);this.ms=e,this.ontimeout=t,this.context=i||null,this._timeout=setTimeout(r,e,this),this._timeout.unref()}function r(e){e.ontimeout.call(e.context)}e.exports=n,n.prototype.refresh=function(){this._timeout.refresh()},n.prototype.destroy=function(){this.ontimeout=null,clearTimeout(this._timeout)}},function(e,t){function n(e,t,i){if(!(this instanceof n))return new n(e,t,i);this.ms=e,this.ontimeout=t,this.context=i||null,this._timeout=setTimeout(r,e,this)}function r(e){e.ontimeout.call(e.context)}e.exports=n,n.prototype.refresh=function(){clearTimeout(this._timeout),this._timeout=setTimeout(r,this.ms,this)},n.prototype.destroy=function(){this.ontimeout=null,clearTimeout(this._timeout)}},function(e,t,n){var r=n(99),i=r.enroll||u,s=r._unrefActive||r.active||u,o=r.unenroll||u;function a(e,t,n){if(!(this instanceof a))return new a(e,t,n);this.ms=e,this.ontimeout=t,this.context=n||null,i(this,e),s(this)}function u(){}e.exports=a,a.prototype._onTimeout=function(){this.ontimeout.call(this.context)},a.prototype.refresh=function(){s(this)},a.prototype.destroy=function(){this.ontimeout=null,o(this)}},function(e,t){e.exports=require("timers")},function(e,t,n){const{EventEmitter:r}=n(10),i=new Error("Stream was destroyed"),s=n(101),o=Symbol.asyncIterator||Symbol("asyncIterator");class a{constructor(e,{highWaterMark:t=16384,map:n=null,mapWritable:r,byteLength:i,byteLengthWritable:o}={}){this.stream=e,this.queue=new s,this.highWaterMark=t,this.buffered=0,this.error=null,this.pipeline=null,this.byteLength=o||i||L,this.map=r||n,this.afterWrite=p.bind(this)}get ended(){return 0!=(this.stream._duplexState&32<<16)}push(e){return null!==this.map&&(e=this.map(e)),this.buffered+=this.byteLength(e),this.queue.push(e),this.buffered<this.highWaterMark?(this.stream._duplexState|=8<<16,!0):(this.stream._duplexState|=1572864,!1)}shift(){const e=this.queue.shift(),t=this.stream;return this.buffered-=this.byteLength(e),0===this.buffered&&(t._duplexState&=33030143),e}end(e){"function"==typeof e?this.stream.once("finish",e):null!=e&&this.push(e),this.stream._duplexState=33423359&(this.stream._duplexState|256<<16)}autoBatch(e,t){const n=[],r=this.stream;for(n.push(e);589824==(589831&r._duplexState);)n.push(r._writableState.shift());if(0!=(7&r._duplexState))return t(null);r._writev(n,t)}update(){const e=this.stream;for(;(589831&e._duplexState)==8<<16;){const t=this.shift();e._duplexState|=327680,e._write(t,this.afterWrite),e._duplexState&=33292287}0==(196608&e._duplexState)&&this.updateNonPrimary()}updateNonPrimary(){const e=this.stream;if((17301511&e._duplexState)==256<<16)return e._duplexState=16777215&(65536|e._duplexState),void e._final(f.bind(this));2!=(6&e._duplexState)?1==(7&e._duplexState)&&(e._duplexState=33554430&(65544|e._duplexState),e._open(_.bind(this))):0==(65544&e._duplexState)&&(e._duplexState|=65544,e._destroy(d.bind(this)))}updateNextTick(){0==(8454144&this.stream._duplexState)&&(this.stream._duplexState|=8454144,process.nextTick(v,this))}}class u{constructor(e,{highWaterMark:t=16384,map:n=null,mapReadable:r,byteLength:i,byteLengthReadable:o}={}){this.stream=e,this.queue=new s,this.highWaterMark=t,this.buffered=0,this.error=null,this.pipeline=null,this.byteLength=o||i||L,this.map=r||n,this.pipeTo=null,this.afterRead=g.bind(this)}get ended(){return 0!=(8192&this.stream._duplexState)}pipe(e,t){if(null!==this.pipeTo)throw new Error("Can only pipe to one destination");if(this.stream._duplexState|=256,this.pipeTo=e,this.pipeline=new h(this.stream,e,t||null),t&&this.stream.on("error",B),E(e))e._writableState.pipeline=this.pipeline,t&&e.on("error",B),e.on("finish",this.pipeline.finished.bind(this.pipeline));else{const t=this.pipeline.done.bind(this.pipeline,e),n=this.pipeline.done.bind(this.pipeline,e,null);e.on("error",t),e.on("close",n),e.on("finish",this.pipeline.finished.bind(this.pipeline))}e.on("drain",c.bind(this)),this.stream.emit("piping",e),e.emit("pipe",this.stream)}push(e){const t=this.stream;return null===e?(this.highWaterMark=0,t._duplexState=33521647&(512|t._duplexState),!1):(null!==this.map&&(e=this.map(e)),this.buffered+=this.byteLength(e),this.queue.push(e),t._duplexState=33521663&(64|t._duplexState),this.buffered<this.highWaterMark)}shift(){const e=this.queue.shift();return this.buffered-=this.byteLength(e),0===this.buffered&&(this.stream._duplexState&=33550271),e}unshift(e){const t=[];for(;void 0===this.queue.shift()!==void 0;)t.push(void 0);this.push(e);for(let e=0;e<t.length;e++)this.queue.push(t[e])}read(){const e=this.stream;if(64==(8263&e._duplexState)){const t=this.shift();return 0!=(1024&e._duplexState)&&e.emit("data",t),null!==this.pipeTo&&!1===this.pipeTo.write(t)&&(e._duplexState&=33554047),t}return null}drain(){const e=this.stream;for(;64==(8263&e._duplexState)&&0!=(384&e._duplexState);){const t=this.shift();0!=(1024&e._duplexState)&&e.emit("data",t),null!==this.pipeTo&&!1===this.pipeTo.write(t)&&(e._duplexState&=33554047)}}update(){const e=this.stream;for(this.drain();this.buffered<this.highWaterMark&&0==(41487&e._duplexState);)e._duplexState|=32808,e._read(this.afterRead),e._duplexState&=33554399,0==(8&e._duplexState)&&this.drain();2112==(6215&e._duplexState)&&(e._duplexState|=4096,e.emit("readable")),0==(24&e._duplexState)&&this.updateNonPrimary()}updateNonPrimary(){const e=this.stream;512==(583&e._duplexState)&&(e._duplexState=33553919&(8192|e._duplexState),e.emit("end"),2105344==(2105350&e._duplexState)&&(e._duplexState|=2),null!==this.pipeTo&&this.pipeTo.end()),2!=(6&e._duplexState)?1==(7&e._duplexState)&&(e._duplexState=33554430&(65544|e._duplexState),e._open(_.bind(this))):0==(65544&e._duplexState)&&(e._duplexState|=65544,e._destroy(d.bind(this)))}updateNextTick(){0==(16392&this.stream._duplexState)&&(this.stream._duplexState|=16392,process.nextTick(y,this))}}class l{constructor(e){this.data=null,this.afterTransform=b.bind(e),this.afterFinal=null}}class h{constructor(e,t,n){this.from=e,this.to=t,this.afterPipe=n,this.error=null,this.pipeToFinished=!1}finished(){this.pipeToFinished=!0}done(e,t){t&&(this.error=t),e!==this.to||(this.to=null,null===this.from)?e!==this.from||(this.from=null,null===this.to)?(null!==this.afterPipe&&this.afterPipe(this.error),this.to=this.from=this.afterPipe=null):0==(8192&e._duplexState)&&this.to.destroy(new Error("Readable stream closed before ending")):0!=(8192&this.from._duplexState)&&this.pipeToFinished||this.from.destroy(new Error("Writable stream closed prematurely"))}}function c(){this.stream._duplexState|=256,0==(40&this.stream._duplexState)&&this.updateNextTick()}function f(e){const t=this.stream;e&&t.destroy(e),0==(6&t._duplexState)&&(t._duplexState|=32<<16,t.emit("finish")),2105344==(2105350&t._duplexState)&&(t._duplexState|=2),t._duplexState&=33488895,this.update()}function d(e){const t=this.stream;e||this.error===i||(e=this.error),e&&t.emit("error",e),t._duplexState|=4,t.emit("close");const n=t._readableState,r=t._writableState;null!==n&&null!==n.pipeline&&n.pipeline.done(t,e),null!==r&&null!==r.pipeline&&r.pipeline.done(t,e)}function p(e){const t=this.stream;e&&t.destroy(e),t._duplexState&=33488895,(1638407&t._duplexState)==16<<16&&(t._duplexState&=32505855,(t._duplexState&64<<16)==64<<16&&t.emit("drain")),0==(t._duplexState&4<<16)&&this.update()}function g(e){e&&this.stream.destroy(e),this.stream._duplexState&=33554423,0==(32&this.stream._duplexState)&&this.update()}function y(e){e.stream._duplexState&=33538039,e.update()}function v(e){e.stream._duplexState&=25100287,e.update()}function _(e){const t=this.stream;e&&t.destroy(e),0==(2&t._duplexState)&&(0==(8711&t._duplexState)&&(t._duplexState|=16),0==(18874375&t._duplexState)&&(t._duplexState|=2<<16),t.emit("open")),t._duplexState&=33488887,null!==t._writableState&&t._writableState.update(),null!==t._readableState&&t._readableState.update()}function b(e,t){null!=t&&this.push(t),this._writableState.afterWrite(e)}class m extends r{constructor(e){super(),this._duplexState=0,this._readableState=null,this._writableState=null,e&&(e.open&&(this._open=e.open),e.destroy&&(this._destroy=e.destroy),e.predestroy&&(this._predestroy=e.predestroy))}_open(e){e(null)}_destroy(e){e(null)}_predestroy(){}get readable(){return null!==this._readableState||void 0}get writable(){return null!==this._writableState||void 0}get destroyed(){return 0!=(4&this._duplexState)}get destroying(){return 0!=(6&this._duplexState)}destroy(e){0==(6&this._duplexState)&&(e||(e=i),this._duplexState=33423343&(2|this._duplexState),this._predestroy(),null!==this._readableState&&(this._readableState.error=e,this._readableState.updateNextTick()),null!==this._writableState&&(this._writableState.error=e,this._writableState.updateNextTick()))}on(e,t){return null!==this._readableState&&("data"===e&&(this._duplexState|=1152,this._readableState.updateNextTick()),"readable"===e&&(this._duplexState|=2048,this._readableState.updateNextTick())),null!==this._writableState&&"drain"===e&&(this._duplexState|=64<<16,this._writableState.updateNextTick()),super.on(e,t)}}class w extends m{constructor(e){super(e),this._duplexState|=2097153,this._readableState=new u(this,e),e&&e.read&&(this._read=e.read)}_read(e){e(null)}pipe(e,t){return this._readableState.pipe(e,t),this._readableState.updateNextTick(),e}read(){return this._readableState.updateNextTick(),this._readableState.read()}push(e){return this._readableState.updateNextTick(),this._readableState.push(e)}unshift(e){return this._readableState.updateNextTick(),this._readableState.unshift(e)}resume(){this._duplexState|=128,this._readableState.updateNextTick()}pause(){this._duplexState&=33554303}static _fromAsyncIterator(e){let t;const n=new w({read(t){e.next().then(r).then(t.bind(null,null)).catch(t)},predestroy(){t=e.return()},destroy(e){t.then(e.bind(null,null)).catch(e)}});return n;function r(e){e.done?n.push(null):n.push(e.value)}}static from(e){if(e[o])return this._fromAsyncIterator(e[o]());Array.isArray(e)||(e=void 0===e?[]:[e]);let t=0;return new w({read(n){this.push(t===e.length?null:e[t++]),n(null)}})}static isBackpressured(e){return 0!=(8710&e._duplexState)||e._readableState.buffered>=e._readableState.highWaterMark}[o](){const e=this;let t,n,r=null;return this.on("error",e=>{r=e}),this.on("readable",()=>a(null,e.read())),this.on("close",()=>a(r,null)),{[o](){return this},next:()=>new Promise((function(i,s){t=i,n=s;const o=e.read();null!==o?a(null,o):0!=(4&e._duplexState)&&a(r,null)})),return:()=>s(null),throw:e=>s(e)};function s(t){return e.destroy(t),new Promise((n,r)=>{if(4&e._duplexState)return n();e.once("close",(function(){t?r(t):n({value:void 0,done:!0})}))})}function a(r,s){null!==n&&(r?n(r):null===s&&0==(8192&e._duplexState)?n(i):t({value:s,done:null===s}),n=t=null)}}}class x extends w{constructor(e){super(e),this._duplexState=1,this._writableState=new a(this,e),e&&(e.writev&&(this._writev=e.writev),e.write&&(this._write=e.write),e.final&&(this._final=e.final))}_writev(e,t){t(null)}_write(e,t){this._writableState.autoBatch(e,t)}_final(e){e(null)}write(e){return this._writableState.updateNextTick(),this._writableState.push(e)}end(e){this._writableState.updateNextTick(),this._writableState.end(e)}}function k(e,t){const n=this._transformState.afterFinal;if(e)return n(e);null!=t&&this.push(t),this.push(null),n(null)}function S(e){return!!e._readableState||!!e._writableState}function E(e){return"number"==typeof e._duplexState&&S(e)}function L(e){return Buffer.isBuffer(e)?e.length:1024}function B(){}e.exports={isStream:S,isStreamx:E,Stream:m,Writable:class extends m{constructor(e){super(e),this._duplexState|=8193,this._writableState=new a(this,e),e&&(e.writev&&(this._writev=e.writev),e.write&&(this._write=e.write),e.final&&(this._final=e.final))}_writev(e,t){t(null)}_write(e,t){this._writableState.autoBatch(e,t)}_final(e){e(null)}static isBackpressured(e){return 0!=(19922950&e._duplexState)}write(e){return this._writableState.updateNextTick(),this._writableState.push(e)}end(e){this._writableState.updateNextTick(),this._writableState.end(e)}},Readable:w,Duplex:x,Transform:class extends x{constructor(e){super(e),this._transformState=new l(this),e&&(e.transform&&(this._transform=e.transform),e.flush&&(this._flush=e.flush))}_write(e,t){this._readableState.buffered>=this._readableState.highWaterMark?this._transformState.data=e:this._transform(e,this._transformState.afterTransform)}_read(e){if(null!==this._transformState.data){const t=this._transformState.data;this._transformState.data=null,e(null),this._transform(t,this._transformState.afterTransform)}else e(null)}_transform(e,t){t(null,e)}_flush(e){e(null)}_final(e){this._transformState.afterFinal=e,this._flush(k.bind(this))}}}},function(e,t,n){const r=n(102);e.exports=class{constructor(e){this.hwm=e||16,this.head=new r(this.hwm),this.tail=this.head}push(e){if(!this.head.push(e)){const t=this.head;this.head=t.next=new r(2*this.head.buffer.length),this.head.push(e)}}shift(){const e=this.tail.shift();if(void 0===e&&this.tail.next){const e=this.tail.next;return this.tail.next=null,this.tail=e,this.tail.shift()}return e}isEmpty(){return this.head.isEmpty()}}},function(e,t){e.exports=class{constructor(e){if(!(e>0)||0!=(e-1&e))throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(e),this.mask=e-1,this.top=0,this.btm=0,this.next=null}push(e){return void 0===this.buffer[this.top]&&(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}shift(){const e=this.buffer[this.btm];if(void 0!==e)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}isEmpty(){return void 0===this.buffer[this.btm]}}},function(e,t,n){"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?e.exports=n(104):e.exports=n(106)},function(e,t,n){t.log=function(...e){return"object"==typeof console&&console.log&&console.log(...e)},t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;t.splice(1,0,n,"color: inherit");let r=0,i=0;t[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(r++,"%c"===e&&(i=r))}),t.splice(i,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.exports=n(41)(t);const{formatters:r}=e.exports;r.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},function(e,t){var n=1e3,r=6e4,i=60*r,s=24*i;function o(e,t,n,r){var i=t>=1.5*n;return Math.round(e/n)+" "+r+(i?"s":"")}e.exports=function(e,t){t=t||{};var a=typeof e;if("string"===a&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!t)return;var o=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*o;case"weeks":case"week":case"w":return 6048e5*o;case"days":case"day":case"d":return o*s;case"hours":case"hour":case"hrs":case"hr":case"h":return o*i;case"minutes":case"minute":case"mins":case"min":case"m":return o*r;case"seconds":case"second":case"secs":case"sec":case"s":return o*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return}}(e);if("number"===a&&isFinite(e))return t.long?function(e){var t=Math.abs(e);if(t>=s)return o(e,t,s,"day");if(t>=i)return o(e,t,i,"hour");if(t>=r)return o(e,t,r,"minute");if(t>=n)return o(e,t,n,"second");return e+" ms"}(e):function(e){var t=Math.abs(e);if(t>=s)return Math.round(e/s)+"d";if(t>=i)return Math.round(e/i)+"h";if(t>=r)return Math.round(e/r)+"m";if(t>=n)return Math.round(e/n)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,n){const r=n(107),i=n(2);t.init=function(e){e.inspectOpts={};const n=Object.keys(t.inspectOpts);for(let r=0;r<n.length;r++)e.inspectOpts[n[r]]=t.inspectOpts[n[r]]},t.log=function(...e){return process.stderr.write(i.format(...e)+"\n")},t.formatArgs=function(n){const{namespace:r,useColors:i}=this;if(i){const t=this.color,i="[3"+(t<8?t:"8;5;"+t),s=`  ${i};1m${r} [0m`;n[0]=s+n[0].split("\n").join("\n"+s),n.push(i+"m+"+e.exports.humanize(this.diff)+"[0m")}else n[0]=function(){if(t.inspectOpts.hideDate)return"";return(new Date).toISOString()+" "}()+r+" "+n[0]},t.save=function(e){e?process.env.DEBUG=e:delete process.env.DEBUG},t.load=function(){return process.env.DEBUG},t.useColors=function(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):r.isatty(process.stderr.fd)},t.colors=[6,2,3,4,5,1];try{const e=n(108);e&&(e.stderr||e).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}t.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,t)=>{const n=t.substring(6).toLowerCase().replace(/_([a-z])/g,(e,t)=>t.toUpperCase());let r=process.env[t];return r=!!/^(yes|on|true|enabled)$/i.test(r)||!/^(no|off|false|disabled)$/i.test(r)&&("null"===r?null:Number(r)),e[n]=r,e},{}),e.exports=n(41)(t);const{formatters:s}=e.exports;s.o=function(e){return this.inspectOpts.colors=this.useColors,i.inspect(e,this.inspectOpts).replace(/\s*\n\s*/g," ")},s.O=function(e){return this.inspectOpts.colors=this.useColors,i.inspect(e,this.inspectOpts)}},function(e,t){e.exports=require("tty")},function(e,t,n){"use strict";const r=n(31),i=n(109),{env:s}=process;let o;function a(e){return function(e){return 0!==e&&{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}(function(e){if(0===o)return 0;if(i("color=16m")||i("color=full")||i("color=truecolor"))return 3;if(i("color=256"))return 2;if(e&&!e.isTTY&&void 0===o)return 0;const t=o||0;if("dumb"===s.TERM)return t;if("win32"===process.platform){const e=r.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(e[0])>=10&&Number(e[2])>=10586?Number(e[2])>=14931?3:2:1}if("CI"in s)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(e=>e in s)||"codeship"===s.CI_NAME?1:t;if("TEAMCITY_VERSION"in s)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(s.TEAMCITY_VERSION)?1:0;if("truecolor"===s.COLORTERM)return 3;if("TERM_PROGRAM"in s){const e=parseInt((s.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(s.TERM_PROGRAM){case"iTerm.app":return e>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(s.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(s.TERM)||"COLORTERM"in s?1:t}(e))}i("no-color")||i("no-colors")||i("color=false")||i("color=never")?o=0:(i("color")||i("colors")||i("color=true")||i("color=always"))&&(o=1),"FORCE_COLOR"in s&&(o=!0===s.FORCE_COLOR||"true"===s.FORCE_COLOR?1:!1===s.FORCE_COLOR||"false"===s.FORCE_COLOR?0:0===s.FORCE_COLOR.length?1:Math.min(parseInt(s.FORCE_COLOR,10),3)),e.exports={supportsColor:a,stdout:a(process.stdout),stderr:a(process.stderr)}},function(e,t,n){"use strict";e.exports=(e,t)=>{t=t||process.argv;const n=e.startsWith("-")?"":1===e.length?"-":"--",r=t.indexOf(n+e),i=t.indexOf("--");return-1!==r&&(-1===i||r<i)}},function(e,t,n){"use strict";const r=n(111);e.exports=()=>new h;class i{constructor(e){const t=new Uint8Array(e?8456:4360),n=t.byteOffset;this.buffer=t,this.bits=e?null:new Uint32Array(t.buffer,n,1024),this.children=e?new Array(32768):null,this.level=e,this.allOne=e?[new Uint32Array(t.buffer,n,1024),new Uint32Array(t.buffer,n+4096,32),new Uint32Array(t.buffer,n+4224,1)]:[this.bits,new Uint32Array(t.buffer,n+4096,32),new Uint32Array(t.buffer,n+4224,1)],this.oneOne=e?[new Uint32Array(t.buffer,n+4228,1024),new Uint32Array(t.buffer,n+8324,32),new Uint32Array(t.buffer,n+8452,1)]:[this.bits,new Uint32Array(t.buffer,n+4228,32),new Uint32Array(t.buffer,n+4356,1)]}}const s=[new i(0),new i(1),new i(2),new i(3)],o=new Uint32Array(32),a=new Uint32Array(32);for(var u=0;u<32;u++)o[u]=Math.pow(2,31-u)-1,a[u]=Math.pow(2,32-u)-1;const l=255===new Uint8Array(o.buffer,o.byteOffset,1)[0];class h{constructor(){this.length=32768,this.littleEndian=l,this._path=new Uint16Array(5),this._offsets=new Uint16Array(this._path.buffer,this._path.byteOffset+2,4),this._parents=new Array(4).fill(null),this._page=new i(0),this._allocs=1}last(){for(var e=this._page,t=0;;){for(var n=2;n>=0;n--){const i=r(e.oneOne[n][t]);if(32===i)return-1;t=31-i+(t<<5)}if(this._path[e.level]=t,!e.level)return f(this._path);e=e.children[t],t=0}}set(e,t){const n=this._getPage(e,t);if(!n)return!1;const r=this._path[0],i=31&r,s=r>>>5,o=n.bits[s];n.bits[s]=t?o|2147483648>>>i:o&~(2147483648>>>i);const a=n.bits[s];return a!==o&&(this._updateAllOne(n,s,a),this._updateOneOne(n,s,a),!0)}get(e){const t=this._getPage(e,!1);if(!t)return!1;const n=this._path[0],r=31&n;return 0!=(t.bits[n>>>5]&2147483648>>>r)}iterator(){return new c(this)}fill(e,t,n){return t||(t=0),!0===e?this._fillBit(!0,t,0===n?n:n||this.length):!1===e?this._fillBit(!1,t,0===n?n:n||this.length):void this._fillBuffer(e,t,0===n?n:n||t+8*e.length)}grow(){if(3===this._page.level)throw new Error("Cannot grow beyond "+this.length);const e=this._page;this._page=new i(e.level+1),this._page.children[0]=e,3===this._page.level?this.length=Number.MAX_SAFE_INTEGER:this.length*=32768}_fillBuffer(e,t,n){if(7&t||7&n)throw new Error("Offsets must be a multiple of 8");for(t/=8;n>this.length;)this.grow();n/=8;const r=t;for(var i=this._getPage(8*t,!0);t<n;){const s=n-t<4096?n-t:4096,o=t-r;(t+=this._setPageBuffer(i,e.subarray(o,o+s),1023&t))!==n&&(i=this._nextPage(i,8*t))}}_fillBit(e,t,n){for(var r=this._getPage(t,e);t<n;){const i=n-t<32768?n-t:32768;(t+=this._setPageBits(r,e,32767&t,i))!==n&&(r=this._nextPage(r,t))}}_nextPage(e,t){const n=++this._offsets[e.level];return 32768===n?this._getPage(t,!0):this._parents[e.level].children[n]||this._addPage(this._parents[e.level],n)}_setPageBuffer(e,t,n){return new Uint8Array(e.bits.buffer,e.bits.byteOffset,4*e.bits.length).set(t,n),n>>>=2,this._update(e,n,n+(t.length>>>2)+(3&t.length?1:0)),t.length}_setPageBits(e,t,n,r){const i=n>>>5,s=r>>>5,o=4294967295>>>(31&n),a=~(4294967295>>>(31&r));return i===s?(e.bits[i]=t?e.bits[i]|o&a:e.bits[i]&~(o&a),this._update(e,i,i+1),r-n):(e.bits[i]=t?e.bits[i]|o:e.bits[i]&~o,s-i>2&&e.bits.fill(t?4294967295:0,i+1,s-1),1024===s?(e.bits[s-1]=t?4294967295:0,this._update(e,i,s),r-n):(e.bits[s]=t?e.bits[s]|a:e.bits[s]&~a,this._update(e,i,s+1),r-n))}_update(e,t,n){for(;t<n;t++){const n=e.bits[t];this._updateAllOne(e,t,n),this._updateOneOne(e,t,n)}}_updateAllOne(e,t,n){var r=1;do{for(;r<3;r++){const i=e.allOne[r],s=31&t,o=i[t>>>=5];if(i[t]=4294967295===n?o|2147483648>>>s:o&~(2147483648>>>s),(n=i[t])===o)return}t+=this._offsets[e.level],e=this._parents[e.level],r=0}while(e)}_updateOneOne(e,t,n){var r=1;do{for(;r<3;r++){const i=e.oneOne[r],s=31&t,o=i[t>>>=5];if(i[t]=0!==n?o|2147483648>>>s:o&~(2147483648>>>s),(n=i[t])===o)return}t+=this._offsets[e.level],e=this._parents[e.level],r=0,0===n&&e&&(e.children[this._offsets[e.level-1]]=void 0)}while(e)}_getPage(e,t){for(d(e,this._path);e>=this.length;){if(!t)return null;this.grow()}for(var n=this._page,r=n.level;r>0&&n;r--){const e=this._path[r];this._parents[r-1]=n,n=n.children[e]||(t?this._addPage(n,e):null)}return n}_addPage(e,t){return this._allocs++,e=e.children[t]=new i(e.level-1)}}class c{constructor(e){this._bitfield=e,this._path=new Uint16Array(5),this._offsets=new Uint16Array(this._path.buffer,this._path.byteOffset+2,4),this._parents=new Array(4).fill(null),this._page=null,this._allocs=e._allocs,this.seek(0)}seek(e){if(this._allocs=this._bitfield._allocs,e>=this._bitfield.length)return this._page=null,this;d(e,this._path),this._page=this._bitfield._page;for(var t=this._page.level;t>0;t--)this._parents[t-1]=this._page,this._page=this._page.children[this._path[t]]||s[t-1];return this}next(e){return e?this.nextTrue():this.nextFalse()}nextFalse(){this._allocs!==this._bitfield._allocs&&this.seek(f(this._path));for(var e=this._page,t=this._path[0],n=a;e;){for(var r=0;r<3;r++){const i=31&t,s=Math.clz32(~e.allOne[r][t>>>=5]&n[i]);if(32!==s)return this._downLeftFalse(e,r,t,s);n=o}t=this._offsets[e.level],e=this._parents[e.level]}return-1}_downLeftFalse(e,t,n,r){for(;;){for(;t;)n=(n<<5)+r,r=Math.clz32(~e.allOne[--t][n]);if(n=(n<<5)+r,!e.level)break;this._parents[e.level-1]=e,this._path[e.level]=n,e=e.children[n],t=3,r=n=0}return this._page=e,this._path[0]=n,this._inc()}nextTrue(){for(var e=this._page,t=this._path[0],n=a;e;){for(var r=0;r<3;r++){const i=31&t,s=Math.clz32(e.oneOne[r][t>>>=5]&n[i]);if(32!==s)return this._downLeftTrue(e,r,t,s);n=o}t=this._offsets[e.level],e=this._parents[e.level]}return-1}_downLeftTrue(e,t,n,r){for(;;){for(;t;)n=(n<<5)+r,r=Math.clz32(e.oneOne[--t][n]);if(n=(n<<5)+r,!e.level)break;this._parents[e.level-1]=e,this._path[e.level]=n,e=e.children[n],t=3,r=n=0}return this._page=e,this._path[0]=n,this._inc()}_inc(){const e=f(this._path);return this._path[0]<32767?this._path[0]++:this.seek(e+1),e}}function f(e){return 32768*(32768*(32768*e[3]+e[2])+e[1])+e[0]}function d(e,t){e=((e=(e-(t[0]=32767&e))/32768)-(t[1]=32767&e))/32768,t[3]=(e-(t[2]=32767&e))/32768&32767}},function(e,t){e.exports=function(e){var t=32;return(e&=-e)&&t--,65535&e&&(t-=16),16711935&e&&(t-=8),252645135&e&&(t-=4),858993459&e&&(t-=2),1431655765&e&&(t-=1),t}},function(e,t,n){const r=n(10),i=n(0),s=Symbol("opening queue"),o=Symbol("closing when inactive"),a=Symbol("closing queue"),u=Symbol("sync"),l=Symbol("fast close");function h(e){if(!(this instanceof h))return new h(e);r.EventEmitter.call(this),e||(e={}),e.open&&(this._open=e.open),e.close&&(this._close=e.close),this.opening=!1,this.opened=!1,this.closing=!1,this.closed=!1,this.actives=0,this[s]=null,this[o]=null,this[a]=null,this[u]=!1,this[l]=!0}function c(e){if(this[u])return process.nextTick(c.bind(this),e);const t=this[s];for(this[s]=null,this.opening=!1,this.opened=!e;t.length;)t.shift()(e);const n=this[o];if(n&&!this.actives)for(this[o]=null;n.length;)this.close(n.shift())}function f(e){if(this[u])return process.nextTick(f.bind(this),e);const t=this[a];for(this.closing=!1,this[a]=null,this.closed=!e;t.length;)t.shift()(e)}function d(){}e.exports=h,i(h,r.EventEmitter),h.prototype._open=function(e){e(null)},h.prototype._close=function(e){e(null)},h.prototype.open=function(e){return e||(e=d),this[a]||this.closed?process.nextTick(e,new Error("Resource is closed")):this.opened?process.nextTick(e):void(this[s]?this[s].push(e):(this.opening=!0,this[s]=[e],this[u]=!0,this._open(c.bind(this)),this[u]=!1))},h.prototype.active=function(e){return this[l]&&this[o]||this[a]||this.closed?(e&&process.nextTick(e,new Error("Resource is closed")),!1):(this.actives++,!0)},h.prototype.inactive=function(e,t,n){if(!--this.actives){const e=this[o];if(e)for(this[o]=null;e.length;)this.close(e.shift())}e&&e(t,n)},h.prototype.close=function(e,t){return"function"==typeof e?this.close(!1,e):(t||(t=d),e&&(this[l]=!1),this.closed?process.nextTick(t):this.actives||this[s]?(this[o]||(this[o]=[]),void this[o].push(t)):this.opened?void(this[a]?this[a].push(t):(this.closing=!0,this[a]=[t],this[u]=!0,this._close(f.bind(this)),this[u]=!1)):(this.closed=!0,void process.nextTick(t)))}},function(e,t,n){(function(t){const r=n(30)(t);function i(e){return!!r.fd_lock(e)}i.unlock=function(e){return!!r.fd_unlock(e)},e.exports=i}).call(this,"/")},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}}]);